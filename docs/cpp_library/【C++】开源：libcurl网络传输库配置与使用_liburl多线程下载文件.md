







> 
> ğŸ˜*â˜…,Â°*:.â˜†(ï¿£â–½ï¿£)/$:*.Â°â˜…* ğŸ˜  
>  è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»libcurlç½‘ç»œä¼ è¾“åº“é…ç½®ä¸ä½¿ç”¨ã€‚  
>  **æ— ä¸“ç²¾åˆ™ä¸èƒ½æˆï¼Œæ— æ¶‰çŒåˆ™ä¸èƒ½é€šã€‚â€”â€”æ¢å¯è¶…**  
>  æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œä¸€èµ·å­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚  
>  å–œæ¬¢çš„æœ‹å‹å¯ä»¥å…³æ³¨ä¸€ä¸‹ï¼Œä¸‹æ¬¡æ›´æ–°ä¸è¿·è·¯ğŸ¥
> 
> 
> 




#### æ–‡ç« ç›®å½•


* + [:smirk:1. é¡¹ç›®ä»‹ç»](#smirk1__7)
	+ [:blush:2. ç¯å¢ƒé…ç½®](#blush2__33)
	+ [:satisfied:3. ä½¿ç”¨è¯´æ˜](#satisfied3__45)




### ğŸ˜1. é¡¹ç›®ä»‹ç»


å®˜ç½‘ï¼š`https://curl.se/`


é¡¹ç›®Githubåœ°å€ï¼š`https://github.com/curl/curl`


`libcurl` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€å¼€æºçš„ç½‘ç»œä¼ è¾“åº“ï¼Œå®ƒæ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬ `HTTPã€HTTPSã€FTPã€SMTPã€POP3` ç­‰ã€‚libcurl æä¾›äº†ä¸€ç»„æ˜“äºä½¿ç”¨çš„ APIï¼Œå¯ä»¥ç”¨äºåœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚


ä¸‹é¢æ˜¯ä¸€äº› `libcurl` çš„ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š



> 
> 1.æ”¯æŒå¤šç§åè®®ï¼šlibcurl æ”¯æŒå¸¸ç”¨çš„ç½‘ç»œåè®®ï¼Œä¾‹å¦‚ HTTPã€HTTPSã€FTPã€SMTPã€POP3ã€IMAP ç­‰ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿé€šè¿‡ç»Ÿä¸€çš„æ¥å£å¤„ç†å„ç§ç½‘ç»œä¼ è¾“éœ€æ±‚ã€‚
> 
> 
> 



> 
> 2.å®¹æ˜“é›†æˆï¼šlibcurl æä¾›äº†ç®€æ´æ˜“ç”¨çš„ C/C++ APIï¼Œå¯ä»¥è½»æ¾åœ°å°†å…¶é›†æˆåˆ°å„ç§åº”ç”¨ç¨‹åºä¸­ï¼Œæ— è®ºæ˜¯å‘½ä»¤è¡Œå·¥å…·è¿˜æ˜¯å›¾å½¢ç•Œé¢åº”ç”¨ã€‚
> 
> 
> 



> 
> 3.å¤šçº¿ç¨‹æ”¯æŒï¼šlibcurl å¯ä»¥ä¸å¤šçº¿ç¨‹ç¯å¢ƒå¾ˆå¥½åœ°é…åˆä½¿ç”¨ï¼Œå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¿›è¡Œç½‘ç»œæ“ä½œã€‚
> 
> 
> 



> 
> 4.æ”¯æŒä»£ç†ï¼šlibcurl å…·æœ‰å¹¿æ³›çš„ä»£ç†æ”¯æŒï¼Œå¯ä»¥é…ç½®å’Œä½¿ç”¨å„ç§ä»£ç†æœåŠ¡å™¨è¿›è¡Œç½‘ç»œä¼ è¾“ã€‚
> 
> 
> 



> 
> 5.SSL/TLS åŠ å¯†æ”¯æŒï¼šlibcurl å†…éƒ¨é›†æˆäº† OpenSSL æˆ–è€…å…¶ä»–åŠ å¯†åº“ï¼Œæ”¯æŒå®‰å…¨çš„ HTTPS è¿æ¥ï¼Œä¿è¯æ•°æ®çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚
> 
> 
> 



> 
> 6.æ–­ç‚¹ç»­ä¼ ï¼šlibcurl å…è®¸æ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ç½‘ç»œè¿æ¥ä¸­æ–­åç»§ç»­ä¼ è¾“ï¼ˆå¯å®ç°ç±»ä¼¼IDMå¤šçº¿ç¨‹ä¸‹è½½å™¨çš„åº”ç”¨ï¼‰ã€‚
> 
> 
> 



> 
> 7.Cookie æ”¯æŒï¼šlibcurl å…·æœ‰å®Œæ•´çš„ Cookie æ”¯æŒï¼Œå¯ä»¥å¤„ç†å’Œç®¡ç† Web æœåŠ¡å™¨å‘é€çš„ Cookieã€‚
> 
> 
> 



> 
> 8.è‡ªå®šä¹‰å›è°ƒï¼šlibcurl æä¾›äº†å›è°ƒå‡½æ•°æ¥å£ï¼Œå…è®¸å¼€å‘è€…è‡ªå®šä¹‰å¤„ç†ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„äº‹ä»¶å’Œæ•°æ®ã€‚
> 
> 
> 



> 
> 9.è·¨å¹³å°ï¼šlibcurl å¯ä»¥åœ¨å¤šä¸ªæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬ Windowsã€Linuxã€macOS ç­‰ã€‚
> 
> 
> 


### ğŸ˜Š2. ç¯å¢ƒé…ç½®


ä¸‹é¢è¿›è¡Œç¯å¢ƒé…ç½®ï¼š



```
# aptå®‰è£…
sudo apt install libcurl4-openssl-dev

```

ç¼–è¯‘è¿è¡Œï¼š



```
g++ -o main main.cpp -lcurl && ./main

```

### ğŸ˜†3. ä½¿ç”¨è¯´æ˜


HTTP è¯·æ±‚å’Œå“åº”ç¤ºä¾‹ï¼š



```
#include <iostream>
#include <curl/curl.h>

// å›è°ƒå‡½æ•°ï¼Œç”¨äºå¤„ç†æœåŠ¡å™¨å“åº”çš„æ•°æ®
size_t WriteCallback(void\* contents, size_t size, size_t nmemb, std::string\* response) {
    size_t totalSize = size \* nmemb;
    response->append(static\_cast<char\*>(contents), totalSize);
    return totalSize;
}

int main() {
    CURL\* curl;
    CURLcode res;

    // åˆå§‹åŒ–Curlåº“
    curl\_global\_init(CURL_GLOBAL_DEFAULT);

    // åˆ›å»ºCurlå¥æŸ„
    curl = curl\_easy\_init();
    if (curl) {
        std::string response;

        // è®¾ç½®è¯·æ±‚URL
        curl\_easy\_setopt(curl, CURLOPT_URL, "https://example.com");

        // è®¾ç½®POSTè¯·æ±‚
        curl\_easy\_setopt(curl, CURLOPT_POST, 1L);

        // è®¾ç½®POSTæ•°æ®
        std::string postData = "key1=value1&key2=value2";
        curl\_easy\_setopt(curl, CURLOPT_POSTFIELDS, postData.c\_str());

        // è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æœåŠ¡å™¨å“åº”çš„æ•°æ®
        curl\_easy\_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);
        curl\_easy\_setopt(curl, CURLOPT_WRITEDATA, &response);

        // æ‰§è¡Œè¯·æ±‚
        res = curl\_easy\_perform(curl);
        if (res == CURLE_OK) {
            // è¯·æ±‚æˆåŠŸï¼Œæ‰“å°æœåŠ¡å™¨å“åº”çš„æ•°æ®
            std::cout << "Response: " << response << std::endl;
        } else {
            // è¯·æ±‚å¤±è´¥ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯
            std::cerr << "Curl request failed: " << curl\_easy\_strerror(res) << std::endl;
        }

        // æ¸…ç†Curlå¥æŸ„
        curl\_easy\_cleanup(curl);
    }

    // æ¸…ç†Curlåº“
    curl\_global\_cleanup();

    return 0;
}

```

FTPæ–‡ä»¶ä¸‹è½½ç¤ºä¾‹ï¼š



```
#include <iostream>
#include <curl/curl.h>

// å›è°ƒå‡½æ•°ï¼Œç”¨äºå¤„ç†æ¥æ”¶åˆ°çš„ FTP æ•°æ®
size_t writeCallback(char\* buf, size_t size, size_t nmemb, std::string\* response) {
    size_t totalSize = size \* nmemb;
    response->append(buf, totalSize);
    return totalSize;
}

int main() {
    CURL\* curl;
    CURLcode res;

    // åˆå§‹åŒ– libcurl
    curl\_global\_init(CURL_GLOBAL_DEFAULT);

    // åˆ›å»ºä¸€ä¸ª curl å¥æŸ„
    curl = curl\_easy\_init();
    if (curl) {
        // è®¾ç½® FTP URL
        curl\_easy\_setopt(curl, CURLOPT_URL, "ftp://example.com/path/to/ftp/file.txt");

        // è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼ˆå¦‚æœéœ€è¦ï¼‰
        curl\_easy\_setopt(curl, CURLOPT_USERPWD, "username:password");

        // è®¾ç½®å†™å›è°ƒå‡½æ•°
        std::string response;
        curl\_easy\_setopt(curl, CURLOPT_WRITEFUNCTION, writeCallback);
        curl\_easy\_setopt(curl, CURLOPT_WRITEDATA, &response);

        // æ‰§è¡Œ FTP ä¸‹è½½æ“ä½œ
        res = curl\_easy\_perform(curl);
        if (res != CURLE_OK) {
            std::cerr << "curl\_easy\_perform() failed: " << curl\_easy\_strerror(res) << std::endl;
        } else {
            std::cout << "FTP Response: " << response << std::endl;
        }

        // æ¸…ç† curl å¥æŸ„
        curl\_easy\_cleanup(curl);
    }

    // æ¸…ç† libcurl
    curl\_global\_cleanup();

    return 0;
}

```

åŸºäºlibcurlçš„å¤šçº¿ç¨‹ä¸‹è½½å·¥å…·ï¼Œgithubåœ°å€ï¼š`https://github.com/tuyungang/http_multi_thread_download_tool`



```
# ç¼–è¯‘
cd xxx && make
# ä¸‹è½½ç¤ºä¾‹(å¾®ä¿¡å®‰è£…æ–‡ä»¶ï¼Œ200Må·¦å³)
./multi_thread_download -H https://dldir1.qq.com/weixin/Windows/WeChatSetup.exe -s 50
# å¤šçº¿ç¨‹ä¸‹è½½å™¨æœ¬è´¨æ˜¯è‡ªå®šä¹‰å¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«ä¸‹è½½æ–‡ä»¶çš„ä¸åŒéƒ¨åˆ†ï¼Œæœ€åå°†å„ä¸ªæ®µæ‹¼æ¥èµ·æ¥ç»„æˆæœ€åæ–‡ä»¶ï¼Œä¸­é—´æ–‡ä»¶åˆ é™¤ï¼Œå®ç°å¹¶è¡Œä¸‹è½½å’Œåˆ†å—ä¸‹è½½çš„æ•ˆæœï¼ˆlibcurlæ”¯æŒäº†æ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼‰ã€‚

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/6cbcd6c17cec4dba9bb3c0f895f02fa2.png)


ä»¥ä¸Šã€‚





