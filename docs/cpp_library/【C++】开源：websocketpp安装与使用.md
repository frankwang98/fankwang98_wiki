







> 
> ğŸ˜*â˜…,Â°*:.â˜†(ï¿£â–½ï¿£)/$:*.Â°â˜…* ğŸ˜  
>  è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»websocketppçš„å®‰è£…ä¸ä½¿ç”¨ã€‚  
>  **å­¦å…¶æ‰€ç”¨ï¼Œç”¨å…¶æ‰€å­¦ã€‚â€”â€”æ¢å¯è¶…**  
>  æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œä¸€èµ·å­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚  
>  å–œæ¬¢çš„æœ‹å‹å¯ä»¥å…³æ³¨ä¸€ä¸‹ï¼Œä¸‹æ¬¡æ›´æ–°ä¸è¿·è·¯ğŸ¥
> 
> 
> 




#### æ–‡ç« ç›®å½•


* + [:smirk:1. websocketä»‹ç»](#smirk1_websocket_7)
	+ [:blush:2. websocketppå®‰è£…](#blush2_websocketpp_30)
	+ [:satisfied:3. websocketppä½¿ç”¨](#satisfied3_websocketpp_55)




### ğŸ˜1. websocketä»‹ç»


`WebSocket` æ˜¯ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ï¼Œå®ƒä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æµå˜å¾—æ›´åŠ å®æ—¶ã€é«˜æ•ˆã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ HTTP è¯·æ±‚-å“åº”æœºåˆ¶ï¼ŒWebSocket ç›´æ¥å»ºç«‹è¿æ¥ï¼Œå¹¶é€šè¿‡æ•°æ®å¸§ï¼ˆ`Data Frame`ï¼‰æ¥äº¤æ¢æ¶ˆæ¯ï¼Œä»è€Œé¿å…äº†æ¯æ¬¡é€šä¿¡éƒ½è¦å»ºç«‹ã€æ–­å¼€è¿æ¥çš„å¼€é”€ã€‚


WebSocket åè®®æœ€æ—©ç”± HTML5 è§„èŒƒæå‡ºï¼Œå®ƒå¯ä»¥ç”¨äº Web åº”ç”¨ç¨‹åºã€ç§»åŠ¨åº”ç”¨ç¨‹åºç­‰ä¸åŒç±»å‹çš„åº”ç”¨åœºæ™¯ä¸­ã€‚WebSocket é™¤äº†æ”¯æŒæ–‡æœ¬æ ¼å¼çš„æ¶ˆæ¯å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶æ•°æ®æ ¼å¼å‘é€æ•°æ®ï¼Œè¿™ä½¿å¾— WebSocket å¯ä»¥å¤„ç†åŒ…æ‹¬éŸ³é¢‘ã€è§†é¢‘ç­‰å¤æ‚ç±»å‹çš„æ•°æ®ã€‚


`WebSocket++`æ˜¯ä¸€ä¸ªC++ç¼–å†™çš„å¼€æºåº“ï¼Œç”¨äºåœ¨Webåº”ç”¨ç¨‹åºä¸­å®ç°WebSocketåè®®çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚


ä»¥ä¸‹æ˜¯WebSocket++çš„ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š



> 
> 1. éµå¾ªWebSocketåè®®ï¼šWebSocket++å®Œå…¨ç¬¦åˆWebSocketåè®®æ ‡å‡†ï¼ˆRFC 6455ï¼‰ï¼Œæ”¯æŒåŸºäºTCPçš„åŒå‘é€šä¿¡ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®æ—¶ä¼ è¾“æ•°æ®ã€‚
> 
> 
> 



> 
> 2. è·¨å¹³å°æ”¯æŒï¼šWebSocket++å¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬Linuxã€Windowså’ŒMacOSç­‰ã€‚å®ƒä¾èµ–äºæ ‡å‡†çš„C++åº“ï¼Œå› æ­¤å¯ä»¥å¾ˆå®¹æ˜“åœ°ç§»æ¤åˆ°ä¸åŒçš„ç¯å¢ƒä¸­ã€‚
> 
> 
> 



> 
> 3. ç®€å•æ˜“ç”¨ï¼šWebSocket++æä¾›äº†ç®€æ´è€Œç›´è§‚çš„APIï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾åœ°åˆ›å»ºå’Œç®¡ç†WebSocketè¿æ¥ã€‚å®ƒå°è£…äº†åº•å±‚çš„ç½‘ç»œç»†èŠ‚ï¼Œæä¾›äº†é«˜çº§æŠ½è±¡ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ã€‚
> 
> 
> 



> 
> 4. çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼šWebSocket++å…è®¸å¼€å‘äººå‘˜è‡ªå®šä¹‰æ‰©å±•å’Œæ’ä»¶ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„é’©å­å‡½æ•°å’Œäº‹ä»¶å¤„ç†æœºåˆ¶ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè‡ªç”±åœ°æ‰©å±•å’Œå®šåˆ¶åº“çš„åŠŸèƒ½ã€‚
> 
> 
> 



> 
> 5. æ”¯æŒå¼‚æ­¥IOå’Œå¤šçº¿ç¨‹ï¼šWebSocket++æ”¯æŒå¼‚æ­¥IOæ¨¡å‹ï¼Œå¯ä»¥å¤„ç†å¤§é‡å¹¶å‘è¿æ¥ï¼Œæä¾›é«˜æ€§èƒ½çš„å®æ—¶é€šä¿¡ã€‚å®ƒè¿˜æ”¯æŒå¤šçº¿ç¨‹å¤„ç†ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„ä¼˜åŠ¿ã€‚
> 
> 
> 



> 
> 6. SSL/TLSæ”¯æŒï¼šWebSocket++æä¾›äº†å¯¹SSL/TLSåŠ å¯†çš„æ”¯æŒï¼Œå¯ä»¥ç¡®ä¿WebSocketè¿æ¥çš„å®‰å…¨æ€§ã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨TLS/SSLè¯ä¹¦å’Œé…ç½®ï¼Œè¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚
> 
> 
> 



> 
> 7. æ‰©å±•å’Œå­åè®®æ”¯æŒï¼šWebSocket++æ”¯æŒWebSocketåè®®çš„æ‰©å±•å’Œå­åè®®ã€‚å¼€å‘äººå‘˜å¯ä»¥è‡ªå®šä¹‰å’Œå®ç°è‡ªå·±çš„æ‰©å±•å’Œå­åè®®ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„åº”ç”¨éœ€æ±‚ã€‚
> 
> 
> 


### ğŸ˜Š2. websocketppå®‰è£…


ä»¥ubuntu18.04ä¸ºä¾‹ï¼š


websocketppåº“ä¾èµ–`boost_system`ï¼Œå› æ­¤é¦–å…ˆå®‰è£…booståº“ï¼š



```
# aptå®‰è£…
sudo apt-get install libboost-dev

```

å®‰è£…websocketppåº“ï¼ˆè¿™é‡Œç”¨0.8.2ç‰ˆæœ¬ï¼‰ï¼š


githubåœ°å€ï¼š`https://github.com/zaphoyd/websocketpp`



```
# ç¼–è¯‘å®‰è£…
cd websocketcpp
mkdir build && cd build
cmake ..
make
sudo make install

```

å®‰è£…å®Œæˆï¼š


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2b95a5e8471e4e84855c680dd1d507c4.png)


### ğŸ˜†3. websocketppä½¿ç”¨


é€šä¿¡ä¾‹ç¨‹æµ‹è¯•ï¼š



```
# æœåŠ¡ç«¯
cd websocketpp/examples/echo_server
g++ echo_server.cpp -o echo_server -lboost\_system -lpthread
./echo_server
# å®¢æˆ·ç«¯
cd websocketpp/examples/echo_client
g++ echo_client.cpp -o echo_client -lboost\_system -lpthread
./echo_client
# é»˜è®¤é€šä¿¡åœ¨æœ¬åœ°çš„9002ç«¯å£

```

åœ¨çº¿websocketæ”¶å‘æµ‹è¯•ï¼š


æµ‹è¯•åœ°å€ï¼š`http://www.websocket-test.com/`


æµ‹è¯•å¦‚ä¸‹ï¼š


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/73a4f14de0e8438b919e35ebdf8d4bbf.png)


ç«¯å£é‡ç”¨é—®é¢˜å¯ä»¥çœ‹ï¼š`http://t.csdn.cn/Z7AyU`ï¼ˆä¸€èˆ¬å…³æ‰æœåŠ¡åç›´æ¥é‡å¯ä¼šæŠ¥é”™ï¼Œç­‰ä¸€ä¼šå°±å¯ä»¥ï¼‰


æ ¹æœ¬è§£å†³å°±æ˜¯åœ¨listenå‡½æ•°å‰åŠ å…¥è¿™æ¡ï¼Œè¿™æ ·åœ¨Linuxç«¯é‡å¯ç¨‹åºåå°±ä¸ä¼šæŠ¥é”™äº†ï¼š



```
server.set\_reuse\_addr(true);	// åŠ å…¥ç«¯å£å¤ç”¨
server.listen(websocketpp::lib::asio::ip::tcp::v4(), uPort);

```

å‚è€ƒï¼š



```
https://zhuanlan.zhihu.com/p/59925926
http://t.csdn.cn/CGAFL

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/6567c240f1b5443ab60e194d3ffe3803.png)


ä»¥ä¸Šã€‚





