
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="DevFrank Wiki是一个知识库整合站点">
      
      
        <meta name="author" content="DevFrank">
      
      
        <link rel="canonical" href="https://frankwang98.github.io/wiki/cpp_ros/ROS%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/">
      
      
        <link rel="prev" href="../%E6%9C%BA%E5%99%A8%E4%BA%BA%2B%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/">
      
      
        <link rel="next" href="../Windows%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85ROS%E4%BD%93%E9%AA%8C/">
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.11">
    
    
      
        <title>ROS学习入门 - DevFrank Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Fira Sans";--md-code-font:"Fira Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ros" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="DevFrank Wiki" class="md-header__button md-logo" aria-label="DevFrank Wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3 1 9l11 6 9-4.91V17h2V9M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DevFrank Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ROS学习入门
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/frankwang98/wiki" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  简介

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cpp_basic/C%2B%2B%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" class="md-tabs__link">
          
  
  C++基础

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cpp_algorithm/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" class="md-tabs__link">
          
  
  C++数据结构与算法

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cpp_library/Boost%E5%BA%93%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-tabs__link">
          
  
  C++开源库和框架

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cpp_qt/Qt%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-tabs__link">
          
  
  C++Qt嵌入式与桌面应用

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../ROS%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-tabs__link">
          
  
  C++ROS机器人与自动驾驶

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cpp_cv/OpenCV%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-tabs__link">
          
  
  C++CV计算机视觉

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cpp_gl/OpenGL%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-tabs__link">
          
  
  C++GL图形学与游戏

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../shell_python/Python%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-tabs__link">
          
  
  Shell脚本与自动化

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DevFrank Wiki" class="md-nav__button md-logo" aria-label="DevFrank Wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3 1 9l11 6 9-4.91V17h2V9M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82Z"/></svg>

    </a>
    DevFrank Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/frankwang98/wiki" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    简介
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++基础
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            C++基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    环境配置与基础语法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E6%A0%87%E5%87%86%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标准库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E5%BC%80%E6%BA%90%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开源库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E6%96%87%E4%BB%B6IO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文件IO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    字符串
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    异常处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数组指针
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    并发编程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络编程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_basic/C%2B%2B%E6%A8%A1%E6%9D%BF%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模板编程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++数据结构与算法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            C++数据结构与算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    排序算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    查找算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    搜索算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    动态规划算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E9%93%BE%E8%A1%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    链表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E6%A0%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E5%9B%BE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    字符串
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E4%BD%8D%E8%BF%90%E7%AE%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    位运算
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/数学.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数学
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/STL%E5%B8%B8%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STL常用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_algorithm/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设计模式
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++开源库和框架
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            C++开源库和框架
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Boost%E5%BA%93%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boost库常用组件配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Boost%E7%BD%91%E7%BB%9C%E5%BA%93Asio%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boost网络库Asio配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Boost%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E5%BA%93InterProcess%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boost进程间通信库InterProcess配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Boost%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%E5%BA%93PropertyTree%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boost配置文件解析库PropertyTree配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Poco%E5%8F%AF%E7%A7%BB%E6%A4%8D%E7%BB%84%E4%BB%B6%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Poco可移植组件库配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/abseil-cpp%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    abseil-cpp基础组件库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/websocketpp%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    websocketpp安装与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/cpp-httplib%E5%8D%8F%E8%AE%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cpp-httplib协议库配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/libcurl%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libcurl网络传输库配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%BA%93cpr%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络请求库cpr配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Muduo%E7%BD%91%E7%BB%9C%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Muduo网络库配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/libmodbus%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libmodbus通信协议库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/zeromq%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zeromq消息队列库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/MQTT%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MQTT安装与配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/vsomeip%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vsomeip消息队列库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/LCM%E9%80%9A%E8%AE%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LCM通讯中间件配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/grpc%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    grpc远程过程调用配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/libev%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libev事件循环库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E5%BA%93libevent%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    事件驱动库libevent配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/jsoncpp%E8%A7%A3%E6%9E%90%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsoncpp解析库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/rapidjson%E8%A7%A3%E6%9E%90%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rapidjson解析库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/cjson%E8%A7%A3%E6%9E%90%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cjson解析库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/tinyxml2%E8%A7%A3%E6%9E%90%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tinyxml2解析库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/yaml-cpp%E8%AF%BB%E5%8F%96%E5%92%8C%E5%86%99%E5%85%A5yaml%E4%BF%A1%E6%81%AF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    yaml-cpp读取和写入yaml信息
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/fast-cpp-csv-parser%E8%A7%A3%E6%9E%90%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fast-cpp-csv-parser解析库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/gflags%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gflags命令行参数解析库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/%E8%B7%A8%E5%B9%B3%E5%8F%B0Excel%E5%A4%84%E7%90%86%E5%BA%93-libxlsxwriter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    跨平台Excel处理库-libxlsxwriter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/matplotlib-cpp%E9%9D%99%E6%80%81%E5%9B%BE%E8%A1%A8%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    matplotlib-cpp静态图表库配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%E5%BA%93protobuf%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据序列化库protobuf配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6gtest%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    单元测试框架gtest配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/easylogging%2B%2B%E6%97%A5%E5%BF%97%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    easylogging++日志库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/spdlog%E6%97%A5%E5%BF%97%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    spdlog日志库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/glog%E6%97%A5%E5%BF%97%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    glog日志库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL数据库安装与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/SQLite%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQLite数据库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis数据库配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Eigen3%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eigen3线性代数模板库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/ceres%E5%92%8Cg2o%E9%9D%9E%E7%BA%BF%E6%80%A7%E4%BC%98%E5%8C%96%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ceres和g2o非线性优化库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Ipopt%E3%80%81OSQP%E3%80%81osqp-eigen%E5%B8%B8%E7%94%A8%E6%B1%82%E8%A7%A3%E5%99%A8%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ipopt、OSQP、osqp-eigen常用求解器配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/CGAL%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CGAL计算几何库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/ffmpeg%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ffmpeg音视频库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/vulkan%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vulkan图形学库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/%E5%A4%9A%E5%AA%92%E4%BD%93SFML%E5%BA%93%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多媒体SFML库使用入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Linux%E7%AB%AFV4L2%E8%A7%86%E9%A2%91%E8%AE%BE%E5%A4%87%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux端V4L2视频设备库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Linux%E7%AB%AFALSA%E9%9F%B3%E9%A2%91%E5%A4%84%E7%90%86%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux端ALSA音频处理库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/mumble%E8%B7%A8%E5%B9%B3%E5%8F%B0%E8%AF%AD%E9%9F%B3%E9%80%9A%E4%BF%A1%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mumble跨平台语音通信配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Windows%E5%9B%BE%E5%BD%A2%E5%BA%93EasyX%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows图形库EasyX配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/ImGui%E5%9B%BE%E5%BD%A2%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ImGui图形用户界面库配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/ncurses%E7%BB%88%E7%AB%AFTUI%E6%96%87%E6%9C%AC%E7%95%8C%E9%9D%A2%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ncurses终端TUI文本界面库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/FTXUI%E7%BB%88%E7%AB%AF%E7%95%8C%E9%9D%A2%E5%BA%93%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FTXUI终端界面库配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/FLTK%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FLTK图形界面库配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/oatpp-web%E6%A1%86%E6%9E%B6%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    oatpp-web框架配置与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/crowcpp%E5%BE%AE%E5%9E%8Bweb%E6%A1%86%E6%9E%B6%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    crowcpp微型web框架配置使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Box2D%E5%8A%A8%E5%8A%9B%E5%AD%A6%E5%BA%93%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Box2D动力学库配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/Web%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web文件服务器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/ThreadPoll%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%AE%9E%E7%8E%B0%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ThreadPoll线程池实现与使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_library/cpp-tbox%E7%99%BE%E5%AE%9D%E7%AE%B1%E7%BB%84%E4%BB%B6%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cpp-tbox百宝箱组件库
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++Qt嵌入式与桌面应用
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            C++Qt嵌入式与桌面应用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/Qt%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Qt环境安装与基础示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/vs2017%2Bqt%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vs2017+qt环境配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/qml%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    qml环境配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/QWidget%E4%B8%8E%E6%B3%A8%E5%86%8C%E7%99%BB%E9%99%86%E7%95%8C%E9%9D%A2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QWidget与注册登陆界面
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/Qt%E4%BA%8B%E4%BB%B6%E4%B8%8E%E6%AD%A3%E5%BC%A6%E6%9B%B2%E7%BA%BF%E7%BB%98%E5%88%B6%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Qt事件与正弦曲线绘制示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/QCustomPlot%E5%9B%BE%E8%A1%A8%E7%BB%98%E5%88%B6%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QCustomPlot图表绘制库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/SQLite%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQLite数据库示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E5%92%8C%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    获取系统和网络信息示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/%E4%B8%B2%E5%8F%A3%E8%B0%83%E8%AF%95%E5%8A%A9%E6%89%8B%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    串口调试助手示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/CAN%E5%88%86%E6%9E%90%E4%BB%AA%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAN分析仪二次开发示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/TCP%2BUDP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TCP+UDP网络通信示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/windeployqt%2Bnsis%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8C%85%E5%92%8C%E5%8F%91%E5%B8%83/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    windeployqt+nsis程序打包和发布
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_qt/wxGlade%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wxGlade配置与使用
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    C++ROS机器人与自动驾驶
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            C++ROS机器人与自动驾驶
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ROS%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS环境安装与基础示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ROS2%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS2环境配置与基础示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%9C%BA%E5%99%A8%E4%BA%BA%2B%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器人+自动驾驶学习路线
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ROS学习入门
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ROS学习入门
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ros_1" class="md-nav__link">
    <span class="md-ellipsis">
      ROS学习入门
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ROS学习入门">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ros_2" class="md-nav__link">
    <span class="md-ellipsis">
      一、ROS介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_3" class="md-nav__link">
    <span class="md-ellipsis">
      二、ROS环境搭建
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_4" class="md-nav__link">
    <span class="md-ellipsis">
      三、第一个ROS案例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、第一个ROS案例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      测试案例——小海龟
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      编译案例——空程序包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      创建案例——新程序包
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_5" class="md-nav__link">
    <span class="md-ellipsis">
      四、ROS文件系统
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、ROS文件系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      文件系统概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      文件系统工具
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      rosbag数据录制与回放
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_6" class="md-nav__link">
    <span class="md-ellipsis">
      五、ROS消息机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、ROS消息机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      计算图概念：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      节点概念：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      客户端库概念：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      节点详解：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roscore" class="md-nav__link">
    <span class="md-ellipsis">
      ### roscore：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosnode" class="md-nav__link">
    <span class="md-ellipsis">
      ### rosnode：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosrun" class="md-nav__link">
    <span class="md-ellipsis">
      ### rosrun：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      话题详解：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topics" class="md-nav__link">
    <span class="md-ellipsis">
      ### Topics：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rqt_graph" class="md-nav__link">
    <span class="md-ellipsis">
      ### rqt_graph：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rostopic" class="md-nav__link">
    <span class="md-ellipsis">
      ### rostopic：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rqt_plot" class="md-nav__link">
    <span class="md-ellipsis">
      ### rqt_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      服务详解：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosservice" class="md-nav__link">
    <span class="md-ellipsis">
      ### rosservice
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosparam" class="md-nav__link">
    <span class="md-ellipsis">
      ### rosparam
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roslaunch" class="md-nav__link">
    <span class="md-ellipsis">
      roslaunch多节点启动
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      六、话题与服务机制实现
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、话题与服务机制实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rosros" class="md-nav__link">
    <span class="md-ellipsis">
      创建ROS消息和ROS服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msgsrv" class="md-nav__link">
    <span class="md-ellipsis">
      ### 消息(msg)和服务(srv)介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msg" class="md-nav__link">
    <span class="md-ellipsis">
      ### 创建一个 msg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosmsg" class="md-nav__link">
    <span class="md-ellipsis">
      ### 使用 rosmsg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#srv" class="md-nav__link">
    <span class="md-ellipsis">
      ### 创建一个srv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rossrv" class="md-nav__link">
    <span class="md-ellipsis">
      ### 使用 rossrv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    <span class="md-ellipsis">
      C++编写简单的消息发布器和订阅器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      ### 发布器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      ### 订阅器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      ### 编译节点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      Python编写简单的消息发布器和订阅器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      ### 发布器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      ### 订阅器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      ### 编译节点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cserviceclient" class="md-nav__link">
    <span class="md-ellipsis">
      C++编写简单的Service和Client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      ### 服务端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      ### 客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      ### 编译节点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pythonserviceclient" class="md-nav__link">
    <span class="md-ellipsis">
      Python编写简单的Service和Client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      ### 服务端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      ### 客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      ### 编译节点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_7" class="md-nav__link">
    <span class="md-ellipsis">
      七、ROS常用工具
    </span>
  </a>
  
    <nav class="md-nav" aria-label="七、ROS常用工具">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rqt" class="md-nav__link">
    <span class="md-ellipsis">
      rqt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rviz" class="md-nav__link">
    <span class="md-ellipsis">
      rviz
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_8" class="md-nav__link">
    <span class="md-ellipsis">
      八、ROS入门总结
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、ROS入门总结">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      接下来做什么？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ros_9" class="md-nav__link">
    <span class="md-ellipsis">
      ROS进阶探索
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ROS进阶探索">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ros_10" class="md-nav__link">
    <span class="md-ellipsis">
      一、ROS简介
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、ROS简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ros_11" class="md-nav__link">
    <span class="md-ellipsis">
      ROS设计目标
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_12" class="md-nav__link">
    <span class="md-ellipsis">
      ROS特点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smart_car" class="md-nav__link">
    <span class="md-ellipsis">
      二、创建一个smart_car
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、创建一个smart_car">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1smartcar" class="md-nav__link">
    <span class="md-ellipsis">
      1.创建简单的smartcar模型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2smartcar" class="md-nav__link">
    <span class="md-ellipsis">
      2.使用smartcar进行仿真
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3.键盘控制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4.操纵杆控制
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action" class="md-nav__link">
    <span class="md-ellipsis">
      三、action通讯机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、action通讯机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#action_1" class="md-nav__link">
    <span class="md-ellipsis">
      什么是action
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action_2" class="md-nav__link">
    <span class="md-ellipsis">
      action的工作机制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action_3" class="md-nav__link">
    <span class="md-ellipsis">
      action的定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      例程运行
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_tf" class="md-nav__link">
    <span class="md-ellipsis">
      四、ros_tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosnavigation" class="md-nav__link">
    <span class="md-ellipsis">
      五、ros与navigation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、ros与navigation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slam" class="md-nav__link">
    <span class="md-ellipsis">
      SLAM定位与建图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosteb" class="md-nav__link">
    <span class="md-ellipsis">
      六、ros与TEB轨迹规划
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、ros与TEB轨迹规划">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teb" class="md-nav__link">
    <span class="md-ellipsis">
      TEB优化测试
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teb_1" class="md-nav__link">
    <span class="md-ellipsis">
      TEB优化反馈
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosbridge_suite" class="md-nav__link">
    <span class="md-ellipsis">
      七、rosbridge_suite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_13" class="md-nav__link">
    <span class="md-ellipsis">
      八、ROS产品化探索
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、ROS产品化探索">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      通信机制篇
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Windows%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85ROS%E4%BD%93%E9%AA%8C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows系统安装ROS体验
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ROS%2BQt%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS+Qt界面开发环境搭建
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ROS%E5%B8%B8%E7%94%A8%E7%A1%AC%E4%BB%B6%E9%A9%B1%E5%8A%A8%E4%B8%8E%E5%8A%9F%E8%83%BD%E5%8C%85/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS常用硬件驱动与功能包
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%91%E8%8E%93%E6%B4%BE%E8%B5%84%E6%BA%90%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%AE%9E%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    树莓派资源介绍与实例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%91%E8%8E%93%E6%B4%BEROS%E6%99%BA%E8%83%BD%E5%B0%8F%E8%BD%A6%E8%B0%83%E8%AF%95%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    树莓派ROS智能小车调试使用记录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Carla%E5%BC%80%E6%BA%90%E4%BB%BF%E7%9C%9F%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Carla开源仿真环境配置与使用示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fsd_algorithm%E6%9E%B6%E6%9E%84%E4%B8%8E%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fsd_algorithm架构与源码学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FastDDS%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastDDS环境配置与使用示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenDDS%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenDDS环境配置与使用示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PID%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95%E5%8E%9F%E7%90%86%E4%B8%8E%E4%BB%BF%E7%9C%9F%E5%AE%9E%E7%8E%B0%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PID控制算法原理与仿真实现示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AStar%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AStar规划算法原理与实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../navigation%E5%AF%BC%E8%88%AA%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E4%B8%8E%E7%AE%97%E6%B3%95%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    navigation导航模块学习与算法示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SLAM%E5%AD%A6%E4%B9%A0%E4%B8%8E%E7%AE%97%E6%B3%95%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SLAM学习与算法示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cv_bridge%E5%8C%85%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%9B%BE%E5%83%8F%E8%BD%AC%E6%8D%A2%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cv_bridge包使用与图像转换示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pcl_ros%E5%8C%85%E4%BD%BF%E7%94%A8%E4%B8%8E%E7%82%B9%E4%BA%91%E8%BD%AC%E6%8D%A2%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pcl_ros包使用与点云转换示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../message_filters%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E4%BB%8B%E7%BB%8D%E4%B8%8E%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    message_filters时间同步介绍与示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%A4%9A%E4%BC%A0%E6%84%9F%E5%99%A8%E7%9B%AE%E6%A0%87%E8%9E%8D%E5%90%88%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多传感器目标融合学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PurePursuit%E7%BA%AF%E8%B7%9F%E8%B8%AA%E6%8E%A7%E5%88%B6%E8%8A%82%E7%82%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PurePursuit纯跟踪控制节点
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mpc_follower%E6%A8%A1%E5%9E%8B%E9%A2%84%E6%B5%8B%E6%8E%A7%E5%88%B6%E8%8A%82%E7%82%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mpc_follower模型预测控制节点
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%86%B3%E7%AD%96%E8%A7%84%E5%88%92%E6%A8%A1%E5%9D%97%E8%A7%A3%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    决策规划模块解析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Astar%E8%A7%84%E5%88%92%E8%8A%82%E7%82%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Astar规划节点
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenPlanner%E8%A7%84%E5%88%92%E8%8A%82%E7%82%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenPlanner规划节点
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2%E5%B0%8F%E6%97%B6%E5%AE%89%E8%A3%85Autoware1.13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2小时安装Autoware1.13
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Autoware%E5%BE%AA%E8%BF%B9%E6%8C%87%E5%AF%BC%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autoware循迹指导教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../autoware%E9%87%87%E9%9B%86%E5%AE%9E%E9%AA%8C%E6%95%B0%E6%8D%AEbag%E5%8C%85%E5%B9%B6%E4%BB%BF%E7%9C%9F%E8%BF%90%E8%A1%8C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    autoware采集实验数据bag包并仿真运行
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Apollo-ros%E7%89%88%E6%9C%AC%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apollo-ros版本架构学习与源码分析
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++CV计算机视觉
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            C++CV计算机视觉
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_cv/OpenCV%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenCV环境安装与基础示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_cv/%E5%9B%BE%E5%83%8F%E8%A7%86%E9%A2%91%E8%AF%BB%E5%8F%96%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    图像视频读取基础操作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_cv/%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    车道线检测原理与实现示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_cv/YOLO%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%AE%9E%E7%8E%B0%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YOLO目标检测介绍及实现示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_cv/%E7%BA%A2%E7%BB%BF%E7%81%AF%E6%A3%80%E6%B5%8B%E5%8F%8A%E5%AE%9E%E7%8E%B0%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    红绿灯检测及实现示例
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++GL图形学与游戏
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            C++GL图形学与游戏
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_gl/OpenGL%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenGL环境安装与基础示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_gl/%E5%88%9B%E5%BB%BA%E7%BA%BF%E6%AE%B5%E5%92%8C%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    创建线段和多边形示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_gl/OpenGL%E7%9D%80%E8%89%B2%E5%99%A8%E5%9F%BA%E7%A1%80%E4%B8%8EGLFW%E5%88%9B%E5%BB%BA%E4%B8%89%E8%A7%92%E5%BD%A2%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenGL着色器基础与GLFW创建三角形示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_gl/OpenGL%E9%BC%A0%E6%A0%87%E4%BA%A4%E4%BA%92%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenGL鼠标交互示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_gl/OpenGL%E9%94%AE%E7%9B%98%E4%BA%A4%E4%BA%92%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenGL键盘交互示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_gl/DDA%E6%95%B0%E5%80%BC%E5%BE%AE%E5%88%86%E7%BA%BF%E6%AE%B5%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D%E4%B8%8E%E7%94%BB%E7%BA%BF%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DDA数值微分线段算法介绍与画线示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_gl/OpenGLfreeglut%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenGLfreeglut环境配置与基础示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_gl/UE4%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8F%8A%E6%B5%8B%E8%AF%95demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UE4下载安装及测试demo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Shell脚本与自动化
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Shell脚本与自动化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shell_python/Python%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python环境安装与基础示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shell_python/tmux%E7%BB%88%E7%AB%AF%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tmux终端容器使用示例
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ros_1" class="md-nav__link">
    <span class="md-ellipsis">
      ROS学习入门
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ROS学习入门">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ros_2" class="md-nav__link">
    <span class="md-ellipsis">
      一、ROS介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_3" class="md-nav__link">
    <span class="md-ellipsis">
      二、ROS环境搭建
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_4" class="md-nav__link">
    <span class="md-ellipsis">
      三、第一个ROS案例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、第一个ROS案例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      测试案例——小海龟
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      编译案例——空程序包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      创建案例——新程序包
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_5" class="md-nav__link">
    <span class="md-ellipsis">
      四、ROS文件系统
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、ROS文件系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      文件系统概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      文件系统工具
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      rosbag数据录制与回放
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_6" class="md-nav__link">
    <span class="md-ellipsis">
      五、ROS消息机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、ROS消息机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      计算图概念：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      节点概念：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      客户端库概念：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      节点详解：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roscore" class="md-nav__link">
    <span class="md-ellipsis">
      ### roscore：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosnode" class="md-nav__link">
    <span class="md-ellipsis">
      ### rosnode：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosrun" class="md-nav__link">
    <span class="md-ellipsis">
      ### rosrun：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      话题详解：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topics" class="md-nav__link">
    <span class="md-ellipsis">
      ### Topics：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rqt_graph" class="md-nav__link">
    <span class="md-ellipsis">
      ### rqt_graph：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rostopic" class="md-nav__link">
    <span class="md-ellipsis">
      ### rostopic：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rqt_plot" class="md-nav__link">
    <span class="md-ellipsis">
      ### rqt_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      服务详解：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosservice" class="md-nav__link">
    <span class="md-ellipsis">
      ### rosservice
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosparam" class="md-nav__link">
    <span class="md-ellipsis">
      ### rosparam
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roslaunch" class="md-nav__link">
    <span class="md-ellipsis">
      roslaunch多节点启动
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      六、话题与服务机制实现
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、话题与服务机制实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rosros" class="md-nav__link">
    <span class="md-ellipsis">
      创建ROS消息和ROS服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msgsrv" class="md-nav__link">
    <span class="md-ellipsis">
      ### 消息(msg)和服务(srv)介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msg" class="md-nav__link">
    <span class="md-ellipsis">
      ### 创建一个 msg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosmsg" class="md-nav__link">
    <span class="md-ellipsis">
      ### 使用 rosmsg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#srv" class="md-nav__link">
    <span class="md-ellipsis">
      ### 创建一个srv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rossrv" class="md-nav__link">
    <span class="md-ellipsis">
      ### 使用 rossrv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    <span class="md-ellipsis">
      C++编写简单的消息发布器和订阅器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      ### 发布器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      ### 订阅器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      ### 编译节点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      Python编写简单的消息发布器和订阅器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      ### 发布器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      ### 订阅器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      ### 编译节点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cserviceclient" class="md-nav__link">
    <span class="md-ellipsis">
      C++编写简单的Service和Client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      ### 服务端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      ### 客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      ### 编译节点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pythonserviceclient" class="md-nav__link">
    <span class="md-ellipsis">
      Python编写简单的Service和Client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      ### 服务端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      ### 客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      ### 编译节点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_7" class="md-nav__link">
    <span class="md-ellipsis">
      七、ROS常用工具
    </span>
  </a>
  
    <nav class="md-nav" aria-label="七、ROS常用工具">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rqt" class="md-nav__link">
    <span class="md-ellipsis">
      rqt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rviz" class="md-nav__link">
    <span class="md-ellipsis">
      rviz
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_8" class="md-nav__link">
    <span class="md-ellipsis">
      八、ROS入门总结
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、ROS入门总结">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      接下来做什么？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ros_9" class="md-nav__link">
    <span class="md-ellipsis">
      ROS进阶探索
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ROS进阶探索">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ros_10" class="md-nav__link">
    <span class="md-ellipsis">
      一、ROS简介
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、ROS简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ros_11" class="md-nav__link">
    <span class="md-ellipsis">
      ROS设计目标
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_12" class="md-nav__link">
    <span class="md-ellipsis">
      ROS特点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smart_car" class="md-nav__link">
    <span class="md-ellipsis">
      二、创建一个smart_car
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、创建一个smart_car">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1smartcar" class="md-nav__link">
    <span class="md-ellipsis">
      1.创建简单的smartcar模型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2smartcar" class="md-nav__link">
    <span class="md-ellipsis">
      2.使用smartcar进行仿真
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3.键盘控制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4.操纵杆控制
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action" class="md-nav__link">
    <span class="md-ellipsis">
      三、action通讯机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、action通讯机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#action_1" class="md-nav__link">
    <span class="md-ellipsis">
      什么是action
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action_2" class="md-nav__link">
    <span class="md-ellipsis">
      action的工作机制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action_3" class="md-nav__link">
    <span class="md-ellipsis">
      action的定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      例程运行
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_tf" class="md-nav__link">
    <span class="md-ellipsis">
      四、ros_tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosnavigation" class="md-nav__link">
    <span class="md-ellipsis">
      五、ros与navigation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、ros与navigation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slam" class="md-nav__link">
    <span class="md-ellipsis">
      SLAM定位与建图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosteb" class="md-nav__link">
    <span class="md-ellipsis">
      六、ros与TEB轨迹规划
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、ros与TEB轨迹规划">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teb" class="md-nav__link">
    <span class="md-ellipsis">
      TEB优化测试
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teb_1" class="md-nav__link">
    <span class="md-ellipsis">
      TEB优化反馈
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rosbridge_suite" class="md-nav__link">
    <span class="md-ellipsis">
      七、rosbridge_suite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros_13" class="md-nav__link">
    <span class="md-ellipsis">
      八、ROS产品化探索
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、ROS产品化探索">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      通信机制篇
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/frankwang98/wiki/edit/master/docs/cpp_ros/ROS学习入门.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="ros">ROS机器人操作系统集成</h1>
<h2 id="ros_1">ROS学习入门</h2>
<h3 id="ros_2">一、ROS介绍</h3>
<p>ros是机器人操作系统（Robot Operating System）的英文缩写。ROS是用于编写机器人软件程序的一种具有高度灵活性的软件架构。ROS的原型源自斯坦福大学的Stanford Artificial Intelligence Robot (STAIR) 和 Personal Robotics (PR)项目。</p>
<p>ROS的4大优势：</p>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">通道</span><span class="err">：</span><span class="n">ROS提供了一种发布</span><span class="o">-</span><span class="n">订阅式的通信框架用以简单</span><span class="err">、</span><span class="n">快速地构建分布式计算系</span><span class="err">。——</span><span class="n">计算图级</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">工具</span><span class="err">：</span><span class="n">ROS提供了大量的工具组合用以配置</span><span class="err">、</span><span class="n">启动</span><span class="err">、</span><span class="n">自检</span><span class="err">、</span><span class="n">调试</span><span class="err">、</span><span class="n">可视化</span><span class="err">、</span><span class="n">登录</span><span class="err">、</span><span class="n">测试</span><span class="err">、</span><span class="n">终止分布式计算系统</span><span class="err">。</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">强大的库</span><span class="err">：</span><span class="n">ROS提供了广泛的库文件实现以机动性</span><span class="err">、</span><span class="n">操作控制</span><span class="err">、</span><span class="n">感知为主的机器人功能</span><span class="err">。</span>
<span class="mf">4.</span><span class="w"> </span><span class="n">生态系统</span><span class="err">：</span><span class="n">ROS的支持与发展依托着一个强大的社区</span><span class="err">。</span><span class="n">ros</span><span class="mf">.</span><span class="ow">or</span><span class="n">g尤其关注兼容性和支持文档</span><span class="err">，</span><span class="n">提供了一套</span><span class="err">“</span><span class="n">一站式</span><span class="err">”</span><span class="n">的方案使得用户得以搜索并学习来自全球开发者数以千计的ROS程序包</span><span class="err">。——</span><span class="n">社区级</span>
<span class="n">另外</span><span class="err">，</span><span class="n">在ROS三个级中还有一个文件系统级</span><span class="err">，</span><span class="n">后面会有介绍</span><span class="err">。</span>
</code></pre></div>

<p>主要功能：</p>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">ROS提供一些标准操作系统服务</span><span class="err">，</span><span class="n">例如硬件抽象</span><span class="err">，</span><span class="n">底层设备控制</span><span class="err">，</span><span class="n">常用功能实现</span><span class="err">，</span><span class="n">进程间消息以及数据包管理</span><span class="err">。</span><span class="n">ROS是基于一种图状架构</span><span class="err">，</span><span class="n">从而不同节点的进程能接受</span><span class="err">，</span><span class="n">发布</span><span class="err">，</span><span class="n">聚合各种信息</span><span class="err">（</span><span class="n">例如传感</span><span class="err">，</span><span class="n">控制</span><span class="err">，</span><span class="n">状态</span><span class="err">，</span><span class="n">规划等等</span><span class="err">）。</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">ROS可以分成两层</span><span class="err">，</span><span class="n">低层是上面描述的操作系统层</span><span class="err">，</span><span class="n">高层则是广大用户群贡献的实现不同功能的各种软件包</span><span class="err">，</span><span class="n">例如定位绘图</span><span class="err">，</span><span class="n">行动规划</span><span class="err">，</span><span class="n">感知</span><span class="err">，</span><span class="n">模拟等等</span><span class="err">。</span>
</code></pre></div>

<h3 id="ros_3">二、ROS环境搭建</h3>
<p>推荐使用“鱼香ROS”大佬的一键安装命令：<code>wget http://fishros.com/install -O fishros &amp;&amp; . fishros</code></p>
<p>我自己安装的记录：<a href="https://blog.csdn.net/qq_40344790/article/details/118151162">原文链接</a></p>
<p>安装好后，可通过<code>roscore</code>命令进行主节点测试，将出现以下信息：</p>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="p">..</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="p">.</span><span class="n">ros</span><span class="o">/</span><span class="nf">log</span><span class="o">/</span><span class="n">cb38e680</span><span class="o">-</span><span class="n">dee2</span><span class="o">-</span><span class="mi">11</span><span class="n">ea</span><span class="o">-</span><span class="n">bae1</span><span class="o">-</span><span class="mf">70665563e003</span><span class="o">/</span><span class="n">roslaunch</span><span class="o">-</span><span class="n">nx</span><span class="o">-</span><span class="mf">1205.</span><span class="nf">log</span>
<span class="n">Checking</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">disk</span><span class="w"> </span><span class="k">usage</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">while</span><span class="p">.</span>
<span class="n">Press</span><span class="w"> </span><span class="n">Ctrl</span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">interrupt</span>
<span class="n">Done</span><span class="w"> </span><span class="n">checking</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">disk</span><span class="w"> </span><span class="k">usage</span><span class="p">.</span><span class="w"> </span><span class="k">Usage</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">1</span><span class="n">GB</span><span class="p">.</span>

<span class="n">started</span><span class="w"> </span><span class="n">roslaunch</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="nl">nx</span><span class="p">:</span><span class="mi">36773</span><span class="o">/</span>
<span class="n">ros_comm</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mf">1.14.7</span>


<span class="n">SUMMARY</span>
<span class="o">========</span>

<span class="k">PARAMETERS</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="nl">rosdistro</span><span class="p">:</span><span class="w"> </span><span class="n">melodic</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="nl">rosversion</span><span class="p">:</span><span class="w"> </span><span class="mf">1.14.7</span>

<span class="n">NODES</span>

<span class="n">auto</span><span class="o">-</span><span class="n">starting</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">master</span>
<span class="n">process</span><span class="o">[</span><span class="n">master</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">pid</span><span class="w"> </span><span class="o">[</span><span class="n">1215</span><span class="o">]</span>
<span class="n">ROS_MASTER_URI</span><span class="o">=</span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="nl">nx</span><span class="p">:</span><span class="mi">11311</span><span class="o">/</span>

<span class="n">setting</span><span class="w"> </span><span class="o">/</span><span class="n">run_id</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">cb38e680</span><span class="o">-</span><span class="n">dee2</span><span class="o">-</span><span class="mi">11</span><span class="n">ea</span><span class="o">-</span><span class="n">bae1</span><span class="o">-</span><span class="mf">70665563e003</span>
<span class="n">process</span><span class="o">[</span><span class="n">rosout-1</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">pid</span><span class="w"> </span><span class="o">[</span><span class="n">1228</span><span class="o">]</span>
<span class="n">started</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="o">[</span><span class="n">/rosout</span><span class="o">]</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="nt">关于安装ros及rosdep</span><span class="w"> </span><span class="nt">update更新问题</span><span class="err">：</span>
<span class="nt">1</span><span class="p">.</span><span class="nc">目前安装ros基本上是将github的rosdistro转移到gitee实现国内正常安装</span><span class="err">（</span><span class="nt">用上面的一键安装脚本即可</span><span class="err">），</span><span class="nt">但安装之后rosdep还是不可用的</span><span class="err">，</span><span class="nt">对于后面的如导航需要安装的依赖包会有影响</span><span class="err">；</span>
<span class="nt">2</span><span class="p">.</span><span class="nc">目前解决rosdep</span><span class="w"> </span><span class="nt">update更新问题主要是通过增加代理访问github实现的</span><span class="err">，</span><span class="nt">具体实现这里推荐</span><span class="s2">&quot;ncnynl&quot;</span><span class="nt">大佬的一键工具</span><span class="err">。</span>

<span class="nt">具体实现</span><span class="err">：</span>
<span class="nt">下载脚本</span><span class="err">：</span><span class="nt">wget</span><span class="w"> </span><span class="nt">https</span><span class="o">://</span><span class="nt">gitee</span><span class="p">.</span><span class="nc">com</span><span class="o">/</span><span class="nt">ncnynl</span><span class="o">/</span><span class="nt">rosdep</span><span class="o">/</span><span class="nt">raw</span><span class="o">/</span><span class="nt">master</span><span class="o">/</span><span class="nt">rosdep_update</span><span class="p">.</span><span class="nc">sh</span><span class="w"> </span><span class="o">;</span><span class="w">         </span>
<span class="nt">管理员给执行权限</span><span class="err">：</span><span class="nt">sudo</span><span class="w"> </span><span class="nt">chmod</span><span class="w"> </span><span class="o">+</span><span class="nt">x</span><span class="w"> </span><span class="o">./</span><span class="nt">rosdep_update</span><span class="p">.</span><span class="nc">sh</span><span class="o">;</span><span class="w">  </span>
<span class="nt">管理员运行脚本</span><span class="err">：</span><span class="nt">sudo</span><span class="w"> </span><span class="o">./</span><span class="nt">rosdep_update</span><span class="p">.</span><span class="nc">sh</span><span class="w"> </span>
<span class="nt">出现这一行</span><span class="err">，</span><span class="nt">代表成功</span><span class="err">：`</span><span class="nt">all</span><span class="w"> </span><span class="nt">files</span><span class="w"> </span><span class="nt">replaced</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">finished</span><span class="o">,</span><span class="w"> </span><span class="nt">please</span><span class="w"> </span><span class="nt">continues</span><span class="w"> </span><span class="nt">run</span><span class="w"> </span><span class="nt">rosdecp</span><span class="w"> </span><span class="nt">update</span><span class="err">`</span><span class="w">    </span>
<span class="nt">然后执行</span><span class="err">：`</span><span class="nt">sudo</span><span class="w"> </span><span class="nt">rosdep</span><span class="w"> </span><span class="nt">init</span><span class="err">`</span><span class="w"> </span><span class="nt">和</span><span class="w"> </span><span class="err">`</span><span class="nt">rosdep</span><span class="w"> </span><span class="nt">update</span><span class="err">`</span><span class="nt">即可</span><span class="err">。</span>
</code></pre></div>

<h3 id="ros_4">三、第一个ROS案例</h3>
<h6 id="_1">测试案例——小海龟</h6>
<p>第一个终端：<code>roscore</code></p>
<p>第二个终端：<code>rosrun turtlesim turtlesim_node</code></p>
<p>第三个终端：<code>rosrun turtlesim turtle_teleop_key</code></p>
<p>启动完成后，将鼠标放在第三个终端上，就可以键盘控制第二个终端启动的小海龟移动了！</p>
<h6 id="_2">编译案例——空程序包</h6>
<p>创建工作空间：<code>mkdir catkin_ws &amp;&amp; cd catkin_ws</code></p>
<p>创建源文件目录：<code>mkdir src</code></p>
<p>catkin编译：<code>catkin_make</code></p>
<p>最终文件列表：<code>tree</code></p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span>
<span class="err">├──</span><span class="w"> </span><span class="kr">build</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">atomic_configure</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bin</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">catkin</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">catkin_generated</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">CATKIN_IGNORE</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">catkin_make</span><span class="p">.</span><span class="n">cache</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">CMakeCache</span><span class="p">.</span><span class="n">txt</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">CMakeFiles</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cmake_install</span><span class="p">.</span><span class="n">cmake</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">CTestConfiguration</span><span class="p">.</span><span class="n">ini</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">CTestCustom</span><span class="p">.</span><span class="n">cmake</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">CTestTestfile</span><span class="p">.</span><span class="n">cmake</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">gtest</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">Makefile</span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">test_results</span>
<span class="err">├──</span><span class="w"> </span><span class="n">devel</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cmake</span><span class="p">.</span><span class="n">lock</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="n">sh</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">lib</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">local_setup</span><span class="p">.</span><span class="n">bash</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">local_setup</span><span class="p">.</span><span class="n">sh</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">local_setup</span><span class="p">.</span><span class="n">zsh</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="n">bash</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="n">sh</span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">_setup_util</span><span class="p">.</span><span class="n">py</span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="n">zsh</span>
<span class="err">└──</span><span class="w"> </span><span class="n">src</span>
<span class="w">    </span><span class="err">└──</span><span class="w"> </span><span class="n">CMakeLists</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="kr">opt</span><span class="o">/</span><span class="n">ros</span><span class="o">/</span><span class="n">noetic</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">catkin</span><span class="o">/</span><span class="n">cmake</span><span class="o">/</span><span class="n">toplevel</span><span class="p">.</span><span class="n">cmake</span>

<span class="mi">11</span><span class="w"> </span><span class="n">directories</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="n">files</span>
</code></pre></div>

<h6 id="_3">创建案例——新程序包</h6>
<p>首先切换到catkin工作空间中的src目录下：<code>cd ~/catkin_ws/src</code></p>
<p>使用catkin_create_pkg命令来创建一个名为&rsquo;beginner_tutorials&rsquo;的新程序包。    <br />
这个程序包依赖于std_msgs、roscpp和rospy：<br />
<code>catkin_create_pkg beginner_tutorials std_msgs rospy roscpp</code></p>
<p>这个文件夹里面包含一个package.xml文件（可查看程序依赖的包）和一个CMakeLists.txt文件。</p>
<p><code>catkin_make</code>编译通过。</p>
<h3 id="ros_5">四、ROS文件系统</h3>
<h6 id="_4">文件系统概念</h6>
<p>1.Packages: 软件包，是ROS应用程序代码的组织单元，每个软件包都可以包含程序库、可执行文件、脚本或者其它手动创建的东西。</p>
<p>2.Manifest (package.xml): 清单，是对于&rsquo;软件包&rsquo;相关信息的描述,用于定义软件包相关元信息之间的依赖关系，这些信息包括版本、维护者和许可协议等。</p>
<h6 id="_5">文件系统工具</h6>
<div class="codehilite"><pre><span></span><code><span class="n">rospack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ros</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pack</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="w"> </span>
<span class="n">rospack</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="o">[</span><span class="n">package_name</span><span class="o">]</span>

<span class="n">roscd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ros</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span>
<span class="n">roscd</span><span class="w"> </span><span class="o">[</span><span class="n">package_name</span><span class="o">]</span>

<span class="n">rosls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ros</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span>
<span class="n">rosls</span><span class="w"> </span><span class="o">[</span><span class="n">package_name</span><span class="o">]</span>
</code></pre></div>

<h6 id="rosbag">rosbag数据录制与回放</h6>
<p>值得一提的是rosbag工具的使用。</p>
<div class="codehilite"><pre><span></span><code>rosbag record -a
rosbag info &lt;your bagfile&gt;
rosbag play (-r 2/-l) &lt;your bagfile&gt;
</code></pre></div>

<h3 id="ros_6">五、ROS消息机制</h3>
<p>通过ROS计算图来学习ROS的消息通信机制。</p>
<h6 id="_6">计算图概念：</h6>
<div class="codehilite"><pre><span></span><code><span class="n">Nodes</span><span class="o">:</span><span class="err">节点</span><span class="o">,</span><span class="err">一个节点即为一个可执行文件，它可以通过</span><span class="n">ROS与其它节点进行通信</span><span class="err">。</span>
<span class="n">Messages</span><span class="o">:</span><span class="err">消息，消息是一种</span><span class="n">ROS数据类型</span><span class="err">，用于订阅或发布到一个话题。</span>
<span class="n">Topics</span><span class="o">:</span><span class="err">话题</span><span class="o">,</span><span class="err">节点可以发布消息到话题，也可以订阅话题以接收消息。</span>
<span class="n">Master</span><span class="o">:</span><span class="err">节点管理器，</span><span class="n">ROS名称服务</span><span class="w"> </span><span class="o">(</span><span class="err">比如帮助节点找到彼此</span><span class="o">)</span><span class="err">。</span>
<span class="n">rosout</span><span class="o">:</span><span class="w"> </span><span class="n">ROS中相当于stdout</span><span class="o">/</span><span class="n">stderr</span><span class="err">。</span>
<span class="n">roscore</span><span class="o">:</span><span class="w"> </span><span class="err">主机</span><span class="o">+</span><span class="w"> </span><span class="n">rosout</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">参数服务器</span><span class="w"> </span><span class="o">(</span><span class="err">参数服务器会在后面介绍</span><span class="o">)</span><span class="err">。</span>
</code></pre></div>

<h6 id="_7">节点概念：</h6>
<div class="codehilite"><pre><span></span><code>一个节点其实只不过是ROS程序包中的一个可执行文件。
ROS节点可以使用ROS客户库与其他节点通信。
节点可以发布或接收一个话题。
节点也可以提供或使用某种服务。
</code></pre></div>

<h6 id="_8">客户端库概念：</h6>
<p>ROS客户端库允许使用不同编程语言编写的节点之间互相通信:</p>
<div class="codehilite"><pre><span></span><code>rospy = python 客户端库
roscpp = c++ 客户端库
rosjs = javascripts客户端库
rosjava = java客户端库
</code></pre></div>

<h6 id="_9">节点详解：</h6>
<h6 id="roscore">### roscore：</h6>
<p>roscore是你在运行所有ROS程序前首先要运行的命令。     <br />
如果roscore运行后无法正常初始化，很有可能是存在网络配置问题。</p>
<h6 id="rosnode">### rosnode：</h6>
<div class="codehilite"><pre><span></span><code>打开一个新的终端, 可以使用 rosnode 像运行roscore一样看看在运行什么...
注意: 当打开一个新的终端时，你的运行环境会复位，同时你的~/.bashrc文件会复原。
如果你在运行类似于rosnode的指令时出现一些问题，
也许你需要添加一些环境设置文件到你的~/.bashrc或者手动重新配置他们。
rosnode显示当前运行的ROS节点信息。
rosnode list指令列出活跃的节点:`rosnode list`
rosnode info命令返回的是关于一个特定节点的信息:`rosnode info /rosout`
</code></pre></div>

<p>下面，让我们看看更多的节点，为此，我们将使用rosrun弹出另一个节点。</p>
<h6 id="rosrun">### rosrun：</h6>
<p>rosrun允许你使用包名直接运行一个包内的节点(而不需要知道这个包的路径)。   <br />
用法：<code>rosrun [package_name] [node_name]</code></p>
<p>还是以前面小海龟的例子来说：<code>rosrun turtlesim turtlesim_node</code>   <br />
现在我们调用<code>rosnode list</code>，会看到多了一个<code>/turtlesim</code>节点。</p>
<p>此外，rosrun执行节点时，还可以通过命令行重新配置名称，如下：
<code>rosrun turtlesim turtlesim_node __name:=my_turtle</code>   <br />
现在我们重新调用<code>rosnode list</code>，会看到节点名称变为<code>/my_turtle</code>。     <br />
另外还可以通过<code>rosnode ping /my_turtle</code>来测试节点的通讯情况。</p>
<h6 id="_10">话题详解：</h6>
<p>以小海龟为例来看其中的话题通讯机制。</p>
<h6 id="topics">### Topics：</h6>
<div class="codehilite"><pre><span></span><code>turtlesim_node节点和turtle_teleop_key节点之间是通过一个ROS话题来互相通信的。
turtle_teleop_key在一个话题上发布按键输入消息，而turtlesim则订阅该话题以接收该消息。
</code></pre></div>

<h6 id="rqt_graph">### rqt_graph：</h6>
<div class="codehilite"><pre><span></span><code>rqt_graph能够创建一个显示当前系统运行情况的动态图形。
rqt_graph是rqt程序包中的一部分。
</code></pre></div>

<p>下面让我们使用rqt_graph来显示当前运行的节点和话题。    <br />
可以运行<code>rosrun rqt_graph rqt_graph</code>，也可以直接输入<code>rqt_graph</code>打开。</p>
<p>会出现这个图形：  <br />
<img alt="rosgraph" src="../picture/rosgraph.png" /></p>
<p>表明两个节点之间正通过一个ROS话题来通讯。</p>
<h6 id="rostopic">### rostopic：</h6>
<p>ros提供的rostopic命令工具能让你获取有关ROS话题的信息。</p>
<div class="codehilite"><pre><span></span><code><span class="n">rostopic</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="o">[</span><span class="n">topic</span><span class="o">]</span><span class="w"> </span><span class="n">可以显示在某个话题上发布的数据</span>
<span class="n">rostopic</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">能够列出所有当前订阅和发布的话题</span><span class="err">，</span><span class="o">-</span><span class="n">v可以列出详细信息</span>
<span class="n">rostopic</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">[</span><span class="n">topic</span><span class="o">]</span><span class="w"> </span><span class="n">命令用来查看所发布话题的消息类型</span>
</code></pre></div>

<p>ROS Messages</p>
<div class="codehilite"><pre><span></span><code><span class="n">话题之间的通信是通过在节点之间发送ROS消息实现的</span><span class="err">。</span>
<span class="n">对于发布器</span><span class="p">(</span><span class="n">turtle_teleop_key和订阅器</span><span class="p">(</span><span class="n">turtulesim_node</span><span class="p">)</span><span class="n">之间的通信</span><span class="err">，</span><span class="n">发布器和订阅器之间必须发送和接收相同类型的消息</span><span class="err">。</span>
<span class="n">这意味着话题的类型是由发布在它上面的消息类型决定的</span><span class="err">。</span>
<span class="n">使用rostopic</span><span class="w"> </span><span class="n">type命令可以查看发布在某个话题上的消息类型</span><span class="err">。</span>
<span class="n">使用rosmsg</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="o">[</span><span class="n">topic</span><span class="o">]</span><span class="n">命令可以查看消息的详细情况</span><span class="err">。</span>
</code></pre></div>

<p>例如通过<code>rosmsg show geometry_msgs/Twist</code>来查看小海龟运动的消息，显示：</p>
<div class="codehilite"><pre><span></span><code>geometry_msgs/Vector3 linear
  float64 x
  float64 y
  float64 z
geometry_msgs/Vector3 angular
  float64 x
  float64 y
  float64 z
</code></pre></div>

<p>现在我们已经知道了turtlesim节点所期望的消息类型，接下来我们就可以给turtle发布命令了。</p>
<p>我们已经了解了什么是ROS的消息，接下来我们开始结合消息来使用rostopic。</p>
<div class="codehilite"><pre><span></span><code><span class="n">rostopic</span><span class="w"> </span><span class="n">pub</span><span class="w"> </span><span class="o">[</span><span class="n">topic</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">msg_type</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">args</span><span class="o">]</span><span class="w"> </span><span class="n">可以把数据发布到当前某个正在广播的话题上</span>
<span class="n">如</span><span class="err">：`</span><span class="n">rostopic</span><span class="w"> </span><span class="n">pub</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="n">turtle1</span><span class="o">/</span><span class="n">cmd_vel</span><span class="w"> </span><span class="n">geometry_msgs</span><span class="o">/</span><span class="n">Twist</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="s1">&#39;[2.0, 0.0, 0.0]&#39;</span><span class="w"> </span><span class="s1">&#39;[0.0, 0.0, 1.8]&#39;</span><span class="err">`</span>
<span class="n">以上命令会发送一条消息给turtlesim</span><span class="err">，</span><span class="n">告诉它以2</span><span class="mf">.0</span><span class="n">大小的线速度和1</span><span class="mf">.8</span><span class="n">大小的角速度开始移动</span><span class="err">。</span>
<span class="n">但上面的命令只会让小海龟移动一次</span><span class="err">，</span><span class="n">如果想让小海龟保持运动</span><span class="err">，</span><span class="n">可以使用rostopic</span><span class="w"> </span><span class="n">pub</span><span class="w"> </span><span class="o">-</span><span class="n">r命令来发布一个稳定的命令流</span><span class="err">，</span>
<span class="n">发布一个频率为1Hz的命令流</span><span class="err">：`</span><span class="n">rostopic</span><span class="w"> </span><span class="n">pub</span><span class="w"> </span><span class="o">/</span><span class="n">turtle1</span><span class="o">/</span><span class="n">cmd_vel</span><span class="w"> </span><span class="n">geometry_msgs</span><span class="o">/</span><span class="n">Twist</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">-- &#39;[2.0, 0.0, 0.0]&#39; &#39;[0.0, 0.0, 1.8]&#39;`</span>
</code></pre></div>

<h6 id="rqt_plot">### rqt_plot</h6>
<p>rqt_plot命令可以实时显示一个发布到某个话题上的数据变化图形。</p>
<p>这里我们将使用rqt_plot命令来绘制正在发布到/turtle1/pose话题上的数据变化图形。</p>
<p>可以通过命令<code>rosrun rqt_plot rqt_plot</code>启动或直接输入<code>rqt_plot</code></p>
<p>这会弹出一个新窗口，在窗口左上角的一个文本框里面你可以添加需要绘制的话题。     <br />
在里面输入/turtle1/pose/y后之前处于禁用状态的加号按钮将会被使能变亮。
<img alt="rqtplot" src="../picture/rqtplot.png" />    <br />
可以通过+-号来增加或删除话题。</p>
<h6 id="_11">服务详解：</h6>
<div class="codehilite"><pre><span></span><code>服务（services）是节点之间通讯的另一种方式。
服务允许节点发送请求（request） 并获得一个响应（response），也就是请求-回应式的通讯机制。
</code></pre></div>

<h6 id="rosservice">### rosservice</h6>
<p>rosservice可以很轻松的使用 ROS 客户端/服务器框架提供的服务。</p>
<div class="codehilite"><pre><span></span><code><span class="nx">rosservice</span><span class="w"> </span><span class="nx">list</span><span class="w">         </span><span class="nx">输出可用服务的信息</span>
<span class="nx">rosservice</span><span class="w"> </span><span class="nx">call</span><span class="w">         </span><span class="nx">调用带参数的服务</span>
<span class="nx">rosservice</span><span class="w"> </span><span class="k">type</span><span class="w">         </span><span class="nx">输出服务类型</span>
<span class="nx">rosservice</span><span class="w"> </span><span class="nx">find</span><span class="w">         </span><span class="nx">依据类型寻找服务find</span><span class="w"> </span><span class="nx">services</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">service</span><span class="w"> </span><span class="k">type</span>
<span class="nx">rosservice</span><span class="w"> </span><span class="nx">uri</span><span class="w">          </span><span class="nx">输出服务的ROSRPC</span><span class="w"> </span><span class="nx">uri</span>
</code></pre></div>

<p>还是以小海龟为例，输入<code>rosservice list</code>会显示：</p>
<div class="codehilite"><pre><span></span><code>/clear(清除)
/kill(终止)
/my_turtle/get_loggers
/my_turtle/set_logger_level
/reset(重置)
/rosout/get_loggers(rosout)
/rosout/set_logger_level(rosout)
/spawn(再生)
/teleop_turtle/get_loggers
/teleop_turtle/set_logger_level
/turtle1/set_pen
/turtle1/teleport_absolute
/turtle1/teleport_relative
</code></pre></div>

<p>使用rosservice type [service]命令更进一步查看clear服务，如<code>rosservice type clear</code>，会显示：
<code>std_srvs/Empty</code>  <br />
服务的类型为空（empty),这表明在调用这个服务是不需要参数（比如，请求不需要发送数据，响应也没有数据）。</p>
<p>因为服务类型为空，通过rosservice call [service] [args]命令调用无参数服务：
<code>rosservice call clear</code>   <br />
小海龟的历史轨迹会被清除。</p>
<p>通过查看再生（spawn）服务的信息，我们来了解带参数的服务:
输入<code>rosservice type spawn | rossrv show</code>后会显示：</p>
<div class="codehilite"><pre><span></span><code>float32 x
float32 y
float32 theta
string name
---
string name
</code></pre></div>

<p>这个服务使得我们可以在给定的位置和角度生成一只新的乌龟。  <br />
名字参数是可选的，这里我们不设具体的名字，让turtlesim自动创建一个。<br />
执行命令：<code>rosservice call spawn 2 2 0.2 ""</code>   <br />
服务会返回新产生的乌龟的名字： name: turtle2，这就是再生（spawn）。</p>
<p>顺着这个思路，大家可以去试试<code>/reset(重置)</code>这个服务的用法。</p>
<h6 id="rosparam">### rosparam</h6>
<p>rosparam使得我们能够存储并操作ROS参数服务器（Parameter Server）上的数据。</p>
<p>参数服务器能够存储整型、浮点、布尔、字符串、字典和列表等数据类型。
rosparam使用YAML标记语言的语法。<br />
一般而言，YAML的表述很自然：</p>
<div class="codehilite"><pre><span></span><code><span class="mf">1</span><span class="n">是整型</span>
<span class="mf">1.0</span><span class="n">是浮点型</span>
<span class="kr">on</span><span class="n">e是字符串</span>
<span class="n">true是布尔</span>
<span class="err">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="err">]</span><span class="n">是整型列表</span>
<span class="err">{</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">:</span><span class="n">d</span><span class="err">}</span><span class="n">是字典</span>
</code></pre></div>

<p>rosparam的指令有以下：</p>
<div class="codehilite"><pre><span></span><code><span class="n">rosparam</span><span class="w"> </span><span class="n">set</span><span class="w">            </span><span class="err">设置参数</span>
<span class="n">rosparam</span><span class="w"> </span><span class="n">get</span><span class="w">            </span><span class="err">获取参数</span>
<span class="n">rosparam</span><span class="w"> </span><span class="nb">load</span><span class="w">           </span><span class="err">从文件读取参数</span>
<span class="n">rosparam</span><span class="w"> </span><span class="n">dump</span><span class="w">           </span><span class="err">向文件中写入参数</span>
<span class="n">rosparam</span><span class="w"> </span><span class="n">delete</span><span class="w">         </span><span class="err">删除参数</span>
<span class="n">rosparam</span><span class="w"> </span><span class="n">list</span><span class="w">           </span><span class="err">列出参数名</span>
</code></pre></div>

<p>以小海龟为例，我们来看看现在参数服务器上都有哪些参数，执行<code>rosparam list</code>会显示：</p>
<div class="codehilite"><pre><span></span><code>/my_turtle/background_b
/my_turtle/background_g
/my_turtle/background_r(背景色)
/rosdistro
/roslaunch/uris/host_wangzf_lenovo__45571
/rosversion
/run_id
</code></pre></div>

<p>改变参数值使用rosparam set [param_name]，获取参数值使用rosparam get [param_name]</p>
<p>现在我们修改背景颜色的红色通道：<code>rosparam set /my_turtle/background_r 150</code></p>
<p>上述指令修改了参数的值，现在我们调用清除服务(clear)使得修改后的参数生效：<code>rosservice call clear</code></p>
<p>可以使用rosparam get来显示参数服务器上的所有内容：<code>rosparam get /</code></p>
<p>也可以存储这些当前参数以备使用，使用方法如下：</p>
<div class="codehilite"><pre><span></span><code><span class="n">rosparam</span><span class="w"> </span><span class="k">dump</span><span class="w"> </span><span class="o">[</span><span class="n">file_name</span><span class="o">]</span>
<span class="n">rosparam</span><span class="w"> </span><span class="k">load</span><span class="w"> </span><span class="o">[</span><span class="n">file_name</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">namespace</span><span class="o">]</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">可以载入新的命名空间</span>
</code></pre></div>

<h6 id="roslaunch">roslaunch多节点启动</h6>
<p>在说roslaunch之前，提一下ros中有自带的调试工具：<code>rqt_console和rqt_logger_level</code>，属于ROS日志框架(logging framework)的一部分，用来显示节点的输出信息和修改日志级别（前面也看到过），如果有需要可以自己去调试用，这里不赘述。</p>
<p>可以通过下面命令启动：</p>
<div class="codehilite"><pre><span></span><code>rosrun rqt_console rqt_console
rosrun rqt_logger_level rqt_logger_level
</code></pre></div>

<p>主要说一下roslaunch的使用：</p>
<p>roslaunch [package] [filename.launch]可以用来启动定义在launch文件中的多个节点。</p>
<p>先切换到beginner_tutorials程序包目录下：<code>roscd beginner_tutorials</code></p>
<p>然后创建一个launch文件夹：<code>mkdir launch &amp;&amp; cd launch</code></p>
<p>现在我们来创建一个名为turtle_test.launch的launch文件并复制粘贴以下内容到该文件里面：</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;launch&gt;</span>

<span class="w">   </span><span class="nt">&lt;group</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;turtlesim1&quot;</span><span class="nt">&gt;</span>
<span class="w">     </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sim&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;turtlesim_node&quot;</span><span class="nt">/&gt;</span>
<span class="w">   </span><span class="nt">&lt;/group&gt;</span>

<span class="w">   </span><span class="nt">&lt;group</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;turtlesim2&quot;</span><span class="nt">&gt;</span>
<span class="w">     </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sim&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;turtlesim_node&quot;</span><span class="nt">/&gt;</span>
<span class="w">   </span><span class="nt">&lt;/group&gt;</span>

<span class="w">   </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mimic&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;mimic&quot;</span><span class="nt">&gt;</span>
<span class="w">     </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;turtlesim1/turtle1&quot;</span><span class="nt">/&gt;</span>
<span class="w">     </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;output&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;turtlesim2/turtle1&quot;</span><span class="nt">/&gt;</span>
<span class="w">   </span><span class="nt">&lt;/node&gt;</span>

<span class="nt">&lt;/launch&gt;</span>
</code></pre></div>

<p>launch文件创建完成后，就通过roslaunch命令来启动launch文件：<code>roslaunch beginner_tutorials turtle_test.launch</code></p>
<p>将会有两个turtlesims被启动，然后我们在一个新终端中使用rostopic命令发送速度设定消息：<code>rostopic pub /turtlesim1/turtle1/cmd_vel geometry_msgs/Twist -r 1 -- '[2.0, 0.0, 0.0]' '[0.0, 0.0, -1.8]'</code></p>
<p>你会看到两个turtlesims会同时开始移动，虽然发布命令只是给turtlesim1发送了速度设定消息。</p>
<p>也可以通过rqt_graph来更好的理解在launch文件中所做的事情（节点和话题）。</p>
<h3 id="_12">六、话题与服务机制实现</h3>
<h6 id="rosros">创建ROS消息和ROS服务</h6>
<h6 id="msgsrv">### 消息(msg)和服务(srv)介绍</h6>
<p>消息(msg): msg文件就是一个描述ROS中所使用消息类型的简单文本。它们会被用来生成不同语言的源代码。</p>
<p>服务(srv): 一个srv文件描述一项服务。它包含两个部分：请求和响应。</p>
<p>msg文件存放在package的msg目录下，srv文件则存放在srv目录下。</p>
<p>msg文件实际上就是每行声明一个数据类型和变量名。</p>
<div class="codehilite"><pre><span></span><code><span class="n">可以使用的数据类型如下</span><span class="err">：</span>

<span class="n">int8</span><span class="p">,</span><span class="w"> </span><span class="n">int16</span><span class="p">,</span><span class="w"> </span><span class="n">int32</span><span class="p">,</span><span class="w"> </span><span class="n">int64</span><span class="w"> </span><span class="p">(</span><span class="n">plus</span><span class="w"> </span><span class="n">uint</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">float32</span><span class="p">,</span><span class="w"> </span><span class="n">float64</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="nc">time</span><span class="p">,</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="k">variable</span><span class="o">-</span><span class="n">length</span><span class="w"> </span><span class="k">array</span><span class="err">[]</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">fixed</span><span class="o">-</span><span class="n">length</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">C</span><span class="o">]</span>
</code></pre></div>

<p>在ROS中有一个特殊的数据类型：Header，它含有时间戳和坐标系信息。      <br />
下面是一个msg文件的样例，它使用了Header，string，和其他另外两个消息类型。</p>
<div class="codehilite"><pre><span></span><code><span class="n">Header</span><span class="w"> </span><span class="n">header</span>
<span class="w">  </span><span class="n">string</span><span class="w"> </span><span class="n">child_frame_id</span>
<span class="w">  </span><span class="n">geometry_msgs</span><span class="o">/</span><span class="n">PoseWithCovariance</span><span class="w"> </span><span class="n">pose</span>
<span class="w">  </span><span class="n">geometry_msgs</span><span class="o">/</span><span class="n">TwistWithCovariance</span><span class="w"> </span><span class="n">twist</span>
</code></pre></div>

<p>srv服务文件分为请求和响应两部分，由&rsquo;&mdash;&lsquo;分隔。下面是srv的一个样例：</p>
<div class="codehilite"><pre><span></span><code>int64 A
int64 B
---
int64 Sum
</code></pre></div>

<h6 id="msg">### 创建一个 msg</h6>
<p>首先创建msg文件：<code>roscd beginner_tutorials &amp;&amp; mkdir msg</code>
将msg消息写入文件（最简单的消息）：<code>echo "int64 num" &gt; msg/Num.msg</code></p>
<p>接下来，还有关键的一步：我们要确保msg文件被转换成为C++，Python和其他语言的源代码：</p>
<p>查看package.xml, 确保它包含一下两条语句，分别是消息的构建与运行:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;build_depend&gt;</span>message_generation<span class="nt">&lt;/build_depend&gt;</span>
<span class="nt">&lt;exec_depend&gt;</span>message_runtime<span class="nt">&lt;/exec_depend&gt;</span>
</code></pre></div>

<p>然后在CMakeLists.txt文件中，利用find_packag函数，增加对message_generation的依赖，这样就可以生成消息了。</p>
<p>你可以直接在COMPONENTS的列表里增加message_generation，就像这样：
<code>find_package(catkin REQUIRED COMPONENTS roscpp rospy std_msgs message_generation)</code></p>
<p>同样，你需要确保你设置了运行依赖：</p>
<div class="codehilite"><pre><span></span><code><span class="nx">catkin_package</span><span class="p">(</span>
<span class="w">  </span><span class="o">...</span>
<span class="w">  </span><span class="nx">CATKIN_DEPENDS</span><span class="w"> </span><span class="nx">message_runtime</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="o">...</span><span class="p">)</span>
</code></pre></div>

<p>找到如下代码块，添加你的msg文件：</p>
<div class="codehilite"><pre><span></span><code>add_message_files(
  FILES
  Num.msg
)
</code></pre></div>

<p>手动添加.msg文件后，我们要确保CMake知道在什么时候重新配置我们的project。</p>
<p>确保添加了如下代码:</p>
<div class="codehilite"><pre><span></span><code><span class="n">generate_messages</span><span class="p">(</span>
   <span class="n">DEPENDENCIES</span>
   <span class="n">std_msgs</span>
<span class="p">)</span>
</code></pre></div>

<p>然后执行<code>catkin_make</code>，会生成msg消息。</p>
<h6 id="rosmsg">### 使用 rosmsg</h6>
<p>创建完成后，通过rosmsg show命令，检查ROS是否能够识消息。   <br />
<code>rosmsg show beginner_tutorials/Num</code>/<code>rosmsg show Num</code> 
将会显示：<code>int64 num</code></p>
<h6 id="srv">### 创建一个srv</h6>
<p><code>roscd beginner_tutorials &amp;&amp; mkdir srv</code>
这次我们不再手动创建服务，而是从其他的package中复制一个服务。<br />
roscp [package_name] [file_to_copy_path] [copy_path]是一个很实用的命令行工具，它实现了将文件从一个package复制到另外一个package的功能。</p>
<p>现在我们从rospy_tutorials package中复制一个服务文件：</p>
<p><code>roscp rospy_tutorials AddTwoInts.srv srv/AddTwoInts.srv</code></p>
<p>还有很关键的一步：我们要确保srv文件被转换成C++，Python和其他语言的源代码。</p>
<p>如前边所介绍的，在CMakeLists.txt文件中增加了对message_generation的依赖(message_generation 对msg和srv都起作用)。</p>
<p>用你自己的srv文件名替换掉那些Service*.srv文件:</p>
<div class="codehilite"><pre><span></span><code>add_service_files(
  FILES
  AddTwoInts.srv
)
</code></pre></div>

<p>同样，跟msg文件类似，你也需要在package.xml文件中做一些修改(增加依赖项)。</p>
<p>现在，你可以生成自己的服务源代码了。</p>
<h6 id="rossrv">### 使用 rossrv</h6>
<p>同样可以通过rossrv show命令，检查ROS是否能够识该服务：<br />
<code>rossrv show beginner_tutorials/AddTwoInts</code>/<code>rossrv show AddTwoInts</code></p>
<p>将会显示：</p>
<div class="codehilite"><pre><span></span><code>[rospy_tutorials/AddTwoInts]:
int64 a
int64 b
---
int64 sum

[beginner_tutorials/AddTwoInts]:
int64 a
int64 b
---
int64 sum
</code></pre></div>

<h6 id="c">C++编写简单的消息发布器和订阅器</h6>
<p>基于消息，编写发布器节点和订阅器节点，实现话题通信。</p>
<p>进入源文件目录：<code>roscd beginner_tutorials/src</code>      </p>
<h6 id="_13">### 发布器</h6>
<p>创建 talker.cpp 文件并粘贴代码：</p>
<div class="codehilite"><pre><span></span><code><span class="cm">/* </span>
<span class="cm"> * 代码思路如下：</span>
<span class="cm"> * 1.初始化ROS系统</span>
<span class="cm"> * 2.在ROS网络内广播我们将要在chatter topic上发布std_msgs/String消息</span>
<span class="cm"> * 3.以每秒10次的频率在chatter上发布消息</span>
<span class="cm">*/</span><span class="w"> </span>
<span class="cp">##include &quot;ros/ros.h&quot;</span>
<span class="cp">##include &quot;std_msgs/String.h&quot;</span>

<span class="cp">##include &lt;sstream&gt;</span>

<span class="cm">/**</span>
<span class="cm"> * This tutorial demonstrates simple sending of messages over the ROS system.</span>
<span class="cm"> */</span>
<span class="kr">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * The ros::init() function needs to see argc and argv so that it can perform</span>
<span class="cm">   * any ROS arguments and name remapping that were provided at the command line. For programmatic</span>
<span class="cm">   * remappings you can use a different version of init() which takes remappings</span>
<span class="cm">   * directly, but for most command-line programs, passing argc and argv is the easiest</span>
<span class="cm">   * way to do it.  The third argument to init() is the name of the node.</span>
<span class="cm">   *</span>
<span class="cm">   * You must call one of the versions of ros::init() before using any other</span>
<span class="cm">   * part of the ROS system.</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;talker&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * NodeHandle is the main access point to communications with the ROS system.</span>
<span class="cm">   * The first NodeHandle constructed will fully initialize this node, and the last</span>
<span class="cm">   * NodeHandle destructed will close down the node.</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">NodeHandle</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * The advertise() function is how you tell ROS that you want to</span>
<span class="cm">   * publish on a given topic name. This invokes a call to the ROS</span>
<span class="cm">   * master node, which keeps a registry of who is publishing and who</span>
<span class="cm">   * is subscribing. After this advertise() call is made, the master</span>
<span class="cm">   * node will notify anyone who is trying to subscribe to this topic name,</span>
<span class="cm">   * and they will in turn negotiate a peer-to-peer connection with this</span>
<span class="cm">   * node.  advertise() returns a Publisher object which allows you to</span>
<span class="cm">   * publish messages on that topic through a call to publish().  Once</span>
<span class="cm">   * all copies of the returned Publisher object are destroyed, the topic</span>
<span class="cm">   * will be automatically unadvertised.</span>
<span class="cm">   *</span>
<span class="cm">   * The second parameter to advertise() is the size of the message queue</span>
<span class="cm">   * used for publishing messages.  If messages are published more quickly</span>
<span class="cm">   * than we can send them, the number here specifies how many messages to</span>
<span class="cm">   * buffer up before throwing some away.</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">Publisher</span><span class="w"> </span><span class="n">chatter_pub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">.</span><span class="n">advertise</span><span class="o">&lt;</span><span class="n">std_msgs</span><span class="o">::</span><span class="kr">String</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;chatter&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span>

<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">Rate</span><span class="w"> </span><span class="n">loop_rate</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * A count of how many messages we have sent. This is used to create</span>
<span class="cm">   * a unique string for each message.</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="kr">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">ros</span><span class="o">::</span><span class="n">ok</span><span class="p">())</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * This is a message object. You stuff it with data, and then publish it.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">std_msgs</span><span class="o">::</span><span class="kr">String</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">stringstream</span><span class="w"> </span><span class="n">ss</span><span class="p">;</span>
<span class="w">    </span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;hello ! ROS world !&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
<span class="w">    </span><span class="n">msg</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ss</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>

<span class="w">    </span><span class="n">ROS_INFO</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * The publish() function is how you send messages. The parameter</span>
<span class="cm">     * is the message object. The type of this object must agree with the type</span>
<span class="cm">     * given as a template parameter to the advertise&lt;&gt;() call, as was done</span>
<span class="cm">     * in the constructor above.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">chatter_pub</span><span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>

<span class="w">    </span><span class="n">ros</span><span class="o">::</span><span class="n">spinOnce</span><span class="p">();</span>

<span class="w">    </span><span class="n">loop_rate</span><span class="p">.</span><span class="n">sleep</span><span class="p">();</span>
<span class="w">    </span><span class="o">++</span><span class="n">count</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h6 id="_14">### 订阅器</h6>
<p>创建 listener.cpp 文件并粘贴以下代码：</p>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1.</span><span class="err">初始化</span><span class="n">ROS系统</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2.</span><span class="err">订阅</span><span class="n">chatter</span><span class="w"> </span><span class="n">topic</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">3.</span><span class="err">进入自循环，等待消息的到达</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">4.</span><span class="err">当消息到达，调用</span><span class="n">chatterCallback</span><span class="p">()</span><span class="err">函数</span>
<span class="o">*/</span>
<span class="c1">##include &quot;ros/ros.h&quot;</span>
<span class="c1">##include &quot;std_msgs/String.h&quot;</span>

<span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">tutorial</span><span class="w"> </span><span class="n">demonstrates</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">receipt</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ROS</span><span class="w"> </span><span class="n">system</span><span class="o">.</span>
<span class="w"> </span><span class="o">*/</span>
<span class="o">//</span><span class="w"> </span><span class="err">回调函数</span>
<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">chatterCallback</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std_msgs</span><span class="p">::</span><span class="nb nb-Type">String</span><span class="p">::</span><span class="n">ConstPtr</span><span class="o">&amp;</span><span class="w"> </span><span class="n">msg</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">ROS_INFO</span><span class="p">(</span><span class="s2">&quot;I heard: [</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">data</span><span class="o">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>

<span class="nb nb-Type">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="nb">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="o">/**</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">ros</span><span class="p">::</span><span class="n">init</span><span class="p">()</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">argc</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">argv</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">perform</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">ROS</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">remapping</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">line</span><span class="o">.</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">programmatic</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">remappings</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">init</span><span class="p">()</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">remappings</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">directly</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">command</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">programs</span><span class="p">,</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="n">argc</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">argv</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">easiest</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="n">third</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">init</span><span class="p">()</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="o">.</span>
<span class="w">   </span><span class="o">*</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">versions</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">ros</span><span class="p">::</span><span class="n">init</span><span class="p">()</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ROS</span><span class="w"> </span><span class="n">system</span><span class="o">.</span>
<span class="w">   </span><span class="o">*/</span>
<span class="w">  </span><span class="n">ros</span><span class="p">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;listener&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="o">/**</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">NodeHandle</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">communications</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ROS</span><span class="w"> </span><span class="n">system</span><span class="o">.</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">NodeHandle</span><span class="w"> </span><span class="n">constructed</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fully</span><span class="w"> </span><span class="n">initialize</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">node</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">NodeHandle</span><span class="w"> </span><span class="n">destructed</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">close</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="o">.</span>
<span class="w">   </span><span class="o">*/</span>
<span class="w">  </span><span class="n">ros</span><span class="p">::</span><span class="n">NodeHandle</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>

<span class="w">  </span><span class="o">/**</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">subscribe</span><span class="p">()</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="n">ROS</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">receive</span><span class="w"> </span><span class="n">messages</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">topic</span><span class="o">.</span><span class="w">  </span><span class="n">This</span><span class="w"> </span><span class="n">invokes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ROS</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="k">master</span><span class="w"> </span><span class="n">node</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">keeps</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">who</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">publishing</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">who</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">subscribing</span><span class="o">.</span><span class="w">  </span><span class="n">Messages</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="n">function</span><span class="p">,</span><span class="w"> </span><span class="n">here</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">chatterCallback</span><span class="o">.</span><span class="w">  </span><span class="n">subscribe</span><span class="p">()</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Subscriber</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">hold</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">unsubscribe</span><span class="o">.</span><span class="w">  </span><span class="n">When</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">copies</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Subscriber</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">go</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">unsubscribed</span><span class="w"> </span><span class="n">from</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">topic</span><span class="o">.</span>
<span class="w">   </span><span class="o">*</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">subscribe</span><span class="p">()</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">queue</span><span class="o">.</span><span class="w">  </span><span class="n">If</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">arriving</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">processed</span><span class="p">,</span><span class="w"> </span><span class="n">this</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">buffered</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">beginning</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">throw</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">away</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">oldest</span><span class="w"> </span><span class="n">ones</span><span class="o">.</span>
<span class="w">   </span><span class="o">*/</span>
<span class="w">  </span><span class="n">ros</span><span class="p">::</span><span class="n">Subscriber</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;chatter&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w"> </span><span class="n">chatterCallback</span><span class="p">);</span>

<span class="w">  </span><span class="o">/**</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">ros</span><span class="p">::</span><span class="n">spin</span><span class="p">()</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">loop</span><span class="p">,</span><span class="w"> </span><span class="n">pumping</span><span class="w"> </span><span class="n">callbacks</span><span class="o">.</span><span class="w">  </span><span class="n">With</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">version</span><span class="p">,</span><span class="w"> </span><span class="n">all</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">callbacks</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">one</span><span class="p">)</span><span class="o">.</span><span class="w">  </span><span class="n">ros</span><span class="p">::</span><span class="n">spin</span><span class="p">()</span>
<span class="w">   </span><span class="o">*</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">Ctrl</span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">pressed</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">shutdown</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">master</span><span class="o">.</span>
<span class="w">   </span><span class="o">*/</span>
<span class="w">  </span><span class="n">ros</span><span class="p">::</span><span class="n">spin</span><span class="p">();</span><span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="err">自循环</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h6 id="_15">### 编译节点</h6>
<p>调整 package.xml 和 CMakeLists.txt 文件。</p>
<p>在CMakeLists.txt文件末尾加入几条语句:</p>
<div class="codehilite"><pre><span></span><code>include_directories(include<span class="w"> </span><span class="cp">${</span><span class="n">catkin_INCLUDE_DIRS</span><span class="cp">}</span>)

add_executable(talker<span class="w"> </span>src/talker.cpp)
target_link_libraries(talker<span class="w"> </span><span class="cp">${</span><span class="n">catkin_LIBRARIES</span><span class="cp">}</span>)

add_executable(listener<span class="w"> </span>src/listener.cpp)
target_link_libraries(listener<span class="w"> </span><span class="cp">${</span><span class="n">catkin_LIBRARIES</span><span class="cp">}</span>)
</code></pre></div>

<p>这会生成两个可执行文件, talker 和 listener, 默认存储到devel/lib目录</p>
<p>然后运行<code>catkin_make</code>编译。</p>
<p>启动：</p>
<div class="codehilite"><pre><span></span><code>rosrun beginner_tutorials talker
rosrun beginner_tutorials listener  
</code></pre></div>

<h6 id="python">Python编写简单的消息发布器和订阅器</h6>
<h6 id="_16">### 发布器</h6>
<p>进入并创建目录：<code>roscd beginner_tutorials &amp;&amp; mkdir scripts &amp;&amp; cd scripts</code>     <br />
创建 talker.py ，写入以下代码：</p>
<div class="codehilite"><pre><span></span><code><span class="c1">##!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">String</span>

<span class="k">def</span> <span class="nf">talker</span><span class="p">():</span>
    <span class="n">pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;talker&#39;</span><span class="p">,</span> <span class="n">anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1">## 10hz</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>
        <span class="n">hello_str</span> <span class="o">=</span> <span class="s2">&quot;hello world </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_time</span><span class="p">()</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="n">hello_str</span><span class="p">)</span>
        <span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">hello_str</span><span class="p">)</span>
        <span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">talker</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSInterruptException</span><span class="p">:</span>
        <span class="k">pass</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    标准的Python main检查，这个会捕获rospy.ROSInterruptException异常，当按下Ctrl-C或节点关闭的话，即使在rospy.sleep()和rospy.Rate.sleep()函数里都会抛出异常。</span>
<span class="sd">    &#39;&#39;&#39;</span>
</code></pre></div>

<h6 id="_17">### 订阅器</h6>
<p>创建 listener.py ，写入以下代码：</p>
<div class="codehilite"><pre><span></span><code><span class="c1">##!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">String</span>

<span class="c1">## 新增加的函数回调机制</span>
<span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_caller_id</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;I heard </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">listener</span><span class="p">():</span>

    <span class="c1">## In ROS, nodes are uniquely named. If two nodes with the same</span>
    <span class="c1">## name are launched, the previous one is kicked off. The</span>
    <span class="c1">## anonymous=True flag means that rospy will choose a unique</span>
    <span class="c1">## name for our &#39;listener&#39; node so that multiple listeners can</span>
    <span class="c1">## run simultaneously.</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;listener&#39;</span><span class="p">,</span> <span class="n">anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

    <span class="c1">## spin() simply keeps python from exiting until this node is stopped</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">spin</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">listener</span><span class="p">()</span>
</code></pre></div>

<h6 id="_18">### 编译节点</h6>
<p>我们使用CMake作为构建系统，即使是Python节点也需要使用。</p>
<p><code>catkin_make</code>编译完成。</p>
<p>启动：</p>
<div class="codehilite"><pre><span></span><code>rosrun beginner_tutorials talker.py 
rosrun beginner_tutorials listener.py 
</code></pre></div>

<h6 id="cserviceclient">C++编写简单的Service和Client</h6>
<h6 id="_19">### 服务端</h6>
<p>创建 src/add_two_ints_server.cpp 文件，并粘贴下面的代码：</p>
<div class="codehilite"><pre><span></span><code><span class="err">#</span><span class="p">#</span><span class="nn">include</span><span class="w"> </span><span class="s2">&quot;ros/ros.h&quot;</span>
<span class="err">#</span><span class="p">#</span><span class="nn">include</span><span class="w"> </span><span class="s2">&quot;beginner_tutorials/AddTwoInts.h&quot;</span>

<span class="nt">bool</span><span class="w"> </span><span class="nt">add</span><span class="o">(</span><span class="nt">beginner_tutorials</span><span class="p">::</span><span class="nd">AddTwoInts</span><span class="p">::</span><span class="nd">Request</span><span class="w">  </span><span class="o">&amp;</span><span class="nt">req</span><span class="o">,</span>
<span class="w">         </span><span class="nt">beginner_tutorials</span><span class="p">::</span><span class="nd">AddTwoInts</span><span class="p">::</span><span class="nd">Response</span><span class="w"> </span><span class="o">&amp;</span><span class="nt">res</span><span class="o">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="err">res.sum</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">req.a</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">req.b</span><span class="p">;</span>
<span class="w">  </span><span class="err">ROS_INFO(&quot;</span><span class="n">request</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="o">=%</span><span class="n">ld</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=%</span><span class="n">ld</span><span class="s2">&quot;, (long int)req.a, (long int)req.b);</span>
<span class="s2">  ROS_INFO(&quot;</span><span class="n">sending</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">response</span><span class="o">:</span><span class="w"> </span><span class="cp">[</span><span class="o">%</span><span class="nx">ld</span><span class="cp">]</span><span class="s2">&quot;, (long int)res.sum);</span>
<span class="s2">  return true;</span>
<span class="s2">}</span>

<span class="s2">int main(int argc, char **argv)</span>
<span class="s2">{</span>
<span class="s2">  ros::init(argc, argv, &quot;</span><span class="n">add_two_ints_server</span><span class="s2">&quot;);</span>
<span class="s2">  ros::NodeHandle n;</span>

<span class="s2">  ros::ServiceServer service = n.advertiseService(&quot;</span><span class="n">add_two_ints</span><span class="s2">&quot;, add);</span>
<span class="s2">  ROS_INFO(&quot;</span><span class="n">Ready</span><span class="w"> </span><span class="kc">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">ints</span><span class="o">.</span><span class="err">&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="n">ros</span><span class="p">:</span><span class="o">:</span><span class="nf">spin</span><span class="p">();</span>

<span class="w">  </span><span class="err">return</span><span class="w"> </span><span class="err">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h6 id="_20">### 客户端</h6>
<p>创建src/add_two_ints_client.cpp文件，并粘贴下面的代码：</p>
<div class="codehilite"><pre><span></span><code><span class="cp">##include &quot;ros/ros.h&quot;</span>
<span class="cp">##include &quot;beginner_tutorials/AddTwoInts.h&quot;</span>
<span class="cp">##include &lt;cstdlib&gt;</span>

<span class="kr">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;add_two_ints_client&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">ROS_INFO</span><span class="p">(</span><span class="s">&quot;usage: add_two_ints_client X Y&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">NodeHandle</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">ServiceClient</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">.</span><span class="n">serviceClient</span><span class="o">&lt;</span><span class="n">beginner_tutorials</span><span class="o">::</span><span class="n">AddTwoInts</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;add_two_ints&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="n">beginner_tutorials</span><span class="o">::</span><span class="n">AddTwoInts</span><span class="w"> </span><span class="n">srv</span><span class="p">;</span>
<span class="w">  </span><span class="n">srv</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atoll</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="w">  </span><span class="n">srv</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atoll</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="n">srv</span><span class="p">))</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">ROS_INFO</span><span class="p">(</span><span class="s">&quot;Sum: %ld&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kr">long</span><span class="w"> </span><span class="kr">int</span><span class="p">)</span><span class="n">srv</span><span class="p">.</span><span class="n">response</span><span class="p">.</span><span class="n">sum</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">ROS_ERROR</span><span class="p">(</span><span class="s">&quot;Failed to call service add_two_ints&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h6 id="_21">### 编译节点</h6>
<p>再来编辑一下beginner_tutorials里面的CMakeLists.txt</p>
<div class="codehilite"><pre><span></span><code>add_executable(add_two_ints_server<span class="w"> </span>src/add_two_ints_server.cpp)
target_link_libraries(add_two_ints_server<span class="w"> </span><span class="cp">${</span><span class="n">catkin_LIBRARIES</span><span class="cp">}</span>)
add_dependencies(add_two_ints_server<span class="w"> </span>beginner_tutorials_gencpp)

add_executable(add_two_ints_client<span class="w"> </span>src/add_two_ints_client.cpp)
target_link_libraries(add_two_ints_client<span class="w"> </span><span class="cp">${</span><span class="n">catkin_LIBRARIES</span><span class="cp">}</span>)
add_dependencies(add_two_ints_client<span class="w"> </span>beginner_tutorials_gencpp)
</code></pre></div>

<p>这段代码将生成两个可执行程序&rdquo;add_two_ints_server&rdquo;和&rdquo;add_two_ints_client&rdquo;，这两个可执行程序默认被放在你的devel/lib下的包目录下。</p>
<p>可以直接调用可执行程序，或者使用rosrun命令去调用它们。</p>
<p><code>catkin_make</code>编译完成。</p>
<h6 id="pythonserviceclient">Python编写简单的Service和Client</h6>
<h6 id="_22">### 服务端</h6>
<p>创建scripts/add_two_ints_server.py文件，并粘贴以下内容：</p>
<div class="codehilite"><pre><span></span><code><span class="c1">##!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">beginner_tutorials.srv</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">rospy</span>

<span class="k">def</span> <span class="nf">handle_add_two_ints</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="nb">print</span> <span class="s2">&quot;Returning [</span><span class="si">%s</span><span class="s2"> + </span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">]&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">req</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">req</span><span class="o">.</span><span class="n">b</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">AddTwoIntsResponse</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">req</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">add_two_ints_server</span><span class="p">():</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;add_two_ints_server&#39;</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Service</span><span class="p">(</span><span class="s1">&#39;add_two_ints&#39;</span><span class="p">,</span> <span class="n">AddTwoInts</span><span class="p">,</span> <span class="n">handle_add_two_ints</span><span class="p">)</span>
    <span class="nb">print</span> <span class="s2">&quot;Ready to add two ints.&quot;</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">spin</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">add_two_ints_server</span><span class="p">()</span>
</code></pre></div>

<h6 id="_23">### 客户端</h6>
<p>创建scripts/add_two_ints_client.py文件，并粘贴以下内容：</p>
<div class="codehilite"><pre><span></span><code><span class="c1">##!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">beginner_tutorials.srv</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">add_two_ints_client</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="s1">&#39;add_two_ints&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">add_two_ints</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="s1">&#39;add_two_ints&#39;</span><span class="p">,</span> <span class="n">AddTwoInts</span><span class="p">)</span>
        <span class="n">resp1</span> <span class="o">=</span> <span class="n">add_two_ints</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp1</span><span class="o">.</span><span class="n">sum</span>
    <span class="k">except</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceException</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;Service call failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">e</span>

<span class="k">def</span> <span class="nf">usage</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> [x y]&quot;</span><span class="o">%</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span> <span class="n">usage</span><span class="p">()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span> <span class="s2">&quot;Requesting </span><span class="si">%s</span><span class="s2">+</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> + </span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">add_two_ints_client</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</code></pre></div>

<h6 id="_24">### 编译节点</h6>
<p><code>catkin_make</code>编译完成。</p>
<p>执行：</p>
<div class="codehilite"><pre><span></span><code>rosrun beginner_tutorials add_two_ints_server.py
rosrun beginner_tutorials add_two_ints_client.py
</code></pre></div>

<p>注意：python2 和 python3 语法有区别的。</p>
<h3 id="ros_7">七、ROS常用工具</h3>
<h6 id="rqt">rqt</h6>
<p>rqt 是ROS提供的 GUI 工具集。</p>
<p>前面我们已经用过rqt工具的一部分，现在我们来整理了解一下：</p>
<p>通过<code>rqt</code>命令打开该工具。</p>
<h6 id="rviz">rviz</h6>
<p>RViz是一款强大的可视化工具，它允许你查看机器人中的传感器和内部状态。</p>
<p>通过<code>rviz</code>命令打开该工具。</p>
<p>可以通过Add添加想要Display的Topics，并且可以配置其参数。</p>
<p>还可以从不同的视角来看当前机器人的状态，尤其在机器人导航时很有用。</p>
<p>底部会显示Time，即ROS系统的内部时钟。</p>
<h3 id="ros_8">八、ROS入门总结</h3>
<h6 id="_25">总结</h6>
<ul>
<li>此时你应该已经对ROS中的一些核心概念有了一定的理解。</li>
<li>给你一台运行ROS的机器人，你应该能够运用所学知识来列出机器人上发布和订阅的各种话题（topic），查看话题中发布的消息，然后编写你自己的节点（node）来处理传感器数据，最后让机器人在真实环境中动起来。</li>
<li>ROS真正的吸引力不在于它自己发布或订阅的中间件，而在于ROS为世界各地的开发者提供了一种标准机制来分享他们的代码。</li>
<li>ROS最大的特色在于庞大的社区。</li>
<li>大量现成可用的程序包（packages）已经势不可挡。</li>
</ul>
<h6 id="_26">接下来做什么？</h6>
<p>ROS作为一种机器人软件开发平台，学习完基本概念后，我们可以从一辆真实的机器人或者一个模拟器入手，学习其底盘控制、传感器数据获取、导航算法、规划算法等，先用所学的节点等概念去全面了解Robot，然后再去钻研自己感兴趣的那一方面。</p>
<p>ROS入门完！<a href="https://www.ncnynl.com/archives/201907/3173.html">ROS Distro</a></p>
<p>有兴趣的也可以看看<a href="https://www.ncnynl.com/archives/201907/3152.html">《ROS史话36篇》</a>，出自<a href="https://faculty.ecnu.edu.cn/_s43/zxy2/main.psp">华东师范大学-张新宇老师</a>。</p>
<p>摘抄：</p>
<div class="codehilite"><pre><span></span><code><span class="nt">计算机使用的操作系统</span><span class="err">，</span><span class="nt">英语称为Operating</span><span class="w"> </span><span class="nt">System</span><span class="err">，</span><span class="nt">缩写为OS</span><span class="err">。</span><span class="nt">它是一种计算机程序</span><span class="err">，</span><span class="nt">帮助使用计算机的人操控计算机硬件</span><span class="err">、</span><span class="nt">管理各种应用软件</span><span class="err">。</span>

<span class="nt">人们听说过的硬件包括</span><span class="err">：</span><span class="nt">CPU</span><span class="err">、</span><span class="nt">主板</span><span class="err">、</span><span class="nt">内存</span><span class="err">、</span><span class="nt">硬盘</span><span class="err">、</span><span class="nt">显示器</span><span class="err">、</span><span class="nt">打印机</span><span class="err">、</span><span class="nt">U盘等</span><span class="err">；</span><span class="nt">人们常用的应用软件有</span><span class="err">：</span><span class="nt">文字处理软件</span><span class="err">，</span><span class="nt">比如微软开发的Word</span><span class="err">，</span><span class="nt">幻灯片制作软件</span><span class="err">，</span><span class="nt">比如微软开发的PowerPoint</span><span class="err">，</span><span class="nt">看电影的软件</span><span class="err">，</span><span class="nt">比如微软的视频播放器</span><span class="err">，</span><span class="nt">浏览网页的软件</span><span class="err">，</span><span class="nt">比如谷歌的Chrome</span><span class="err">、</span><span class="nt">聊天软件</span><span class="err">，</span><span class="nt">比如腾讯的QQ和微信等等</span><span class="err">。</span>

<span class="nt">一开始</span><span class="err">，</span><span class="nt">计算机比较简单</span><span class="err">，</span><span class="nt">并没有操作系统</span><span class="err">，</span><span class="nt">人们通过各种操作按钮就可以控制计算机</span><span class="err">，</span><span class="nt">但是这种操作方式效率比较低</span><span class="err">。</span><span class="nt">后来人们通过有孔的纸带将程序输入计算机进行编译</span><span class="err">，</span><span class="nt">再通过程序员自己编写的程序运行</span><span class="err">，</span><span class="nt">这种方式效率还是很低</span><span class="err">。</span><span class="nt">为了更有效的管理计算机硬件</span><span class="err">，</span><span class="nt">并提高计算机程序的开发效率</span><span class="err">，</span><span class="nt">就出现了操作系统</span><span class="err">。</span>

<span class="nt">与计算机操作系统类似</span><span class="err">，</span><span class="nt">机器人操作系统的出现也遵循这样一个规律</span><span class="err">：</span><span class="nt">为了提高机器人设计和开发的效率</span><span class="err">。</span><span class="nt">机器人操作系统英语称为Robot</span><span class="w"> </span><span class="nt">Operating</span><span class="w"> </span><span class="nt">System</span><span class="err">，</span><span class="nt">缩写为ROS</span><span class="err">。</span>

<span class="nt">2009年摩根</span><span class="err">·</span><span class="nt">奎格利</span><span class="o">(</span><span class="nt">吴恩达学生</span><span class="o">)</span><span class="err">、</span><span class="nt">吴恩达和柳树车库机器人公司的工程师们</span><span class="err">，</span><span class="nt">在当年的IEEE国际机器人与自动化会议上发表了</span><span class="err">《</span><span class="nt">ROS</span><span class="o">:</span><span class="w"> </span><span class="nt">An</span><span class="w"> </span><span class="nt">Open-Source</span><span class="w"> </span><span class="nt">Robot</span><span class="w"> </span><span class="nt">Operating</span><span class="w"> </span><span class="nt">System</span><span class="err">》，</span><span class="nt">正式向外界介绍ROS</span><span class="err">。</span>

<span class="nt">正如文章中说强调的</span><span class="err">：</span>

<span class="nt">ROS</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">an</span><span class="w"> </span><span class="nt">operating</span><span class="w"> </span><span class="nt">system</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">traditional</span><span class="w"> </span><span class="nt">sense</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">process</span><span class="w"> </span><span class="nt">management</span><span class="w"> </span><span class="nt">and</span><span class="w"> </span><span class="nt">scheduling</span><span class="o">;</span><span class="w"> </span><span class="nt">rather</span><span class="o">,</span><span class="w"> </span><span class="nt">it</span><span class="w"> </span><span class="nt">provides</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="nt">structured</span><span class="w"> </span><span class="nt">communications</span><span class="w"> </span><span class="nt">layer</span><span class="w"> </span><span class="nt">above</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">host</span><span class="w"> </span><span class="nt">operating</span><span class="w"> </span><span class="nt">systems</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="nt">heterogenous</span><span class="w"> </span><span class="nt">compute</span><span class="w"> </span><span class="nt">cluster</span><span class="o">.</span>

<span class="err">（</span><span class="nt">译文</span><span class="err">：</span><span class="nt">ROS不是传统意义上的操作系统</span><span class="err">，</span><span class="nt">不是用于进程管理和调度</span><span class="err">，</span><span class="nt">而是构建在其它操作系统之上的一种结构化的通讯层</span><span class="err">。）</span>

<span class="nt">从2008年开始</span><span class="err">，</span><span class="nt">柳树车库机器人开始主导ROS的开发</span><span class="err">，</span><span class="nt">奎格利因为还没有毕业</span><span class="err">，</span><span class="nt">但以学生兼职的形式指导着ROS的进展</span><span class="err">。</span>

<span class="nt">2010年</span><span class="err">，</span><span class="nt">随着PR2正式对外发布</span><span class="err">，</span><span class="nt">柳树车库机器人也正式推出ROS正式开发版</span><span class="err">，</span><span class="nt">这就是ROS</span><span class="w"> </span><span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="err">。</span>

<span class="nt">ROS秉承</span><span class="err">“</span><span class="nt">开源</span><span class="err">”</span><span class="nt">的原则</span><span class="err">，</span><span class="nt">与全球开发者一起推动机器人事业</span><span class="err">。</span>

<span class="nt">2012年</span><span class="err">，</span><span class="nt">摩根</span><span class="err">·</span><span class="nt">奎格利终于博士毕业了</span><span class="err">，</span><span class="nt">他选择作为首席架构师</span><span class="err">，</span><span class="nt">与布莱恩</span><span class="err">·</span><span class="nt">格基</span><span class="err">（</span><span class="nt">Brian</span><span class="w"> </span><span class="nt">Gerkey</span><span class="err">，</span><span class="nt">CEO</span><span class="err">）、</span><span class="nt">罗伯特</span><span class="err">·</span><span class="nt">弗里德曼</span><span class="err">（</span><span class="nt">Roberta</span><span class="w"> </span><span class="nt">Friedman</span><span class="err">，</span><span class="w"> </span><span class="nt">CFO</span><span class="err">）、</span><span class="nt">凯特</span><span class="err">·</span><span class="nt">考尼</span><span class="err">（</span><span class="nt">Nate</span><span class="w"> </span><span class="nt">Koenig</span><span class="err">，</span><span class="w"> </span><span class="nt">CTO</span><span class="err">）</span><span class="nt">一起创建了</span><span class="err">“</span><span class="nt">开源机器人基金会</span><span class="w"> </span><span class="o">(</span><span class="nt">Open</span><span class="w"> </span><span class="nt">Source</span><span class="w"> </span><span class="nt">Robot</span><span class="w"> </span><span class="nt">Foundation</span><span class="err">，</span><span class="nt">OSRF</span><span class="o">)</span><span class="err">”。</span><span class="nt">后来</span><span class="err">，</span><span class="nt">OSRF接管了ROS的开发和维护工作</span><span class="err">。</span>

<span class="nt">在ROS的发展历程中</span><span class="err">，</span><span class="nt">有两件非常重要的事件</span><span class="err">，</span><span class="nt">其一就是成立了</span><span class="o">**</span><span class="nt">独立运营的</span><span class="err">“</span><span class="nt">开源机器人基金会</span><span class="err">”</span><span class="o">**</span><span class="err">，</span><span class="nt">推动ROS的发展</span><span class="err">；</span><span class="nt">其二就是</span><span class="o">**</span><span class="nt">每年举办的ROS开发者大会</span><span class="o">**</span><span class="err">。</span>

<span class="nt">随着ROS社群不断的壮大</span><span class="err">，</span><span class="nt">在2012年5月</span><span class="err">，“</span><span class="nt">开源机器人基金会</span><span class="err">”</span><span class="nt">组织了第一届ROS开发者大会</span><span class="err">（</span><span class="nt">简称ROSCon</span><span class="err">）。</span>

<span class="nt">微软的Kinect深度相机在2010年发布</span><span class="err">，</span><span class="nt">2011年已经很火了</span><span class="err">。</span><span class="nt">通过Kinect采集获得的是可视范围内的深度数据</span><span class="err">，</span><span class="nt">即可视范围内物体到相机的距离</span><span class="err">。</span><span class="nt">从这些深度数据</span><span class="err">，</span><span class="nt">可以计算出3D点云</span><span class="err">（</span><span class="nt">Point</span><span class="w"> </span><span class="nt">Cloud</span><span class="err">）。</span><span class="nt">这样</span><span class="err">，</span><span class="nt">点云处理算法就要跟进</span><span class="err">，</span><span class="nt">因此ROS加入了点云库</span><span class="err">（</span><span class="nt">Point</span><span class="w"> </span><span class="nt">Cloud</span><span class="w"> </span><span class="nt">Library</span><span class="o">,</span><span class="w"> </span><span class="nt">PCL</span><span class="err">）</span><span class="nt">的0</span><span class="p">.</span><span class="nc">1版本</span><span class="err">，</span><span class="nt">这是一个开源的软件库</span><span class="err">，</span><span class="nt">包含大量与点云有关的算法</span><span class="err">，</span><span class="nt">包括显示点云数据</span><span class="err">、</span><span class="nt">滤波</span><span class="err">、</span><span class="nt">分割</span><span class="err">、</span><span class="nt">特征提取</span><span class="err">、</span><span class="nt">配准</span><span class="err">、</span><span class="nt">重建等</span><span class="err">，</span><span class="nt">支持Windows和Linux等平台</span><span class="err">，</span><span class="nt">也可以在一些嵌入式开发板上使用</span><span class="err">。</span><span class="nt">PCL在三维点云中的地位相当于OpenCV在图像处理和计算机视觉中的地位</span><span class="err">。</span>

<span class="nt">PCL是由莱度</span><span class="err">·</span><span class="nt">茹苏</span><span class="err">（</span><span class="nt">Radu</span><span class="w"> </span><span class="nt">B</span><span class="o">.</span><span class="w"> </span><span class="nt">Rusu</span><span class="err">）</span><span class="nt">在车库期间创建的开源点云处理软件</span><span class="err">。</span><span class="nt">那时</span><span class="err">，</span><span class="nt">点云数据和点云数据处理在逆向工程已经应用的很广泛了</span><span class="err">，</span><span class="nt">只是很少有人把自己的算法和代码开源出来</span><span class="err">。</span><span class="nt">莱度</span><span class="err">·</span><span class="nt">茹苏毕业于德国慕尼黑工业大学</span><span class="err">（</span><span class="nt">TechnischeUniversität</span><span class="w"> </span><span class="nt">München</span><span class="err">），</span><span class="nt">后来负责由车库孵化的</span><span class="w"> </span><span class="nt">Open</span><span class="w"> </span><span class="nt">Perception公司</span><span class="err">，</span><span class="nt">致力于2D</span><span class="o">/</span><span class="nt">3D</span><span class="w"> </span><span class="nt">数据的处理</span><span class="err">。</span>
<span class="nt">ROS已经加入对视觉信息处理的支持</span><span class="err">，</span><span class="nt">尤其是改进OpenCV在ROS中的易用性</span><span class="err">。</span>

<span class="nt">OpenCV</span><span class="w"> </span><span class="nt">是盖里</span><span class="err">·</span><span class="nt">布拉德斯基</span><span class="err">（</span><span class="nt">Gary</span><span class="w"> </span><span class="nt">Bradski</span><span class="err">）</span><span class="nt">在Intel</span><span class="w"> </span><span class="nt">工作期间开发的一个开源计算机视觉库</span><span class="err">。</span><span class="nt">OpenCV</span><span class="err">（</span><span class="nt">Open</span><span class="w"> </span><span class="nt">SourceComputer</span><span class="w"> </span><span class="nt">Vision</span><span class="w"> </span><span class="nt">Library</span><span class="err">：</span><span class="nt">http</span><span class="o">://</span><span class="nt">opencv</span><span class="p">.</span><span class="nc">org</span><span class="err">）</span><span class="nt">是由一系列C</span><span class="w"> </span><span class="nt">函数</span><span class="o">/</span><span class="nt">C</span><span class="o">++</span><span class="nt">类构成</span><span class="err">，</span><span class="nt">实现了图像处理和计算机视觉方面的很多通用算法</span><span class="err">。</span><span class="nt">很多人都在享受OpenCV带来的便利</span><span class="err">。</span>

<span class="nt">跟所有的开源项目一样</span><span class="err">，</span><span class="nt">OpenCV致力于软件算法的共享</span><span class="err">，“</span><span class="nt">不重复造轮子</span><span class="err">”。</span><span class="nt">早期的主要目标是</span><span class="err">：</span>

<span class="nt">提供一套开源的标准算法</span><span class="err">，</span><span class="nt">加速机器视觉的研究</span><span class="err">；</span>
<span class="nt">建立一套基本算法库</span><span class="err">，</span><span class="nt">研究者和开发工程师能够快速进行视觉软件开发</span><span class="err">；</span>
<span class="nt">利用开源或免费的软件许可与授权</span><span class="err">，</span><span class="nt">促进商业视觉应用的开发</span><span class="err">，</span><span class="nt">通过共享</span><span class="err">，</span><span class="nt">共同促进知识的传播</span><span class="err">。</span>

<span class="nt">2013年到2014年初</span><span class="err">，</span><span class="nt">是车库机器人研发的最后一个阶段</span><span class="err">。</span><span class="nt">外界传闻很多</span><span class="err">，</span><span class="nt">车库内部很多人心绪不定</span><span class="err">，</span><span class="nt">对于PR2的未来背地里也是议论纷纷</span><span class="err">。</span><span class="nt">车库的房东斯科特</span><span class="err">·</span><span class="nt">哈森</span><span class="err">，</span><span class="nt">决定停止继续投入资金</span><span class="err">，</span><span class="w"> </span><span class="nt">PR2的研究也停下来</span><span class="err">。</span><span class="nt">车库的各路人马</span><span class="err">，</span><span class="nt">正式从</span><span class="err">“</span><span class="nt">机器人研究的阵地</span><span class="err">”</span><span class="nt">退下来</span><span class="err">，</span><span class="nt">吹响</span><span class="err">“</span><span class="nt">机器人商业化</span><span class="err">”</span><span class="nt">的号角</span><span class="err">。</span><span class="nt">经过8年努力</span><span class="err">，“</span><span class="nt">柳树车库系</span><span class="err">”</span><span class="nt">终于全力冲进了机器人市场</span><span class="err">。</span>

<span class="nt">正是这个时候</span><span class="err">，</span><span class="nt">笔者回国创建</span><span class="err">“</span><span class="nt">机器人运动与视觉实验室</span><span class="err">”。</span>

<span class="nt">微软在ROSCon2018展示了一款ROBOTIS</span><span class="w"> </span><span class="nt">Turtlebot</span><span class="w"> </span><span class="nt">3机器人</span><span class="err">，</span><span class="nt">运行于ROS</span><span class="w"> </span><span class="nt">Melodic</span><span class="w"> </span><span class="nt">Morenia版本上</span><span class="err">，</span><span class="nt">可以识别靠近的人</span><span class="err">。</span><span class="nt">该机器人运行新版的Windows</span><span class="w"> </span><span class="nt">10</span><span class="w"> </span><span class="nt">IoT</span><span class="w"> </span><span class="nt">Enterprise</span><span class="err">，</span><span class="nt">利用ROS节点进行通讯</span><span class="err">，</span><span class="nt">在Windows环境中利用硬件加速机器学习</span><span class="err">。</span><span class="nt">微软还展示了在Azure中运行的ROS仿真环境</span><span class="err">。</span>

<span class="nt">微软的介入</span><span class="err">，</span><span class="nt">预示着ROS生态系统的大变动</span><span class="err">。</span>

<span class="nt">关于编译系统</span><span class="err">：</span><span class="nt">相比</span><span class="w"> </span><span class="nt">ROS</span><span class="w"> </span><span class="nt">最初使用的</span><span class="w"> </span><span class="nt">rosbuild</span><span class="err">，</span><span class="nt">catkin</span><span class="w"> </span><span class="nt">在做了一些改进</span><span class="err">，</span><span class="nt">如支持</span><span class="w"> </span><span class="nt">CMake</span><span class="w"> </span><span class="nt">配置文件的自动生成</span><span class="err">。</span><span class="nt">ament的引入还主要是为ROS2考量的</span><span class="err">，</span><span class="nt">所以原有的ROS1还是用catkin</span><span class="w"> </span><span class="nt">作为编译系统</span><span class="err">，</span><span class="nt">ROS2</span><span class="w"> </span><span class="nt">则用</span><span class="w"> </span><span class="nt">ament</span><span class="err">。</span>

<span class="nt">Player</span><span class="w"> </span><span class="nt">是一个各种机器人设备的服务器</span><span class="err">，</span><span class="nt">客户端可以利用计算机网络</span><span class="err">，</span><span class="nt">通过</span><span class="w"> </span><span class="nt">Player</span><span class="w"> </span><span class="nt">控制机器人设备和传感器</span><span class="err">。</span>

<span class="nt">Stage是一个二维的机器人仿真环境</span><span class="err">。</span>

<span class="nt">2004</span><span class="w"> </span><span class="nt">年左右</span><span class="err">，</span><span class="nt">Gazebo</span><span class="err">，</span><span class="nt">这样一个三维的基于物理的机器人仿真环境</span><span class="err">，</span><span class="nt">加入到了</span><span class="w"> </span><span class="nt">Player项目中</span><span class="err">。</span><span class="nt">后来车库资助Gazebo的开发</span><span class="err">，</span><span class="nt">Gazebo独立成一个单独的项目</span><span class="err">。</span>

<span class="nt">Player和Stage的名称来源于莎士比亚戏剧</span><span class="err">“</span><span class="nt">皆大欢喜</span><span class="err">”</span><span class="nt">舞台剧中的独白</span><span class="err">。</span><span class="nt">Gazebo意思为舞台中带圆顶的露台</span><span class="err">。</span>


<span class="nt">在2015年</span><span class="err">，</span><span class="nt">DARPA举办了一届机器人挑战赛</span><span class="err">（</span><span class="nt">DARPA</span><span class="w"> </span><span class="nt">Robotics</span><span class="w"> </span><span class="nt">Challenge</span><span class="err">）。</span>

<span class="nt">23只进入决赛的队伍中</span><span class="err">，</span><span class="nt">有18支队伍使用ROS</span><span class="err">，</span><span class="nt">有14支队伍利用Gazebo进行仿真</span><span class="err">，</span><span class="nt">ROS取得非凡的成绩</span><span class="err">。</span>

<span class="nt">DARPA</span><span class="w"> </span><span class="nt">万万没想到机器人挑战赛是</span><span class="err">：</span><span class="nt">一只来自东方的力量</span><span class="err">，</span><span class="nt">压倒西方强队</span><span class="err">，</span><span class="nt">以媒体的说法是</span><span class="err">“</span><span class="nt">横空出世的一匹黑马</span><span class="err">”。</span><span class="nt">来自韩国高等科学技术学院</span><span class="w"> </span><span class="nt">KAIST21团队</span><span class="err">，</span><span class="nt">夺得了这项堪称有史以来最引人注目的机器人大赛的冠军</span><span class="err">，</span><span class="nt">夺走高达两百万美金的大奖</span><span class="err">。</span>

<span class="nt">DARPA受到刺激</span><span class="err">，“</span><span class="nt">我们投的钱去哪了</span><span class="err">”？</span>

<span class="nt">DARPA机器人挑战赛</span><span class="err">，</span><span class="nt">至今没有再举办的计划</span><span class="err">。</span>

<span class="nt">这次比赛集结了全球最顶尖的机器人</span><span class="err">，</span><span class="nt">Atlas</span><span class="err">、</span><span class="nt">HRP</span><span class="err">。</span><span class="nt">可以大多数机器人会出现摔倒现象</span><span class="err">，</span><span class="nt">而且无法爬起</span><span class="err">。</span><span class="nt">这是组委会没有充分预料到的</span><span class="err">。</span>

<span class="nt">2</span><span class="w"> </span><span class="nt">支中国队中有一个是来自香港大学的队伍</span><span class="err">，</span><span class="nt">另外就是</span><span class="err">“</span><span class="nt">中国科学院合肥物质科学研究院先进制造技术研究所</span><span class="err">”</span><span class="nt">一支队伍</span><span class="err">。</span><span class="nt">在决赛现场</span><span class="err">，</span><span class="nt">并没有看到合肥这支队伍的身影</span><span class="err">，</span><span class="nt">也就是说</span><span class="err">，</span><span class="nt">他们并没有真正参加这次比赛</span><span class="err">。</span><span class="nt">香港大学也没有完成比赛的任何一项</span><span class="err">，</span><span class="nt">在比赛中垫底</span><span class="err">。</span>

<span class="nt">引用邓小平南巡讲话</span><span class="err">：</span>

<span class="nt">在经济上呢</span><span class="err">？</span><span class="nt">则是近三十年来亚洲四小龙的崛起22</span><span class="err">。</span><span class="nt">这两年</span><span class="err">，</span><span class="nt">除了四小龙外</span><span class="err">，</span><span class="nt">泰国</span><span class="err">、</span><span class="nt">印尼</span><span class="err">、</span><span class="nt">马来西亚也迎头赶上</span><span class="err">。</span><span class="nt">四小龙和东南亚诸国的人有中国人聪明勤劳吗</span><span class="err">？</span><span class="nt">我看未必</span><span class="err">。……</span><span class="o">.</span><span class="err">”</span>

<span class="err">“……</span><span class="nt">我刚才提到二十世纪一个重大的经济现象就是四小龙的崛起</span><span class="err">。</span><span class="nt">中国怎么办</span><span class="err">？</span><span class="nt">我看先别赶英超美</span><span class="err">，</span><span class="nt">连日本我们也别去比</span><span class="err">。</span><span class="nt">中国当前的任务和出路就是向四小龙学习</span><span class="err">，</span><span class="nt">经过二三十年的奋斗实现小康</span><span class="err">。”</span>

<span class="nt">机器人这条路还有很多要学习的地方</span><span class="err">。</span>


<span class="nt">传统的工业机器人是预先编程好的</span><span class="err">，</span><span class="nt">并不能感知周围环境的变化</span><span class="err">，</span><span class="nt">自然也不能随着环境的变化进行智能的调整运动</span><span class="err">。</span>

<span class="nt">现在一个大趋势是</span><span class="err">，</span><span class="nt">越来越多机器人需要跟工人协同工作</span><span class="err">，</span><span class="nt">他们跟工人离得非常近</span><span class="err">，</span><span class="nt">共享同一个工作空间</span><span class="err">，</span><span class="nt">共同完成一项任务</span><span class="err">。</span>

<span class="nt">自动驾驶可能是机器人与人类协同工作最好的例子</span><span class="err">。</span>

<span class="nt">在拥挤的街道和高速公路上</span><span class="err">，</span><span class="nt">行驶中的自动驾驶汽车</span><span class="err">（</span><span class="nt">如果把他也归类为机器人话</span><span class="err">）</span><span class="nt">除了与其他车辆共享空间</span><span class="err">，</span><span class="nt">还必须与行人</span><span class="err">、</span><span class="nt">自行车共享空间</span><span class="err">，</span><span class="nt">相当于协同工作</span><span class="err">。</span>

<span class="nt">家庭服务机器人面临的环境更为复杂</span><span class="err">，</span><span class="nt">凌乱的家居</span><span class="err">，</span><span class="nt">椅子横七竖八</span><span class="err">，</span><span class="nt">走到哪里都有障碍物</span><span class="err">，</span><span class="nt">家庭成员进进出出</span><span class="err">，</span><span class="nt">不断闯入机器人的领地</span><span class="err">，</span><span class="nt">动态改变机器人的工作空间</span><span class="err">。</span>

<span class="nt">在这样复杂环境中运动的机器人</span><span class="err">，</span><span class="nt">必须清楚其周围环境</span><span class="err">，</span><span class="nt">必须避免周围的任何障碍物</span><span class="err">，</span><span class="nt">必须避免家庭成员发生碰撞</span><span class="err">。</span>


<span class="nt">有了移动平台</span><span class="err">，</span><span class="nt">有了摄像头</span><span class="err">，</span><span class="nt">还需要一个计算机来运行</span><span class="w"> </span><span class="nt">ROS</span><span class="w"> </span><span class="nt">的相关算法</span><span class="err">。</span><span class="nt">自助导航是</span><span class="w"> </span><span class="nt">ROS</span><span class="w"> </span><span class="nt">的精髓</span><span class="err">，</span><span class="nt">为了把这个精髓表现的淋漓精致</span><span class="err">，</span><span class="nt">Turtlebot这个平台必须能实现自主导航</span><span class="err">。</span>

<span class="nt">笔者所在的实验室最开始也是利用Turtlebot做研究的</span><span class="err">。</span><span class="nt">考虑到成本</span><span class="err">，</span><span class="nt">笔者从美国采购了iRobot</span><span class="w"> </span><span class="nt">Create</span><span class="err">，</span><span class="nt">学生们自己DIY了其他支持部件</span><span class="err">。</span><span class="nt">深度相机用的是华硕的Xtion</span><span class="w"> </span><span class="nt">Pro</span><span class="w"> </span><span class="nt">Live</span><span class="err">。</span>

<span class="nt">Turtle是海龟的意思</span><span class="err">，</span><span class="nt">Bot是机器人的缩写</span><span class="err">。</span><span class="nt">TurtleBot字面上讲</span><span class="err">，</span><span class="nt">就是</span><span class="err">“</span><span class="nt">海龟机器人</span><span class="err">”</span><span class="nt">的意思</span><span class="err">。</span>

<span class="nt">乌龟</span><span class="err">（</span><span class="nt">Turtle</span><span class="err">）</span><span class="nt">在机器人领域基本成了机器人的代名词了</span><span class="err">。</span><span class="nt">有</span><span class="w"> </span><span class="nt">TurtleBot</span><span class="w"> </span><span class="nt">这样的名字</span><span class="err">，</span><span class="nt">也就不足为奇了</span><span class="err">。</span>

<span class="nt">TurtleBot的硬件包括扫地机扩展的运动底盘</span><span class="w"> </span><span class="nt">iRobot</span><span class="w"> </span><span class="nt">Create</span><span class="err">、</span><span class="nt">RGB-D相机</span><span class="w"> </span><span class="nt">Kinect</span><span class="err">、</span><span class="nt">一个笔记本</span><span class="err">、</span><span class="nt">电池和支撑架</span><span class="err">。</span><span class="nt">在笔记本上安装</span><span class="w"> </span><span class="nt">ROS</span><span class="w"> </span><span class="nt">后</span><span class="err">，</span><span class="nt">就可以实现</span><span class="w"> </span><span class="nt">3D</span><span class="w"> </span><span class="nt">导航</span><span class="err">、</span><span class="nt">跟随等功能</span><span class="err">。</span>

<span class="nt">主要步骤有</span><span class="err">：</span><span class="nt">准备硬件</span><span class="err">、</span><span class="nt">软件</span><span class="err">（</span><span class="nt">ubuntu</span><span class="err">、</span><span class="nt">ros</span><span class="err">、</span><span class="nt">相机驱动</span><span class="err">、</span><span class="nt">键盘控制</span><span class="err">、</span><span class="nt">游戏杆控制</span><span class="err">、</span><span class="nt">跟随</span><span class="err">、</span><span class="nt">mapping</span><span class="w"> </span><span class="nt">SLAM</span><span class="err">、</span><span class="nt">amcl自主导航</span><span class="err">）</span>

<span class="o">**</span><span class="nt">下层</span><span class="err">：</span><span class="nt">电池</span><span class="err">、</span><span class="nt">电机</span><span class="err">、</span><span class="nt">电控</span><span class="err">；</span><span class="w">  </span><span class="nt">上层</span><span class="err">：</span><span class="nt">激光雷达</span><span class="err">、</span><span class="nt">IMU</span><span class="err">、</span><span class="nt">嵌入式AI平台</span><span class="err">。</span>
</code></pre></div>

<p>柳树车库系：</p>
<div class="codehilite"><pre><span></span><code>从“柳树车库”直接衍生出的公司正在改变着世界。一些前期的公司包括：

hiDOF：机器人与自动化软件咨询公司，2013被Google收购。

IPI（Industrial Perception Inc.）：利用视觉辅助工业机械臂搬运货物，2013被Google收购。

OpenCV：一家非盈利机构，开发开源视觉和机器学习算法。

PCL：一家非盈利机构，开发点云处理算法。

OPF（Open Perception Foundation）：一家非盈利机构，致力于 2D/3D 数据的处理。

OSRF（Open Source Robotics Foundation）：一家非盈利机构，致力于机器人开源软件的研究、教育、产品开发。

Open Robotics：由 OSRF创立的一家盈利机构，致力于机器人开源软件的对外服务、软件开发、机器人开发咨询服务。

Redwood Robotics：低成本协作机械臂，2013年被Google收购.

Suitable Technologies：远程遥控机器人beam。

Unbounded Robotics：开发低成本移动机器人平台。

Fetch Robotics：由 Unbounded Robotics 团队重新打造的一款面向仓储物流的移动机器人平台。

世界上最庞大的机器人派系“柳树车库系”在硅谷形成了，这里有商业巨子、优秀的企业家、专业的机器人工程师，他们聚集强大的力量，融合各种资源和技术：计算机视觉、运动规划，努力打造完成各种复杂任务的机器人。

在机器人领域，无处不在的“柳树车库系”的影响。离开柳树车库的员工加入了各种机器人团队：如Google的机器人团队、Bosch自动驾驶团队、Tango 智能手机3D扫描团队等。也有些人回到大学，成为了自动驾驶车辆开发者、无人机的研究者。

柳树车库和ROS的经历，正是我们看到的硅谷的真实故事，跌宕起伏。“柳树车库系”正以无法估量的力量影响整个机器人世界。柳树车库的人们坚信，他们已经开垦了荒芜的土地，培育了优质的土壤，播撒了繁多的种子，它们定会生根、发芽，最终开花、结果。

人类社会正在快速地向前发展，机器人行业会不会成为下一个焦点，每个人都有自己的答案。但是不管怎么样，机器人领域一直在不断的革新。

ROS 作为一个开源的基础机器人软件系统，毫无疑问会成为这场变革中凶猛的助推剂。我们看到越来越多的初创公司转向 ROS，并利用 ROS 提供的完善的软件系统快速地搭建起机器人平台。

越来越多的传统大公司也注意到这一新兴的变化，他们的产品也开始支持 ROS。若干年后， ROS 将毫无疑问成为机器人工程师的必备技能，机器人领域的从业人员没有人能回避ROS。

所有的这一切，都昭示着ROS有着光明的前途。
</code></pre></div>

<h2 id="ros_9">ROS进阶探索</h2>
<h3 id="ros_10">一、ROS简介</h3>
<h6 id="ros_11">ROS设计目标</h6>
<p>ROS是开源的，是用于机器人的一种后操作系统，或者说次级操作系统。它提供类似操作系统所提供的功能，包含硬件抽象描述、底层驱动程序管理、共用功能的执行、程序间的消息传递、程序发行包管理，它也提供一些工具程序和库用于获取、建立、编写和运行多机整合的程序。</p>
<p>ROS的首要设计目标是在机器人研发领域提高代码复用率。ROS是一种分布式处理框架（又名Nodes）。这使可执行文件能被单独设计，并且在运行时松散耦合。这些过程可以封装到数据包（Packages）和堆栈（Stacks）中，以便于共享和分发。ROS还支持代码库的联合系统。使得协作亦能被分发。这种从文件系统级别到社区一级的设计让独立地决定发展和实施工作成为可能。上述所有功能都能由ROS的基础工具实现。</p>
<h6 id="ros_12">ROS特点</h6>
<p>ROS的运行架构是一种使用ROS通信模块实现模块间P2P的松耦合的网络连接的处理架构，它执行若干种类型的通讯，包括基于服务的同步RPC（远程过程调用）通讯、基于Topic的异步数据流通讯，还有参数服务器上的数据存储。但是ROS本身并没有实时性。</p>
<p>ROS的主要特点可以归纳为以下几条：      </p>
<p>1.点对点设计   <br />
一个使用ROS的系统包括一系列进程，这些进程存在于多个不同的主机并且在运行过程中通过端对端的拓扑结构进行联系。虽然基于中心服务器的那些软件框架也可以实现多进程和多主机的优势，但是在这些框架中，当各电脑通过不同的网络进行连接时，中心数据服务器就会发生问题。</p>
<p>ROS的点对点设计以及服务和节点管理器等机制可以分散由计算机视觉和语音识别等功能带来的实时计算压力，能够适应多机器人遇到的挑战。</p>
<p>2.多语言支持   <br />
在写代码的时候，许多编程者会比较偏向某一些编程语言。这些偏好是个人在每种语言的编程时间、调试效果、语法、执行效率以及各种技术和文化的原因导致的结果。为了解决这些问题，我们将ROS设计成了语言中立性的框架结构。ROS现在支持许多种不同的语言，例如C++、Python、Octave和LISP，也包含其他语言的多种接口实现。</p>
<p>ROS的特殊性主要体现在消息通讯层，而不是更深的层次。端对端的连接和配置利用XML-RPC机制进行实现，XML-RPC也包含了大多数主要语言的合理实现描述。我们希望ROS能够利用各种语言实现的更加自然，更符合各种语言的语法约定，而不是基于C语言给各种其他语言提供实现接口。然而，在某些情况下利用已经存在的库封装后支持更多新的语言是很方便的，比如Octave的客户端就是通过C++的封装库进行实现的。</p>
<p>为了支持交叉语言，ROS利用了简单的、语言无关的接口定义语言去描述模块之间的消息传送。接口定义语言使用了简短的文本去描述每条消息的结构，也允许消息的合成。</p>
<p>3.精简与集成   <br />
为了应对机器人软件复杂和中间层混乱的趋势，我们鼓励将所有的驱动和算法逐渐发展成为和ROS没有依赖性单独的库。ROS建立的系统具有模块化的特点，各模块中的代码可以单独编译，而且编译使用的CMake工具使它很容易的就实现精简的理念。ROS基本将复杂的代码封装在库里，只是创建了一些小的应用程序为ROS显示库的功能，就允许了对简单的代码超越原型进行移植和重新使用。作为一种新加入的有优势，单元测试当代码在库中分散后也变得非常的容易，一个单独的测试程序可以测试库中很多的特点。</p>
<p>ROS利用了很多现在已经存在的开源项目的代码，比如说从Player项目中借鉴了驱动、运动控制和仿真方面的代码，从OpenCV中借鉴了视觉算法方面的代码，从OpenRAVE借鉴了规划算法的内容，还有很多其他的项目。在每一个实例中，ROS都用来显示多种多样的配置选项以及和各软件之间进行数据通信，也同时对它们进行微小的包装和改动。ROS可以不断的从社区维护中进行升级，包括从其他的软件库、应用补丁中升级ROS的源代码。</p>
<p>4.工具包丰富   <br />
为了管理复杂的ROS软件框架，我们利用了大量的小工具去编译和运行多种多样的ROS组建，从而设计成了内核，而不是构建一个庞大的开发和运行环境。</p>
<p>5.免费并且开源  <br />
ROS所有的源代码都是公开发布的。我们相信这将必定促进ROS软件各层次的调试，不断的改正错误。虽然像Microsoft Robotics Studio和Webots这样的非开源软件也有很多值得赞美的属性，但是我们认为一个开源的平台也是无可为替代的。当硬件和各层次的软件同时设计和调试的时候这一点是尤其真实的。</p>
<h3 id="smart_car">二、创建一个smart_car</h3>
<p>智能车smart_car全程会用仿真的方式进行，因此有一台电脑就可以学习ROS进阶。</p>
<h6 id="1smartcar">1.创建简单的smartcar模型</h6>
<p>这一节我们将建立一个简单的智能车机器人smartcar，为后面建立复杂机器人打下基础。</p>
<p><strong>URDF相关工具安装：</strong> 
安装urdf_tutorial，可以使用其中的例子</p>
<p><code>sudo apt-get install ros-noetic-urdf-tutorial</code>  </p>
<p>安装liburdfdom-tools，提供对urdf文件的检查     </p>
<p><code>sudo apt-get install liburdfdom-tools</code></p>
<p><strong>创建硬件描述包：</strong><code>catkin_create_pkg smartcar_description  std_msgs rospy roscpp urdf</code></p>
<p><strong>建立urdf文件：</strong></p>
<p>在smartcar_description文件夹下建立urdf文件夹 $mkdir -p urdf ，创建智能车的描述文件smartcar.urdf，描述代码如下：</p>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span><span class="w">  </span>

<span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;smartcar&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.25 .16 .05&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 .8 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="nt">&lt;/link&gt;</span><span class="w">  </span>


<span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_front_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_front_wheel_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;right_front_wheel&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 0&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 0.1 -0.03&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;joint_properties</span><span class="w"> </span><span class="na">damping=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">friction=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_back_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_back_wheel_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;right_back_wheel&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 0&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 -0.1 -0.03&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;joint_properties</span><span class="w"> </span><span class="na">damping=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">friction=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="nt">&lt;/joint&gt;</span><span class="w">  </span>


<span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_front_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_front_wheel_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;left_front_wheel&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 0&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0.1 -0.03&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;joint_properties</span><span class="w"> </span><span class="na">damping=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">friction=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_back_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_back_wheel_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;left_back_wheel&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 0&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 -0.1 -0.03&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;joint_properties</span><span class="w"> </span><span class="na">damping=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">friction=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;.02 .03 .03&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;white&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">          </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 1 1 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tobox&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;head&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>

<span class="nt">&lt;/robot&gt;</span>
</code></pre></div>

<p><strong>建立launch命令文件：</strong>     <br />
在smartcar_description文件夹下建立launch文件夹mkdir -p launch，创建智能车的描述文件 base.urdf.rviz.launch，描述代码如下：</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;launch&gt;</span><span class="w">     </span>

<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;model&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">      </span>

<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gui&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;False&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>

<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">textfile=</span><span class="s">&quot;$(find smartcar_description)/urdf/smartcar.urdf&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">      </span>

<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_gui&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg gui)&quot;</span><span class="nt">/&gt;</span><span class="w">     </span>

<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;/node&gt;</span><span class="w">      </span>

<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">      </span>

<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find smartcar_description)/rviz/smartcar.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="nt">&lt;/launch&gt;</span>
</code></pre></div>

<p><strong>建立rviz文件：</strong> <br />
在smartcar_description文件夹下建立rviz文件夹mkdir -p rviz，创建智能车的描述文件 smartcar.rviz(后面也可以自己改)，描述代码如下：</p>
<div class="codehilite"><pre><span></span><code><span class="n">Panels</span><span class="p">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Displays</span>
<span class="w">    </span><span class="n">Help</span><span class="w"> </span><span class="n">Height</span><span class="p">:</span><span class="w"> </span><span class="mi">78</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Displays</span>
<span class="w">    </span><span class="n">Property</span><span class="w"> </span><span class="n">Tree</span><span class="w"> </span><span class="n">Widget</span><span class="p">:</span>
<span class="w">      </span><span class="n">Expanded</span><span class="p">:</span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Global</span><span class="w"> </span><span class="n">Options1</span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Status1</span>
<span class="w">      </span><span class="n">Splitter</span><span class="w"> </span><span class="n">Ratio</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">    </span><span class="n">Tree</span><span class="w"> </span><span class="n">Height</span><span class="p">:</span><span class="w"> </span><span class="mi">353</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Selection</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Selection</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Tool</span><span class="w"> </span><span class="n">Properties</span>
<span class="w">    </span><span class="n">Expanded</span><span class="p">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="mi">2</span><span class="n">D</span><span class="w"> </span><span class="n">Pose</span><span class="w"> </span><span class="n">Estimate1</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="mi">2</span><span class="n">D</span><span class="w"> </span><span class="n">Nav</span><span class="w"> </span><span class="n">Goal1</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Publish</span><span class="w"> </span><span class="n">Point1</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Tool</span><span class="w"> </span><span class="n">Properties</span>
<span class="w">    </span><span class="n">Splitter</span><span class="w"> </span><span class="n">Ratio</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5886790156364441</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Views</span>
<span class="w">    </span><span class="n">Expanded</span><span class="p">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Current</span><span class="w"> </span><span class="n">View1</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Views</span>
<span class="w">    </span><span class="n">Splitter</span><span class="w"> </span><span class="n">Ratio</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Time</span>
<span class="w">    </span><span class="n">Experimental</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Time</span>
<span class="w">    </span><span class="n">SyncMode</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">SyncSource</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz_plugin_tutorials</span><span class="o">/</span><span class="n">Teleop</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Teleop</span>
<span class="w">    </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="n">Preferences</span><span class="p">:</span>
<span class="w">  </span><span class="n">PromptSaveOnExit</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="n">Toolbars</span><span class="p">:</span>
<span class="w">  </span><span class="n">toolButtonStyle</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="n">Visualization</span><span class="w"> </span><span class="n">Manager</span><span class="p">:</span>
<span class="w">  </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">  </span><span class="n">Displays</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">      </span><span class="n">Cell</span><span class="w"> </span><span class="n">Size</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Grid</span>
<span class="w">      </span><span class="nb nb-Type">Color</span><span class="p">:</span><span class="w"> </span><span class="mi">160</span><span class="p">;</span><span class="w"> </span><span class="mi">160</span><span class="p">;</span><span class="w"> </span><span class="mi">164</span>
<span class="w">      </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Line</span><span class="w"> </span><span class="n">Style</span><span class="p">:</span>
<span class="w">        </span><span class="n">Line</span><span class="w"> </span><span class="n">Width</span><span class="p">:</span><span class="w"> </span><span class="mf">0.029999999329447746</span>
<span class="w">        </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="n">Lines</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Grid</span>
<span class="w">      </span><span class="n">Normal</span><span class="w"> </span><span class="n">Cell</span><span class="w"> </span><span class="n">Count</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">Offset</span><span class="p">:</span>
<span class="w">        </span><span class="n">X</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">Y</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">Z</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="nb nb-Type">Plane</span><span class="p">:</span><span class="w"> </span><span class="n">XY</span>
<span class="w">      </span><span class="nb nb-Type">Plane</span><span class="w"> </span><span class="n">Cell</span><span class="w"> </span><span class="n">Count</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">      </span><span class="n">Reference</span><span class="w"> </span><span class="n">Frame</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Fixed</span><span class="w"> </span><span class="n">Frame</span><span class="o">&gt;</span>
<span class="w">      </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Axes</span><span class="w"> </span><span class="n">Length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Axes</span><span class="w"> </span><span class="n">Radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10000000149011612</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Pose</span>
<span class="w">      </span><span class="nb nb-Type">Color</span><span class="p">:</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span><span class="w"> </span><span class="mi">25</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Head</span><span class="w"> </span><span class="n">Length</span><span class="p">:</span><span class="w"> </span><span class="mf">0.30000001192092896</span>
<span class="w">      </span><span class="n">Head</span><span class="w"> </span><span class="n">Radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10000000149011612</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Pose</span>
<span class="w">      </span><span class="n">Queue</span><span class="w"> </span><span class="n">Size</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">      </span><span class="n">Shaft</span><span class="w"> </span><span class="n">Length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Shaft</span><span class="w"> </span><span class="n">Radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05000000074505806</span>
<span class="w">      </span><span class="n">Shape</span><span class="p">:</span><span class="w"> </span><span class="n">Arrow</span>
<span class="w">      </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">move_base_simple</span><span class="o">/</span><span class="n">goal</span>
<span class="w">      </span><span class="n">Unreliable</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">RobotModel</span>
<span class="w">      </span><span class="n">Collision</span><span class="w"> </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Links</span><span class="p">:</span>
<span class="w">        </span><span class="n">All</span><span class="w"> </span><span class="n">Links</span><span class="w"> </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">Expand</span><span class="w"> </span><span class="n">Joint</span><span class="w"> </span><span class="n">Details</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="n">Expand</span><span class="w"> </span><span class="n">Link</span><span class="w"> </span><span class="n">Details</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="n">Expand</span><span class="w"> </span><span class="n">Tree</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="n">Link</span><span class="w"> </span><span class="n">Tree</span><span class="w"> </span><span class="n">Style</span><span class="p">:</span><span class="w"> </span><span class="n">Links</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">Alphabetic</span><span class="w"> </span><span class="n">Order</span>
<span class="w">        </span><span class="n">base_link</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">head</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">left_back_wheel</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">left_front_wheel</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">right_back_wheel</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">right_front_wheel</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">RobotModel</span>
<span class="w">      </span><span class="n">Robot</span><span class="w"> </span><span class="n">Description</span><span class="p">:</span><span class="w"> </span><span class="n">robot_description</span>
<span class="w">      </span><span class="n">TF</span><span class="w"> </span><span class="n">Prefix</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">      </span><span class="n">Update</span><span class="w"> </span><span class="n">Interval</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Visual</span><span class="w"> </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Axes</span>
<span class="w">      </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Axes</span>
<span class="w">      </span><span class="n">Radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10000000149011612</span>
<span class="w">      </span><span class="n">Reference</span><span class="w"> </span><span class="n">Frame</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Fixed</span><span class="w"> </span><span class="n">Frame</span><span class="o">&gt;</span>
<span class="w">      </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">  </span><span class="n">Global</span><span class="w"> </span><span class="n">Options</span><span class="p">:</span>
<span class="w">    </span><span class="n">Background</span><span class="w"> </span><span class="nb nb-Type">Color</span><span class="p">:</span><span class="w"> </span><span class="mi">48</span><span class="p">;</span><span class="w"> </span><span class="mi">48</span><span class="p">;</span><span class="w"> </span><span class="mi">48</span>
<span class="w">    </span><span class="n">Default</span><span class="w"> </span><span class="n">Light</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="n">Fixed</span><span class="w"> </span><span class="n">Frame</span><span class="p">:</span><span class="w"> </span><span class="n">base_link</span>
<span class="w">    </span><span class="n">Frame</span><span class="w"> </span><span class="n">Rate</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span>
<span class="w">  </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">root</span>
<span class="w">  </span><span class="n">Tools</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Interact</span>
<span class="w">      </span><span class="n">Hide</span><span class="w"> </span><span class="n">Inactive</span><span class="w"> </span><span class="n">Objects</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">MoveCamera</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Select</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">FocusCamera</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Measure</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">SetInitialPose</span>
<span class="w">      </span><span class="n">Theta</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="n">deviation</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2617993950843811</span>
<span class="w">      </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">initialpose</span>
<span class="w">      </span><span class="n">X</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="n">deviation</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">      </span><span class="n">Y</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="n">deviation</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">SetGoal</span>
<span class="w">      </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">move_base_simple</span><span class="o">/</span><span class="n">goal</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">PublishPoint</span>
<span class="w">      </span><span class="n">Single</span><span class="w"> </span><span class="n">click</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">clicked_point</span>
<span class="w">  </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">  </span><span class="n">Views</span><span class="p">:</span>
<span class="w">    </span><span class="n">Current</span><span class="p">:</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Orbit</span>
<span class="w">      </span><span class="n">Distance</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5815290212631226</span>
<span class="w">      </span><span class="n">Enable</span><span class="w"> </span><span class="n">Stereo</span><span class="w"> </span><span class="n">Rendering</span><span class="p">:</span>
<span class="w">        </span><span class="n">Stereo</span><span class="w"> </span><span class="n">Eye</span><span class="w"> </span><span class="n">Separation</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05999999865889549</span>
<span class="w">        </span><span class="n">Stereo</span><span class="w"> </span><span class="n">Focal</span><span class="w"> </span><span class="n">Distance</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">Swap</span><span class="w"> </span><span class="n">Stereo</span><span class="w"> </span><span class="n">Eyes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Field</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">View</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7853981852531433</span>
<span class="w">      </span><span class="n">Focal</span><span class="w"> </span><span class="n">Point</span><span class="p">:</span>
<span class="w">        </span><span class="n">X</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mf">0.06951690465211868</span>
<span class="w">        </span><span class="n">Y</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mf">0.05873965844511986</span>
<span class="w">        </span><span class="n">Z</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1176082193851471</span>
<span class="w">      </span><span class="n">Focal</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="n">Fixed</span><span class="w"> </span><span class="n">Size</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Focal</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="n">Size</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05000000074505806</span>
<span class="w">      </span><span class="n">Invert</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">Axis</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Current</span><span class="w"> </span><span class="n">View</span>
<span class="w">      </span><span class="n">Near</span><span class="w"> </span><span class="n">Clip</span><span class="w"> </span><span class="n">Distance</span><span class="p">:</span><span class="w"> </span><span class="mf">0.009999999776482582</span>
<span class="w">      </span><span class="n">Pitch</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6004970073699951</span>
<span class="w">      </span><span class="n">Target</span><span class="w"> </span><span class="n">Frame</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Fixed</span><span class="w"> </span><span class="n">Frame</span><span class="o">&gt;</span>
<span class="w">      </span><span class="n">Yaw</span><span class="p">:</span><span class="w"> </span><span class="mf">4.431729316711426</span>
<span class="w">    </span><span class="n">Saved</span><span class="p">:</span><span class="w"> </span><span class="o">~</span>
<span class="n">Window</span><span class="w"> </span><span class="n">Geometry</span><span class="p">:</span>
<span class="w">  </span><span class="n">Displays</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Height</span><span class="p">:</span><span class="w"> </span><span class="mi">650</span>
<span class="w">  </span><span class="n">Hide</span><span class="w"> </span><span class="n">Left</span><span class="w"> </span><span class="n">Dock</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Hide</span><span class="w"> </span><span class="n">Right</span><span class="w"> </span><span class="n">Dock</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">QMainWindow</span><span class="w"> </span><span class="n">State</span><span class="p">:</span><span class="w"> </span><span class="mi">000000</span><span class="n">ff00000000fd000000040000000000000156000001ecfc0200000009fb0000001e0054006f006f006c002000500072006f007000650072007400690065007302000001d20000014c00000185000000a3fb000000120056006900650077007300200054006f006f02000001df000002110000018500000122fb000000200054006f006f006c002000500072006f0070006500720074006900650073003203000002880000011d000002210000017afb0000001200530065006c0065006300740069006f006e000000003d000000a10000005c00fffffffb000000100044006900730070006c006100790073010000003d000001ec000000c900fffffffb0000002000730065006c0065006300740069006f006e00200062007500660066006500720200000138000000aa0000023a00000294fb00000014005700690064006500530074006500720065006f02000000e6000000d2000003ee0000030bfb0000000c004b0069006e0065006300740200000186000001060000030c00000261fb0000000c00540065006c0065006f00700000000192000000970000004700ffffff000000010000010f000001ecfc0200000003fb0000001e0054006f006f006c002000500072006f00700065007200740069006500730100000041000000780000000000000000fb0000000a00560069006500770073010000003d000001ec000000a400fffffffb0000001200530065006c0065006300740069006f006e010000025a000000b200000000000000000000000200000490000000a9fc0100000001fb0000000a00560069006500770073030000004e00000080000002e10000019700000003000005560000003efc0100000002fb0000000800540069006d0065010000000000000556000002eb00fffffffb0000000800540069006d00650100000000000004500000000000000000000002e5000001ec00000004000000040000000800000008fc0000000100000002000000010000000a0054006f006f006c00730100000000ffffffff0000000000000000</span>
<span class="w">  </span><span class="n">Selection</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Teleop</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Time</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Tool</span><span class="w"> </span><span class="n">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Views</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Width</span><span class="p">:</span><span class="w"> </span><span class="mi">1366</span>
<span class="w">  </span><span class="n">X</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="n">Y</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span>
</code></pre></div>

<p>运行模型：<code>roslaunch  smartcar_description  base.urdf.rviz.launch  gui:=true</code></p>
<p>加载键盘控制器：<code>rosrun joint_state_publisher_gui joint_state_publisher_gui</code></p>
<h6 id="2smartcar">2.使用smartcar进行仿真</h6>
<p><strong>安装相关工具包：</strong></p>
<p>安装 arbotix_python ：<code>sudo apt-get install ros-noetic-arbotix</code></p>
<p><strong>模型完善：</strong></p>
<p>之前我们使用的都是urdf文件格式的模型，在很多情况下，ROS对urdf文件的支持并不是很好，使用宏定义的.xacro文件兼容性更好，扩展性也更好。所以我们把之前的urdf文件重新整理编写成.xacro文件。</p>
<p>.xacro文件主要分为三部分：</p>
<p>1、机器人主体smartcar_body.urdf.xacro</p>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span><span class="w">  </span>
<span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;smartcar&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://ros.org/wiki/xacro&quot;</span><span class="nt">&gt;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;M_PI&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3.14159&quot;</span><span class="nt">/&gt;</span><span class="w">    </span>
<span class="w">  </span><span class="cm">&lt;!-- Macro for SmartCar body. Including Gazebo extensions, but does not include Kinect --&gt;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;$(find smartcar_description)/urdf/gazebo.urdf.xacro&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_x&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.33&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_y&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.33&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;smartcar_body&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;inertial&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0.055&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;/inertial&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>
<span class="w">        </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.25 .16 .05&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0.055&quot;</span><span class="nt">/&gt;</span><span class="w"> </span>
<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 .8 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>
<span class="w">   </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>
<span class="w">   </span><span class="nt">&lt;collision&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0.055&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>
<span class="w">        </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.25 .16 .05&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;/collision&gt;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>



<span class="w"> </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_front_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;inertial&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;origin</span><span class="w">  </span><span class="na">xyz=</span><span class="s">&quot;0.08 0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">       </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;/inertial&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>
<span class="w">        </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span><span class="w">  </span>
<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;collision&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>
<span class="w">         </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;/collision&gt;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_l_wheel_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;left_front_wheel&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&lt;joint_properties</span><span class="w"> </span><span class="na">damping=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">friction=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_front_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;inertial&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 -0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">       </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/inertial&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;collision&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 -0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">         </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/collision&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_r_wheel_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;right_front_wheel&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 -0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;joint_properties</span><span class="w"> </span><span class="na">damping=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">friction=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w"> </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>



<span class="w"> </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_back_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;inertial&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">       </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/inertial&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">   </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">   </span><span class="nt">&lt;collision&gt;</span><span class="w">  </span>

<span class="w">       </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">         </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/collision&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_back_wheel_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;left_back_wheel&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;joint_properties</span><span class="w"> </span><span class="na">damping=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">friction=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_back_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;inertial&gt;</span><span class="w">  </span>

<span class="w">       </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 -0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">       </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">       </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/inertial&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">   </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">   </span><span class="nt">&lt;collision&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 -0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">         </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/collision&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>





<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_back_wheel_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;right_back_wheel&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 1.57075 1.57075&quot;</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 -0.08 0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;joint_properties</span><span class="w"> </span><span class="na">damping=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">friction=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;inertial&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 0 0.08&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/inertial&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;visual&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;.02 .03 .03&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;white&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 1 1 1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">     </span><span class="nt">&lt;/visual&gt;</span><span class="w">  </span>

<span class="w">     </span><span class="nt">&lt;collision&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 0 0.08&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;geometry&gt;</span><span class="w">  </span>

<span class="w">         </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;.02&quot;</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">      </span><span class="nt">&lt;/geometry&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/collision&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/link&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tobox&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;head&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 0 0.08&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/joint&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/xacro:macro&gt;</span><span class="w">  </span>



<span class="nt">&lt;/robot&gt;</span>
</code></pre></div>

<p>2、gazebo属性部分 gazebo.urdf.xacro</p>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span><span class="w">  </span>
<span class="nt">&lt;robot</span><span class="w"> </span><span class="na">xmlns:controller=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##controller&quot;</span><span class="w">   </span>

<span class="w">    </span><span class="na">xmlns:interface=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##interface&quot;</span><span class="w">   </span>

<span class="w">    </span><span class="na">xmlns:sensor=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##sensor&quot;</span><span class="w">   </span>

<span class="w">    </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://ros.org/wiki/xacro&quot;</span><span class="w">   </span>

<span class="w">    </span><span class="na">name=</span><span class="s">&quot;smartcar_gazebo&quot;</span><span class="nt">&gt;</span><span class="w">  </span>



<span class="cm">&lt;!-- ASUS Xtion PRO camera for simulation --&gt;</span><span class="w">  </span>

<span class="cm">&lt;!-- gazebo_ros_wge100 plugin is in kt2_gazebo_plugins package --&gt;</span><span class="w">  </span>

<span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;smartcar_sim&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/Blue<span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w">  </span>



<span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;right_front_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/FlatBlack<span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;right_back_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/FlatBlack<span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;left_front_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/FlatBlack<span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w">   </span>

<span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;left_back_wheel&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/FlatBlack<span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/White<span class="nt">&lt;/material&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w">  </span>

<span class="nt">&lt;/xacro:macro&gt;</span><span class="w">  </span>

<span class="nt">&lt;/robot&gt;</span>
</code></pre></div>

<p>3、主文件 smartcar.urdf.xacro</p>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span><span class="w">  </span>
<span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;smartcar&quot;</span><span class="w">    </span>

<span class="w">    </span><span class="na">xmlns:xi=</span><span class="s">&quot;http://www.w3.org/2001/XInclude&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:gazebo=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##gz&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:model=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##model&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:sensor=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##sensor&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:body=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##body&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:geom=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##geom&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:joint=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##joint&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:controller=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##controller&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:interface=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##interface&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:rendering=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##rendering&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:renderable=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##renderable&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:physics=</span><span class="s">&quot;http://playerstage.sourceforge.net/gazebo/xmlschema/##physics&quot;</span><span class="w">  </span>

<span class="w">    </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://ros.org/wiki/xacro&quot;</span><span class="nt">&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;$(find smartcar_description)/urdf/smartcar_body.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>


<span class="w">  </span><span class="cm">&lt;!-- Body of SmartCar, with plates, standoffs and Create (including sim sensors) --&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;xacro:smartcar_body/&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;xacro:smartcar_sim/&gt;</span><span class="w">  </span>
<span class="nt">&lt;/robot&gt;</span>
</code></pre></div>

<p><strong>创建lanuch文件smartcar_display.rviz.launch：</strong></p>
<p>在launch文件中要启动节点和模拟器。</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;launch&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;/use_sim_time&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Load the URDF/Xacro model of our robot --&gt;</span>
<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;urdf_file&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;$(find xacro)/xacro &#39;$(find smartcar_description)/urdf/smartcar.urdf.xacro&#39;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gui&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;$(arg urdf_file)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_gui&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg gui)&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;arbotix&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;arbotix_python&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;arbotix_driver&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find smartcar_description)/config/smartcar_arbotix.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sim&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/node&gt;</span>

<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;/node&gt;</span>

<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;publish_frequency&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;20.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/node&gt;</span>

<span class="w">     </span><span class="cm">&lt;!-- We need a static transforms for the wheels --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;tf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_left_wheel_broadcaster&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;0 0 0 0 0 0 /base_link /left_front_link 100&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;tf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_right_wheel_broadcaster&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;0 0 0 0 0 0 /base_link /right_front_link 100&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find smartcar_description)/rviz/smartcar_xacro.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</code></pre></div>

<p><strong>创建rviz文件smartcar_xacro.rviz：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Panels</span><span class="p">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Displays</span>
<span class="w">    </span><span class="n">Help</span><span class="w"> </span><span class="n">Height</span><span class="p">:</span><span class="w"> </span><span class="mi">78</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Displays</span>
<span class="w">    </span><span class="n">Property</span><span class="w"> </span><span class="n">Tree</span><span class="w"> </span><span class="n">Widget</span><span class="p">:</span>
<span class="w">      </span><span class="n">Expanded</span><span class="p">:</span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Global</span><span class="w"> </span><span class="n">Options1</span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Status1</span>
<span class="w">      </span><span class="n">Splitter</span><span class="w"> </span><span class="n">Ratio</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">    </span><span class="n">Tree</span><span class="w"> </span><span class="n">Height</span><span class="p">:</span><span class="w"> </span><span class="mi">353</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Selection</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Selection</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Tool</span><span class="w"> </span><span class="n">Properties</span>
<span class="w">    </span><span class="n">Expanded</span><span class="p">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="mi">2</span><span class="n">D</span><span class="w"> </span><span class="n">Pose</span><span class="w"> </span><span class="n">Estimate1</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="mi">2</span><span class="n">D</span><span class="w"> </span><span class="n">Nav</span><span class="w"> </span><span class="n">Goal1</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Publish</span><span class="w"> </span><span class="n">Point1</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Tool</span><span class="w"> </span><span class="n">Properties</span>
<span class="w">    </span><span class="n">Splitter</span><span class="w"> </span><span class="n">Ratio</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5886790156364441</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Views</span>
<span class="w">    </span><span class="n">Expanded</span><span class="p">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Current</span><span class="w"> </span><span class="n">View1</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Views</span>
<span class="w">    </span><span class="n">Splitter</span><span class="w"> </span><span class="n">Ratio</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Time</span>
<span class="w">    </span><span class="n">Experimental</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">    </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Time</span>
<span class="w">    </span><span class="n">SyncMode</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">SyncSource</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="n">Preferences</span><span class="p">:</span>
<span class="w">  </span><span class="n">PromptSaveOnExit</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="n">Toolbars</span><span class="p">:</span>
<span class="w">  </span><span class="n">toolButtonStyle</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="n">Visualization</span><span class="w"> </span><span class="n">Manager</span><span class="p">:</span>
<span class="w">  </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">  </span><span class="n">Displays</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">      </span><span class="n">Cell</span><span class="w"> </span><span class="n">Size</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Grid</span>
<span class="w">      </span><span class="nb nb-Type">Color</span><span class="p">:</span><span class="w"> </span><span class="mi">160</span><span class="p">;</span><span class="w"> </span><span class="mi">160</span><span class="p">;</span><span class="w"> </span><span class="mi">164</span>
<span class="w">      </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Line</span><span class="w"> </span><span class="n">Style</span><span class="p">:</span>
<span class="w">        </span><span class="n">Line</span><span class="w"> </span><span class="n">Width</span><span class="p">:</span><span class="w"> </span><span class="mf">0.029999999329447746</span>
<span class="w">        </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="n">Lines</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Grid</span>
<span class="w">      </span><span class="n">Normal</span><span class="w"> </span><span class="n">Cell</span><span class="w"> </span><span class="n">Count</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">Offset</span><span class="p">:</span>
<span class="w">        </span><span class="n">X</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">Y</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">Z</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="nb nb-Type">Plane</span><span class="p">:</span><span class="w"> </span><span class="n">XY</span>
<span class="w">      </span><span class="nb nb-Type">Plane</span><span class="w"> </span><span class="n">Cell</span><span class="w"> </span><span class="n">Count</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">      </span><span class="n">Reference</span><span class="w"> </span><span class="n">Frame</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Fixed</span><span class="w"> </span><span class="n">Frame</span><span class="o">&gt;</span>
<span class="w">      </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">RobotModel</span>
<span class="w">      </span><span class="n">Collision</span><span class="w"> </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Links</span><span class="p">:</span>
<span class="w">        </span><span class="n">All</span><span class="w"> </span><span class="n">Links</span><span class="w"> </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">Expand</span><span class="w"> </span><span class="n">Joint</span><span class="w"> </span><span class="n">Details</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="n">Expand</span><span class="w"> </span><span class="n">Link</span><span class="w"> </span><span class="n">Details</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="n">Expand</span><span class="w"> </span><span class="n">Tree</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="n">Link</span><span class="w"> </span><span class="n">Tree</span><span class="w"> </span><span class="n">Style</span><span class="p">:</span><span class="w"> </span><span class="n">Links</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">Alphabetic</span><span class="w"> </span><span class="n">Order</span>
<span class="w">        </span><span class="n">base_link</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">head</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">left_back_wheel</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">left_front_wheel</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">right_back_wheel</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">right_front_wheel</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Axes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Show</span><span class="w"> </span><span class="n">Trail</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">RobotModel</span>
<span class="w">      </span><span class="n">Robot</span><span class="w"> </span><span class="n">Description</span><span class="p">:</span><span class="w"> </span><span class="n">robot_description</span>
<span class="w">      </span><span class="n">TF</span><span class="w"> </span><span class="n">Prefix</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">      </span><span class="n">Update</span><span class="w"> </span><span class="n">Interval</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Visual</span><span class="w"> </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Angle</span><span class="w"> </span><span class="n">Tolerance</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10000000149011612</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Odometry</span>
<span class="w">      </span><span class="n">Covariance</span><span class="p">:</span>
<span class="w">        </span><span class="n">Orientation</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">          </span><span class="nb nb-Type">Color</span><span class="p">:</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span><span class="w"> </span><span class="mi">127</span>
<span class="w">          </span><span class="nb nb-Type">Color</span><span class="w"> </span><span class="n">Style</span><span class="p">:</span><span class="w"> </span><span class="n">Unique</span>
<span class="w">          </span><span class="n">Frame</span><span class="p">:</span><span class="w"> </span><span class="n">Local</span>
<span class="w">          </span><span class="n">Offset</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Scale</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">Position</span><span class="p">:</span>
<span class="w">          </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mf">0.30000001192092896</span>
<span class="w">          </span><span class="nb nb-Type">Color</span><span class="p">:</span><span class="w"> </span><span class="mi">204</span><span class="p">;</span><span class="w"> </span><span class="mi">51</span><span class="p">;</span><span class="w"> </span><span class="mi">204</span>
<span class="w">          </span><span class="n">Scale</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Keep</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Odometry</span>
<span class="w">      </span><span class="n">Position</span><span class="w"> </span><span class="n">Tolerance</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10000000149011612</span>
<span class="w">      </span><span class="n">Queue</span><span class="w"> </span><span class="n">Size</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">      </span><span class="n">Shape</span><span class="p">:</span>
<span class="w">        </span><span class="n">Alpha</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">Axes</span><span class="w"> </span><span class="n">Length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">Axes</span><span class="w"> </span><span class="n">Radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10000000149011612</span>
<span class="w">        </span><span class="nb nb-Type">Color</span><span class="p">:</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span><span class="w"> </span><span class="mi">25</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">Head</span><span class="w"> </span><span class="n">Length</span><span class="p">:</span><span class="w"> </span><span class="mf">0.30000001192092896</span>
<span class="w">        </span><span class="n">Head</span><span class="w"> </span><span class="n">Radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10000000149011612</span>
<span class="w">        </span><span class="n">Shaft</span><span class="w"> </span><span class="n">Length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">Shaft</span><span class="w"> </span><span class="n">Radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05000000074505806</span>
<span class="w">        </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="n">Arrow</span>
<span class="w">      </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">odom</span>
<span class="w">      </span><span class="n">Unreliable</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">  </span><span class="n">Enabled</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">  </span><span class="n">Global</span><span class="w"> </span><span class="n">Options</span><span class="p">:</span>
<span class="w">    </span><span class="n">Background</span><span class="w"> </span><span class="nb nb-Type">Color</span><span class="p">:</span><span class="w"> </span><span class="mi">48</span><span class="p">;</span><span class="w"> </span><span class="mi">48</span><span class="p">;</span><span class="w"> </span><span class="mi">48</span>
<span class="w">    </span><span class="n">Default</span><span class="w"> </span><span class="n">Light</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="n">Fixed</span><span class="w"> </span><span class="n">Frame</span><span class="p">:</span><span class="w"> </span><span class="n">odom</span>
<span class="w">    </span><span class="n">Frame</span><span class="w"> </span><span class="n">Rate</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span>
<span class="w">  </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">root</span>
<span class="w">  </span><span class="n">Tools</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Interact</span>
<span class="w">      </span><span class="n">Hide</span><span class="w"> </span><span class="n">Inactive</span><span class="w"> </span><span class="n">Objects</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">MoveCamera</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Select</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">FocusCamera</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Measure</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">SetInitialPose</span>
<span class="w">      </span><span class="n">Theta</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="n">deviation</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2617993950843811</span>
<span class="w">      </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">initialpose</span>
<span class="w">      </span><span class="n">X</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="n">deviation</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">      </span><span class="n">Y</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="n">deviation</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">SetGoal</span>
<span class="w">      </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">move_base_simple</span><span class="o">/</span><span class="n">goal</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">PublishPoint</span>
<span class="w">      </span><span class="n">Single</span><span class="w"> </span><span class="n">click</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Topic</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">clicked_point</span>
<span class="w">  </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">  </span><span class="n">Views</span><span class="p">:</span>
<span class="w">    </span><span class="n">Current</span><span class="p">:</span>
<span class="w">      </span><span class="n">Class</span><span class="p">:</span><span class="w"> </span><span class="n">rviz</span><span class="o">/</span><span class="n">Orbit</span>
<span class="w">      </span><span class="n">Distance</span><span class="p">:</span><span class="w"> </span><span class="mf">2.777475595474243</span>
<span class="w">      </span><span class="n">Enable</span><span class="w"> </span><span class="n">Stereo</span><span class="w"> </span><span class="n">Rendering</span><span class="p">:</span>
<span class="w">        </span><span class="n">Stereo</span><span class="w"> </span><span class="n">Eye</span><span class="w"> </span><span class="n">Separation</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05999999865889549</span>
<span class="w">        </span><span class="n">Stereo</span><span class="w"> </span><span class="n">Focal</span><span class="w"> </span><span class="n">Distance</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">Swap</span><span class="w"> </span><span class="n">Stereo</span><span class="w"> </span><span class="n">Eyes</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="n">Value</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Field</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">View</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7853981852531433</span>
<span class="w">      </span><span class="n">Focal</span><span class="w"> </span><span class="n">Point</span><span class="p">:</span>
<span class="w">        </span><span class="n">X</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">Y</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">Z</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">Focal</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="n">Fixed</span><span class="w"> </span><span class="n">Size</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">      </span><span class="n">Focal</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="n">Size</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05000000074505806</span>
<span class="w">      </span><span class="n">Invert</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">Axis</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">      </span><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Current</span><span class="w"> </span><span class="n">View</span>
<span class="w">      </span><span class="n">Near</span><span class="w"> </span><span class="n">Clip</span><span class="w"> </span><span class="n">Distance</span><span class="p">:</span><span class="w"> </span><span class="mf">0.009999999776482582</span>
<span class="w">      </span><span class="n">Pitch</span><span class="p">:</span><span class="w"> </span><span class="mf">0.785398006439209</span>
<span class="w">      </span><span class="n">Target</span><span class="w"> </span><span class="n">Frame</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Fixed</span><span class="w"> </span><span class="n">Frame</span><span class="o">&gt;</span>
<span class="w">      </span><span class="n">Yaw</span><span class="p">:</span><span class="w"> </span><span class="mf">0.785398006439209</span>
<span class="w">    </span><span class="n">Saved</span><span class="p">:</span><span class="w"> </span><span class="o">~</span>
<span class="n">Window</span><span class="w"> </span><span class="n">Geometry</span><span class="p">:</span>
<span class="w">  </span><span class="n">Displays</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Height</span><span class="p">:</span><span class="w"> </span><span class="mi">650</span>
<span class="w">  </span><span class="n">Hide</span><span class="w"> </span><span class="n">Left</span><span class="w"> </span><span class="n">Dock</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Hide</span><span class="w"> </span><span class="n">Right</span><span class="w"> </span><span class="n">Dock</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">QMainWindow</span><span class="w"> </span><span class="n">State</span><span class="p">:</span><span class="w"> </span><span class="mi">000000</span><span class="n">ff00000000fd000000040000000000000156000001ecfc0200000008fb0000001200530065006c0065006300740069006f006e00000001e10000009b0000005c00fffffffb0000001e0054006f006f006c002000500072006f007000650072007400690065007302000001ed000001df00000185000000a3fb000000120056006900650077007300200054006f006f02000001df000002110000018500000122fb000000200054006f006f006c002000500072006f0070006500720074006900650073003203000002880000011d000002210000017afb000000100044006900730070006c006100790073010000003d000001ec000000c900fffffffb0000002000730065006c0065006300740069006f006e00200062007500660066006500720200000138000000aa0000023a00000294fb00000014005700690064006500530074006500720065006f02000000e6000000d2000003ee0000030bfb0000000c004b0069006e0065006300740200000186000001060000030c00000261000000010000010f000001ecfc0200000003fb0000001e0054006f006f006c002000500072006f00700065007200740069006500730100000041000000780000000000000000fb0000000a00560069006500770073010000003d000001ec000000a400fffffffb0000001200530065006c0065006300740069006f006e010000025a000000b200000000000000000000000200000490000000a9fc0100000001fb0000000a00560069006500770073030000004e00000080000002e10000019700000003000005560000003efc0100000002fb0000000800540069006d0065010000000000000556000002eb00fffffffb0000000800540069006d00650100000000000004500000000000000000000002e5000001ec00000004000000040000000800000008fc0000000100000002000000010000000a0054006f006f006c00730100000000ffffffff0000000000000000</span>
<span class="w">  </span><span class="n">Selection</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Time</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Tool</span><span class="w"> </span><span class="n">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Views</span><span class="p">:</span>
<span class="w">    </span><span class="n">collapsed</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="w">  </span><span class="n">Width</span><span class="p">:</span><span class="w"> </span><span class="mi">1366</span>
<span class="w">  </span><span class="n">X</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="n">Y</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span>
</code></pre></div>

<p><strong>创建config文件夹并建立smartcar_arbotix.yaml文件放置配置参数：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nx">port</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="nx">dev</span><span class="o">/</span><span class="nx">ttyUSB0</span>
<span class="nx">baud</span><span class="p">:</span><span class="w"> </span><span class="mi">115200</span>
<span class="nx">rate</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="nx">sync_write</span><span class="p">:</span><span class="w"> </span><span class="nx">True</span>
<span class="nx">sync_read</span><span class="p">:</span><span class="w"> </span><span class="nx">True</span>
<span class="nx">read_rate</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="nx">write_rate</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>

<span class="nx">controllers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="err">##</span><span class="w">  </span><span class="nx">Pololu</span><span class="w"> </span><span class="nx">motors</span><span class="p">:</span><span class="w"> </span><span class="mi">1856</span><span class="w"> </span><span class="nx">cpr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m m-Double">0.3888105</span><span class="nx">m</span><span class="w"> </span><span class="nx">travel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4773</span><span class="w"> </span><span class="nx">ticks</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">meter</span><span class="w"> </span><span class="p">(</span><span class="nx">empirical</span><span class="p">:</span><span class="w"> </span><span class="mi">4100</span><span class="p">)</span>
<span class="w">   </span><span class="nx">base_controller</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">diff_controller</span><span class="p">,</span><span class="w"> </span><span class="nx">base_frame_id</span><span class="p">:</span><span class="w"> </span><span class="nx">base_link</span><span class="p">,</span><span class="w"> </span><span class="nx">base_width</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">0.26</span><span class="p">,</span><span class="w"> </span><span class="nx">ticks_meter</span><span class="p">:</span><span class="w"> </span><span class="mi">4100</span><span class="p">,</span><span class="w"> </span><span class="nx">Kp</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nx">Kd</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nx">Ki</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nx">Ko</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="nx">accel_limit</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">1.0</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>仿真测试：</strong></p>
<p>首先运行lanuch，既可以看到rviz中的机器人：</p>
<p><code>roslaunch smartcar_description smartcar_display.rviz.launch</code></p>
<p>将frame id改为odom，然后发布一条消息：</p>
<p><code>rostopic pub -r 10 /cmd_vel geometry_msgs/Twist '{linear: {x: 0.5, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0.5}}'</code></p>
<p>通过<code>rqt_graph</code>查看节点关系。</p>
<h6 id="3">3.键盘控制</h6>
<p>每次让机器人移动还要在终端里输入指令，这也太麻烦了，有没有办法通过键盘来控制机器人的移动呢？答案是当然的了。</p>
<p>我们循序渐进，先来把前面的指令写入python脚本进行自动发指令。</p>
<p><strong>Python自动指令</strong>    <br />
创建一个单独的程序包：<code>roscreate-pkg smartcar_teleop rospy geometry_msgs std_msgs roscpp</code></p>
<p>在smartcar_teleop/scripts文件夹下创建teleop.py编写如下的控制代码：</p>
<div class="codehilite"><pre><span></span><code><span class="c1">##!/usr/bin/env python3  </span>

<span class="kn">import</span> <span class="nn">roslib</span><span class="p">;</span> <span class="n">roslib</span><span class="o">.</span><span class="n">load_manifest</span><span class="p">(</span><span class="s1">&#39;smartcar_teleop&#39;</span><span class="p">)</span>  

<span class="kn">import</span> <span class="nn">rospy</span>  

<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>  

<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">String</span>  



<span class="k">class</span> <span class="nc">Teleop</span><span class="p">:</span>  

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  

        <span class="n">pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;cmd_vel&#39;</span><span class="p">,</span> <span class="n">Twist</span><span class="p">)</span>  

        <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;smartcar_teleop&#39;</span><span class="p">)</span>  

        <span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~hz&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  

        <span class="bp">self</span><span class="o">.</span><span class="n">cmd</span> <span class="o">=</span> <span class="kc">None</span>  



        <span class="n">cmd</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.2</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.5</span>  



        <span class="bp">self</span><span class="o">.</span><span class="n">cmd</span> <span class="o">=</span> <span class="n">cmd</span>  

        <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>  

            <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;hello world </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_time</span><span class="p">()</span>  

            <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>  

            <span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmd</span><span class="p">)</span>  

            <span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>  



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span><span class="n">Teleop</span><span class="p">()</span>
</code></pre></div>

<p><strong>执行Python自动脚本：</strong>
<code>rosrun smartcar_teleop teleop.py</code></p>
<p>也可以建立一个launch文件(teleop.launch)运行：</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;launch&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cmd_topic&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;cmd_vel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;smartcar_teleop&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;teleop.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;smartcar_teleop&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;cmd_vel&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;$(arg cmd_topic)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/node&gt;</span><span class="w">  </span>

<span class="nt">&lt;/launch&gt;</span>
</code></pre></div>

<p>运行成功后，在rviz里看smartcar有没有动起来！！！</p>
<p><strong>Python键盘控制：</strong>   <br />
虽然很多机器人的键盘控制使用的都是C++编写的代码，但是考虑到python的强大，我们还是需要尝试使用python来编写程序。</p>
<p>创建keyboard.py，粘贴以下代码：</p>
<div class="codehilite"><pre><span></span><code><span class="c1">##!/usr/bin/env python3  </span>

<span class="c1">## -*- coding: utf-8 -*  </span>

<span class="kn">import</span>  <span class="nn">os</span>  

<span class="kn">import</span>  <span class="nn">sys</span>  

<span class="kn">import</span>  <span class="nn">tty</span><span class="o">,</span> <span class="nn">termios</span>  

<span class="kn">import</span> <span class="nn">roslib</span><span class="p">;</span> <span class="n">roslib</span><span class="o">.</span><span class="n">load_manifest</span><span class="p">(</span><span class="s1">&#39;smartcar_teleop&#39;</span><span class="p">)</span>  

<span class="kn">import</span> <span class="nn">rospy</span>  

<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>  

<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">String</span>  


<span class="c1">## 全局变量  </span>

<span class="n">cmd</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>  

<span class="n">pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;cmd_vel&#39;</span><span class="p">,</span> <span class="n">Twist</span><span class="p">)</span>  


<span class="k">def</span> <span class="nf">keyboardLoop</span><span class="p">():</span>  

    <span class="c1">##初始化  </span>

    <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;smartcar_teleop&#39;</span><span class="p">)</span>  

    <span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~hz&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  

    <span class="c1">##速度变量  </span>

    <span class="n">walk_vel_</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;walk_vel&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  

    <span class="n">run_vel_</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;run_vel&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>  

    <span class="n">yaw_rate_</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;yaw_rate&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>  

    <span class="n">yaw_rate_run_</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;yaw_rate_run&#39;</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>  

    <span class="n">max_tv</span> <span class="o">=</span> <span class="n">walk_vel_</span>  

    <span class="n">max_rv</span> <span class="o">=</span> <span class="n">yaw_rate_</span>  

    <span class="c1">##显示提示信息  </span>

    <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Reading from keyboard&quot;</span> <span class="p">)</span> 

    <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Use WASD keys to control the robot&quot;</span>  <span class="p">)</span>

    <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Press Caps to move faster&quot;</span>  <span class="p">)</span>

    <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Press q to quit&quot;</span>  <span class="p">)</span>

    <span class="c1">##读取按键循环  </span>

    <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>  

        <span class="n">fd</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">fileno</span><span class="p">()</span>  

        <span class="n">old_settings</span> <span class="o">=</span> <span class="n">termios</span><span class="o">.</span><span class="n">tcgetattr</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>  

        <span class="c1">##不产生回显效果  </span>

        <span class="n">old_settings</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_settings</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">termios</span><span class="o">.</span><span class="n">ICANON</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">termios</span><span class="o">.</span><span class="n">ECHO</span>  

        <span class="k">try</span> <span class="p">:</span>  

            <span class="n">tty</span><span class="o">.</span><span class="n">setraw</span><span class="p">(</span> <span class="n">fd</span> <span class="p">)</span>  

            <span class="n">ch</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  

        <span class="k">finally</span> <span class="p">:</span>  

            <span class="n">termios</span><span class="o">.</span><span class="n">tcsetattr</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">termios</span><span class="o">.</span><span class="n">TCSADRAIN</span><span class="p">,</span> <span class="n">old_settings</span><span class="p">)</span>  



        <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;w&#39;</span><span class="p">:</span>  

            <span class="n">max_tv</span> <span class="o">=</span> <span class="n">walk_vel_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="mi">0</span>  

        <span class="k">elif</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;s&#39;</span><span class="p">:</span>  

            <span class="n">max_tv</span> <span class="o">=</span> <span class="n">walk_vel_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="mi">0</span>  

        <span class="k">elif</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span>  

            <span class="n">max_rv</span> <span class="o">=</span> <span class="n">yaw_rate_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="mi">1</span>  

        <span class="k">elif</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span>  

            <span class="n">max_rv</span> <span class="o">=</span> <span class="n">yaw_rate_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  

        <span class="k">elif</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>  

            <span class="n">max_tv</span> <span class="o">=</span> <span class="n">run_vel_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="mi">0</span>  

        <span class="k">elif</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span>  

            <span class="n">max_tv</span> <span class="o">=</span> <span class="n">run_vel_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="mi">0</span>  

        <span class="k">elif</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span><span class="p">:</span>  

            <span class="n">max_rv</span> <span class="o">=</span> <span class="n">yaw_rate_run_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="mi">1</span>  

        <span class="k">elif</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;D&#39;</span><span class="p">:</span>  

            <span class="n">max_rv</span> <span class="o">=</span> <span class="n">yaw_rate_run_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  

        <span class="k">elif</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>  

            <span class="n">exit</span><span class="p">()</span>  

        <span class="k">else</span><span class="p">:</span>  

            <span class="n">max_tv</span> <span class="o">=</span> <span class="n">walk_vel_</span>  

            <span class="n">max_rv</span> <span class="o">=</span> <span class="n">yaw_rate_</span>  

            <span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>  

            <span class="n">turn</span> <span class="o">=</span> <span class="mi">0</span>  



        <span class="c1">##发送消息  </span>

        <span class="n">cmd</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">speed</span> <span class="o">*</span> <span class="n">max_tv</span><span class="p">;</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">turn</span> <span class="o">*</span> <span class="n">max_rv</span><span class="p">;</span>  

        <span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>  

        <span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>  

        <span class="c1">##停止机器人  </span>

        <span class="n">stop_robot</span><span class="p">();</span>  



<span class="k">def</span> <span class="nf">stop_robot</span><span class="p">():</span>  

    <span class="n">cmd</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>  

    <span class="n">cmd</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span>  

    <span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>  



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>  

    <span class="k">try</span><span class="p">:</span>  

        <span class="n">keyboardLoop</span><span class="p">()</span>  

    <span class="k">except</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSInterruptException</span><span class="p">:</span>  

        <span class="k">pass</span>
</code></pre></div>

<h6 id="4">4.操纵杆控制</h6>
<p>对于移动机器人，键盘的控制往往满足不了我们的需求。</p>
<p>操作杆（joystick）控制会更加有操作感，ROS中的很多机器人也带有操作杆的相关代码，只需要简单的移植即可。</p>
<p>一、测试操作杆驱动</p>
<p>首先将操作杆的接口插入电脑，然后在终端中输入：<code>ls /dev/input/</code></p>
<p>其中的js0就代表我们的操作杆。然后测试操作杆的操作是否有效，输入:<code>sudo jstest /dev/input/js0</code></p>
<p>然后会在终端中显示操作杆的各个控制值的即时值，操作操作杆，如果每个按键和操作都有效，说明操作杆是正常的。最后在ROS中的节点里进行测试。打开joy节点：<code>rosrun joy joy_node</code></p>
<p>再打开一个窗口，输入下面命令，查看数据:<code>rostopic echo joy</code></p>
<p>二、控制代码</p>
<p>从上面的测试中，我们发现在前后左右摇动操作杆时，相应改变的数据是Axes中0号和1号位的数据，也是我们最常用的数据，其他按键对应的位置也可以找到，编程的时候就是利用的这些数据位置，所以一定要找到每个按键的对应编号。</p>
<p>ROS中已经为我们建立了操作杆的数据结构。</p>
<p>我们主要用到的就是axes和buttons数据。最终的代码如下：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">roslib</span><span class="p">;</span> <span class="n">roslib</span><span class="o">.</span><span class="n">load_manifest</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">##39;smartcar_teleop&amp;##39;)  </span>

<span class="kn">import</span> <span class="nn">rospy</span>  

<span class="kn">from</span> <span class="nn">sensor_msgs.msg</span> <span class="kn">import</span> <span class="n">Joy</span>  

<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>  

<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">String</span>  

<span class="k">class</span> <span class="nc">Teleop</span><span class="p">:</span>  

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  

        <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">##39;smartcar_teleop_joy&amp;##39;)  </span>



        <span class="bp">self</span><span class="o">.</span><span class="n">turn_scale</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">##39;~turn_scale&amp;##39;)  </span>

        <span class="bp">self</span><span class="o">.</span><span class="n">drive_scale</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">##39;~drive_scale&amp;##39;)  </span>

        <span class="bp">self</span><span class="o">.</span><span class="n">deadman_button</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">##39;~deadman_button&amp;##39;, 0)  </span>



        <span class="bp">self</span><span class="o">.</span><span class="n">cmd</span> <span class="o">=</span> <span class="kc">None</span>  

        <span class="n">cmd_pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">##39;cmd_vel&amp;##39;, Twist)  </span>



        <span class="n">announce_pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">##39;/smartcar/announce/teleops&amp;##39;,  </span>

                                       <span class="n">String</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  

        <span class="n">announce_pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_namespace</span><span class="p">());</span>  



        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s2">&quot;joy&quot;</span><span class="p">,</span> <span class="n">Joy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">)</span>  

        <span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">##39;~hz&amp;##39;, 20))  </span>



        <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>  

            <span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>  

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmd</span><span class="p">:</span>  

                <span class="n">cmd_pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmd</span><span class="p">)</span>  



    <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>  

<span class="w">        </span><span class="sd">&quot;&quot;&quot; Receive joystick data, formulate Twist message. &quot;&quot;&quot;</span>  

        <span class="n">cmd</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">drive_scale</span>  

        <span class="n">cmd</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">turn_scale</span>  



        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">deadman_button</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  

            <span class="bp">self</span><span class="o">.</span><span class="n">cmd</span> <span class="o">=</span> <span class="n">cmd</span>  

        <span class="k">else</span><span class="p">:</span>  

            <span class="bp">self</span><span class="o">.</span><span class="n">cmd</span> <span class="o">=</span> <span class="kc">None</span>  



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span> <span class="n">Teleop</span><span class="p">()</span>
</code></pre></div>

<p>三、机器人控制</p>
<p>首先来创建一个launch文件（teleop_joy.launch）:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;launch&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drive_speed&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;turn_speed&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joy_dev&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;/dev/input/js0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cmd_topic&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;cmd_vel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joy&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joy_node&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joy_node&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dev&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg joy_dev)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;deadzone&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/node&gt;</span><span class="w">  </span>



<span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;smartcar_teleop&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;teleop_joy.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;smartcar_teleop&quot;</span><span class="nt">&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;turn_scale&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg turn_speed)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drive_scale&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg drive_speed)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">    </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;cmd_vel&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;$(arg cmd_topic)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span>

<span class="w">  </span><span class="nt">&lt;/node&gt;</span><span class="w">  </span>

<span class="nt">&lt;/launch&gt;</span>
</code></pre></div>

<p>在rviz中打开我们的机器人模型，然后打开操作杆的控制节点：</p>
<div class="codehilite"><pre><span></span><code>roslaunch smartcar_display.rviz.launch  
roslaunch smartcar_teleop teleop_joy.launch
</code></pre></div>

<p>在新终端中输入：<code>rostopic echo joy</code>可以查看到实时的操作杆控制数据。</p>
<h3 id="action">三、action通讯机制</h3>
<p>ROS中常用的通讯机制是topic和service，但是在很多场景下，这两种通讯机制往往满足不了我们的需求，比如机械臂控制，如果用topic发布一个运动目标，由于topic没有反馈，还需要另外订阅一个机械臂状态的topic，来获得运动过程的状态。如果用service来发布运动目标，虽然可以获得反馈，但是反馈只有一次，对于我们的控制来讲数据太少了，而且如果反馈迟迟没收到，也只能傻傻等待，干不了其他事情。那么有没有一种更加适合的通讯机制，来满足类似这样场景的需求呢？当然是有的，就是我们这篇要讲到的action通讯机制。</p>
<h6 id="action_1">什么是action</h6>
<p>ROS中有一个actinlib的功能包集，实现了action的通讯机制。那么什么是action呢？action也是一种类似于service的问答通讯机制，不一样的地方是action还带有一个反馈机制，可以不断反馈任务的实施进度，而且可以在任务实施过程中，中止运行。</p>
<p>回到我们前边提到的场景，我们使用action来发布一个机器人的运动目标，机器人接到这个action后，就开始运动，在运动过程中不断反馈当前的运动状态，在运动过程中我们可以取消运动，让机器人停止，如果机器人完成了运动目标，那么action会返回任务完成的标志。</p>
<h6 id="action_2">action的工作机制</h6>
<p>action采用了服务器端/客户端（client and server）的工作模式</p>
<p>client和server之间通过actionlib定义的“action protocol”进行通讯。这种通讯协议是基于ROS的消息机制实现的，为用户提供了client和server的接口</p>
<p>在上边的action的接口框图上，我们可以看到，client向server端发布任务目标以及在必要的时候取消任务，server会向client发布当前的状态、实时的反馈和最终的任务结果。</p>
<ul>
<li>goal：任务目标</li>
<li>cancel：请求取消任务</li>
<li>status：通知client当前的状态</li>
<li>feedback：周期反馈任务运行的监控数据</li>
<li>result：向client发送任务的执行结果，这个topic只会发布一次。</li>
</ul>
<h6 id="action_3">action的定义</h6>
<p>ROS中的message是通过.msg文件来定义的，service是通过.srv定义，那么action是不是也是通过类似的方法定义呢？答案是肯定的，action通过.action文件定义，放置在功能包的action文件夹下，格式类似如下：     </p>
<div class="codehilite"><pre><span></span><code><span class="gu">##</span> Define the goal
uint32 dishwasher_id  ## Specify which dishwasher we want to use
---
<span class="gu">##</span> Define the result
uint32 total_dishes_cleaned
---
<span class="gu">##</span> Define a feedback message 
float32 percent_complete
</code></pre></div>

<p>从上边的.action文件示例中，我们可以发现，定义一个action需要三个部分：goal、result、feedback，具体含义在上一小节中已经讲过了。</p>
<p>实现了.action之后，还需要将这个文件加入编译，在CMakeLists.txt文件中添加如下的编译规则：</p>
<div class="codehilite"><pre><span></span><code><span class="nx">find_package</span><span class="p">(</span><span class="nx">catkin</span><span class="w"> </span><span class="nx">REQUIRED</span><span class="w"> </span><span class="nx">genmsg</span><span class="w"> </span><span class="nx">actionlib_msgs</span><span class="w"> </span><span class="nx">actionlib</span><span class="p">)</span>

<span class="nx">add_action_files</span><span class="p">(</span><span class="nx">DIRECTORY</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="nx">FILES</span><span class="w"> </span><span class="nx">DoDishes</span><span class="p">.</span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="nx">generate_messages</span><span class="p">(</span><span class="nx">DEPENDENCIES</span><span class="w"> </span><span class="nx">actionlib_msgs</span>
</code></pre></div>

<p>还需要在功能包的package.xml中添加：</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;build_depend&gt;</span>actionlib<span class="nt">&lt;/build_depend&gt;</span>
<span class="nt">&lt;build_depend&gt;</span>actionlib_msgs<span class="nt">&lt;/build_depend&gt;</span>
<span class="nt">&lt;run_depend&gt;</span>actionlib<span class="nt">&lt;/run_depend&gt;</span><span class="w"> </span>
<span class="nt">&lt;run_depend&gt;</span>actionlib_msgs<span class="nt">&lt;/run_depend&gt;</span>
</code></pre></div>

<p>现在就可以进行编译了，编译完成后会产生一系列的.msg文件：</p>
<div class="codehilite"><pre><span></span><code>DoDishesAction.msg
DoDishesActionGoal.msg
DoDishesActionResult.msg
DoDishesActionFeedback.msg
DoDishesGoal.msg
DoDishesResult.msg
DoDishesFeedback.msg
</code></pre></div>

<p>这些不同的消息类型，我们在调用action时根据需要会用到。从这里我们也可以看到，action确实是基于message实现的。</p>
<h6 id="_27">例程运行</h6>
<p>洗盘子例程</p>
<div class="codehilite"><pre><span></span><code>rosrun action_tutorials DoDishes_server
rosrun action_tutorials DoDishes_client
</code></pre></div>

<h3 id="ros_tf">四、ros_tf</h3>
<h3 id="rosnavigation">五、ros与navigation</h3>
<h6 id="slam">SLAM定位与建图</h6>
<p>slam-toolbox是基于karto slam算法的改进，需要odom与scan的数据。</p>
<p><code>sudo apt-get install ros-noetic-slam-toolbox</code></p>
<p>gmapping算法，需要odom与scan的数据。</p>
<p>hector算法，只需要scan的数据。</p>
<p>cartographer是谷歌的slam算法，需要odom与scan的数据。</p>
<h3 id="rosteb">六、ros与TEB轨迹规划</h3>
<p>介绍teb_local_planner本地规划算法的整合使用。</p>
<h6 id="teb">TEB优化测试</h6>
<p>介绍如何运行轨迹优化以及如何更改基础参数以设置自定义行为和性能。</p>
<p>安装TEB（二进制）：<code>sudo apt-get install ros-noetic-teb-local-planner</code></p>
<p>安装TEB例程（源码）：    </p>
<div class="codehilite"><pre><span></span><code>git clone https://ghproxy.com/https://github.com/rst-tu-dortmund/teb_local_planner_tutorials.git
sudo apt-get install ros-noetic-stage-ros   // 依赖项
sudo apt-get install ros-noetic-navigation
sudo apt-get install ros-noetic-map-server
</code></pre></div>

<p>轨迹优化:</p>
<div class="codehilite"><pre><span></span><code>该软件包包括一个简单的测试节点（test_optim_node），它可以优化固定开始和目标姿势之间的轨迹。

我们首先开始在开始和目标之间配置单个轨迹（Timed-Elastic-Band）的规划，然后我们将在独特的拓扑中激活和设置规划。

使用ROS参数服务器停用并行计划（确保运行roscore）

<span class="sb">`rosparam set /test_optim_node/enable_homotopy_class_planning False`</span>

启动test_optim_node并结合预配置的rviz节点进行可视化：

<span class="sb">`roslaunch teb_local_planner test_optim_node.launch`</span>

通过运行rqt_reconfigure来定制我们的优化：

<span class="sb">`rosrun rqt_reconfigure rqt_reconfigure`</span>
</code></pre></div>

<p>独特拓扑中多个轨迹的优化：</p>
<div class="codehilite"><pre><span></span><code>我们现在解决本地优化方案的问题，并在独特的拓扑中实现并行规划。

此扩展计划程序默认启用，需要更多计算资源。

重新启动roscore或重新激活扩展计划程序：

<span class="sb">`rosparam set /test_optim_node/enable_homotopy_class_planning True`</span>

启动test_optim_node并结合预配置的rviz节点进行可视化：

<span class="sb">`roslaunch teb_local_planner test_optim_node.launch`</span>

通过在每个轨迹配置处显示各个姿势（如红色箭头）来突出显示当前最佳轨迹（在最便宜的优化成本意义上）。
</code></pre></div>

<h6 id="teb_1">TEB优化反馈</h6>
<div class="codehilite"><pre><span></span><code>介绍如何检查优化轨迹的反馈; 提供了一个示例，其可视化当前所选轨迹的速度分布
在前面的示例中，您学习了如何测试优化，如何调整参数以及如何在rviz中可视化生成的轨迹。
然而，在rviz中可视化的轨迹不包含任何时间信息，仅显示其空间状态。
为了进一步参数调整或评估目的，可能有兴趣获得对底层优化状态的访问（涉及时间优化状态）。
因此teb_local_planner提供反馈消息teb_local_planner/FeedbackMsg，其包含所有内部状态和一些推断变量（如速度曲线）。
请注意，加速度曲线当前为空。
此外，该消息包含在独特拓扑中找到的所有备选轨迹。
当前选择的轨迹索引存储在变量selected_trajectory_idx中。
反馈主题（参见规划器API）可以由任何节点订阅（例如，将数据导出到文件，编写一些自定义可视化，......）。
</code></pre></div>

<p>注意：</p>
<div class="codehilite"><pre><span></span><code>默认情况下关闭发送反馈消息以减轻计算负担。
可以通过将rosparam ~/publish_feedback设置为true或通过调用rqt_reconfigure来启用它。
</code></pre></div>

<p>可视化速度曲线</p>
<div class="codehilite"><pre><span></span><code>在下文中，提供了一个小的python脚本，它订阅了上一个教程中介绍的test_optim_node。
脚本取决于pypose以创建绘图。
仅显示当前所选轨迹的速度分布。
</code></pre></div>

<p>创建visualize_test.py，粘贴下面代码：</p>
<div class="codehilite"><pre><span></span><code><span class="c1">##!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">rospy</span><span class="o">,</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">teb_local_planner.msg</span> <span class="kn">import</span> <span class="n">FeedbackMsg</span><span class="p">,</span> <span class="n">TrajectoryMsg</span><span class="p">,</span> <span class="n">TrajectoryPointMsg</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">PolygonStamped</span><span class="p">,</span> <span class="n">Point32</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plotter</span>

<span class="k">def</span> <span class="nf">feedback_callback</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
  <span class="k">global</span> <span class="n">trajectory</span>

  <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">trajectories</span><span class="p">:</span> <span class="c1">## empty</span>
    <span class="n">trajectory</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">return</span>
  <span class="n">trajectory</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">trajectories</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">selected_trajectory_idx</span><span class="p">]</span><span class="o">.</span><span class="n">trajectory</span>


<span class="k">def</span> <span class="nf">plot_velocity_profile</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax_v</span><span class="p">,</span> <span class="n">ax_omega</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">omega</span><span class="p">):</span>
  <span class="n">ax_v</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
  <span class="n">ax_v</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
  <span class="n">ax_v</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Trans. velocity [m/s]&#39;</span><span class="p">)</span>
  <span class="n">ax_v</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="s1">&#39;-bx&#39;</span><span class="p">)</span>
  <span class="n">ax_omega</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
  <span class="n">ax_omega</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
  <span class="n">ax_omega</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Rot. velocity [rad/s]&#39;</span><span class="p">)</span>
  <span class="n">ax_omega</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Time [s]&#39;</span><span class="p">)</span>
  <span class="n">ax_omega</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">omega</span><span class="p">,</span> <span class="s1">&#39;-bx&#39;</span><span class="p">)</span>
  <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>



<span class="k">def</span> <span class="nf">velocity_plotter</span><span class="p">():</span>
  <span class="k">global</span> <span class="n">trajectory</span>
  <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s2">&quot;visualize_velocity_profile&quot;</span><span class="p">,</span> <span class="n">anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

  <span class="n">topic_name</span> <span class="o">=</span> <span class="s2">&quot;/test_optim_node/teb_feedback&quot;</span> <span class="c1">## define feedback topic here!</span>
  <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">topic_name</span><span class="p">,</span> <span class="n">FeedbackMsg</span><span class="p">,</span> <span class="n">feedback_callback</span><span class="p">,</span> <span class="n">queue_size</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> 

  <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Visualizing velocity profile published on &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span><span class="n">topic_name</span><span class="p">)</span> 
  <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Make sure to enable rosparam &#39;publish_feedback&#39; in the teb_local_planner.&quot;</span><span class="p">)</span>

  <span class="c1">## two subplots sharing the same t axis</span>
  <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax_v</span><span class="p">,</span> <span class="n">ax_omega</span><span class="p">)</span> <span class="o">=</span> <span class="n">plotter</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  <span class="n">plotter</span><span class="o">.</span><span class="n">ion</span><span class="p">()</span>
  <span class="n">plotter</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


  <span class="n">r</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">## define rate here</span>
  <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>

    <span class="n">t</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">v</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">omega</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">trajectory</span><span class="p">:</span>
      <span class="n">t</span><span class="o">.</span><span class="kp">append</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">time_from_start</span><span class="o">.</span><span class="n">to_sec</span><span class="p">())</span>
      <span class="n">v</span><span class="o">.</span><span class="kp">append</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">velocity</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
      <span class="n">omega</span><span class="o">.</span><span class="kp">append</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">velocity</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

    <span class="n">plot_velocity_profile</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax_v</span><span class="p">,</span> <span class="n">ax_omega</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="kp">asarray</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="kp">asarray</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="kp">asarray</span><span class="p">(</span><span class="n">omega</span><span class="p">))</span>

    <span class="n">r</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> 
  <span class="k">try</span><span class="p">:</span>
    <span class="n">trajectory</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">velocity_plotter</span><span class="p">()</span>
  <span class="k">except</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSInterruptException</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>

<p>该脚本已作为visualize_velocity_profile.py包含在teb_local_planner_tutorials包中（但自带的脚本我运行不了，粘贴我上面的是可以正常运行的）。</p>
<p>运行优化反馈测试：</p>
<div class="codehilite"><pre><span></span><code>rosparam set /test_optim_node/publish_feedback true ## or use rqt_reconfigure later
roslaunch teb_local_planner test_optim_node.launch
rosrun teb_local_planner_tutorials visualize_test.py
</code></pre></div>

<p>将看到线速度和角速度曲线。</p>
<h3 id="rosbridge_suite">七、rosbridge_suite</h3>
<p>Rosbridge为非ROS程序提供了一个使用ROS功能的JSON API。</p>
<p>rosbridge协议是用于向ROS（并且在理论上，任何其他机器人中间件）发送基于JSON的命令的规范。</p>
<p>rosbridge_suite包是一个包集合，用于实现rosbridge协议和提供WebSocket传输层。</p>
<p>包含如下几个包：</p>
<div class="codehilite"><pre><span></span><code><span class="nx">rosbridge_library</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">核心rosbridge包</span><span class="err">。</span><span class="nx">rosbridge_library负责获取JSON字符串并将命令发送到ROS</span><span class="err">，</span><span class="nx">反之亦然</span><span class="err">。</span>
<span class="nx">rosapi</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">通过服务调用使某些ROS</span><span class="w"> </span><span class="nx">actions可访问</span><span class="err">。</span><span class="w"> </span><span class="nx">这包括获取和设置参数</span><span class="err">，</span><span class="nx">获取主题列表等</span><span class="err">。</span>
<span class="nx">rosbridge_server</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">虽然rosbridge_library提供了JSON</span><span class="w"> </span><span class="nx">ROS转换</span><span class="err">，</span><span class="nx">但它将传输层留给其他人</span><span class="err">。</span>
<span class="w">    </span><span class="nx">Rosbridge_server提供了一个WebSocket连接</span><span class="err">，</span><span class="nx">所以浏览器可以</span><span class="err">“</span><span class="nx">与rosbridge交谈</span><span class="err">”。</span>
<span class="w">    </span><span class="nx">Roslibjs是一个浏览器的JavaScript库</span><span class="err">，</span><span class="nx">可以通过rosbridge_server与ROS交谈</span><span class="err">。</span>
</code></pre></div>

<p><strong>例程运行：</strong></p>
<p>rosbridge安装：<code>sudo apt-get install ros-&lt;rosdistro&gt;-rosbridge-server</code>   <br />
rosbridge运行：<code>roslaunch rosbridge_server rosbridge_websocket.launch</code>   <br />
默认情况下，这将运行rosbridge并创建一个WebSocket在端口9090,可以通过在ROS中设置~/port参数来配置端口。      </p>
<p>例如修改端口为8080，如下所示：   </p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;launch&gt;</span>
<span class="w">  </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find rosbridge_server)/launch/rosbridge_websocket.launch&quot;</span><span class="w"> </span><span class="nt">&gt;</span><span class="w"> </span>
<span class="w">     </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;port&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;8080&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/include&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</code></pre></div>

<p>现在rosbridge已经启动，并且WebSocket连接可用，我们可以创建一个基本的HTML网页发送和接收呼叫rosbridge。    <br />
打开<code>localhost:9090</code></p>
<p>另外，类似Rviz，ROS其实提供了一个网页可视化的工具Webviz，参考开发教程如下：<a href="http://robotwebtools.org/">webtools</a></p>
<h3 id="ros_13">八、ROS产品化探索</h3>
<h6 id="_28">通信机制篇</h6>
<p><strong>概要</strong></p>
<p>近几年，机器人和人工智能繁荣发展，曾经运行在实验室的机器人已经逐渐走入千家万户的生活。作为机器人开发利器的ROS也得到了非常广泛的应用，成为机器人领域的普遍标准。</p>
<p>ROS原本针对科研领域的PR2机器人开发，这种大繁荣的景象远远超过ROS的最初目标，也使得ROS的缺陷在广泛应用的同时暴露无遗：</p>
<div class="codehilite"><pre><span></span><code>缺乏构建多机器人系统的标准方法；

在Windows、MacOS、RTOS等系统上无法应用或者功能有限；

缺少实时性方面的设计；

需要良好的网络环境保证数据的完整性，而且网络没有数据加密、安全防护等功能；

ROS 1的稳定性欠佳，研究开发与上市产品之间的过渡艰难；
</code></pre></div>

<p>正是由于ROS1存在种种问题，才促使ROS2.0的出现。ROS2.0虽然从根本上解决了ROS1.0的许多问题，但是却无法短时间替代ROS1.0在庞大生态系统中的关键位置，只能借助越来越多的关键开发者逐渐推进。所以从目前ROS2.0的情况来看，近几年ROS1.0的应用还会是主流。</p>
<p><strong>ROS1.0能否产品化？</strong></p>
<p>那么目前的ROS1.0到底能不能在机器人的产品化过程中应用？如果可以，又该如何应用于机器人产品的开发？</p>
<p>ROS的核心虽然是通信机制，但是如今的ROS已经远远超过通信机制的范畴。总体来讲，ROS包含四个部分：通信机制、开发工具、应用功能、生态系统。</p>
<p>所以在说ROS产品化的时候，我们需要针对这四个方面进行讨论。由于内容较多，这个主题会分为几篇文章分别讨论。</p>
<p>首先来看第一个部分：</p>
<p>1.通信机制</p>
<p>点对点的分布式通信机制是ROS的核心，使用了基于TCP/IP的通信方式，实现模块间点对点的松耦合连接，可以执行若干种类型的通信，包括基于话题（Topic）的异步数据流通信，基于服务（Service）的同步数据流通信，还有参数服务器上的数据存储等。</p>
<p>但是这种通信机制的实时性和稳定性不好，而且强依赖于中心节点ROS Master。比如我们在机器人产品开发的过程中，就遇到无数类似下边的问题：</p>
<div class="codehilite"><pre><span></span><code>在进行压力测试时，系统连续运行一周时间，运行到第四天时（时间不确定），ROS Master莫名宕机，整个系统不再受控，某个节点突然失效也是时有发生的。。。

系统存在大量话题和数据时，本地传输的数据延时大而不确定，远程传输的数据更是经常受到带宽和处理性能的影响。

在系统中频繁创建话题时（比如连续创建几百个话题），某些话题的数据莫名就消失了。

通信的实时性较差，没办法实现毫秒级的机器人控制。

通信数据是开放式的，没有加密，只要在网络中的节点都可以轻松获取。

核心机制的性能没有优化，运行在配置较低的ARM上会占用过多资源。
</code></pre></div>

<p>这样看来，好像ROS的核心部分在机器人产品中完全没有可用性呀！如何去突破这个瓶颈呢？先来看看部分开发者的改良方法。</p>
<p>首先聊聊百度</p>
<p>自从百度All in人工智能之后，无人驾驶汽车平台Apollo就被推上了风口浪尖，甚至还登上了2018春晚的舞台。在这个吸睛无数的Apollo平台背后，就隐藏着ROS的身影。</p>
<p>Apollo平台基于ROS开发，但是对通信机制部分进行了众多改变，有兴趣的小伙伴可以看Apollo改良之后的ROS。</p>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="n">去中心化</span><span class="err">，</span><span class="n">也就是干掉ROS</span><span class="w"> </span><span class="n">Master</span><span class="err">，</span><span class="n">这部分使用了DDS技术</span><span class="err">；</span>
<span class="n">DDS虽然提供的也是发布</span><span class="o">/</span><span class="n">订阅模型的通信机制</span><span class="err">，</span><span class="n">但商用版本可以达到军工标准</span><span class="err">，</span><span class="n">国际上有几家大公司也在推进DDS在ROS</span><span class="w"> </span><span class="mf">2.0</span><span class="n">中的应用</span><span class="err">。</span><span class="w"> </span>
<span class="mf">2.</span><span class="n">使用共享内存的方法</span><span class="err">，</span><span class="n">优化大数据传输的瓶颈</span><span class="err">；</span>
<span class="n">共享内存也是ROS2</span><span class="mf">.0</span><span class="n">中时间敏感型数据通信的方法</span><span class="err">，</span><span class="n">吞吐量和传输速度肯定可以得到很大程度的优化</span><span class="err">，</span><span class="n">同时占用的CPU资源也比较少</span><span class="err">。</span>
<span class="n">使用Protobuf优化数据格式的兼容性</span><span class="err">。</span>
<span class="n">Protobuf是google开源的一种结构化数据存储格式</span><span class="err">，</span><span class="n">百度拿它取代了ROS中的Message</span><span class="err">，</span><span class="n">可以向后兼容数据协议的扩展</span><span class="err">。</span>
<span class="n">无人驾驶汽车的稳定性是一个性命攸关的问题</span><span class="err">，</span><span class="n">百度敢对ROS进行大刀阔斧的优化</span><span class="err">，</span><span class="n">也正说明了ROS的行业认可度和强大生命力</span><span class="err">。</span>
</code></pre></div>

<p>其他</p>
<div class="codehilite"><pre><span></span><code>基于ROS的机器人产品有不少已经投入使用，除上边提到的百度无人驾驶汽车，还有另外一个开源无人驾驶汽车平台Autoware、NASA部署在国际空间站的Robonaut 2机器人等，目前很多大公司的开源部门也在推进ROS的产品化应用。
综观这些机器人产品和平台，都可以说是基于ROS开发的，但是在ROS通信机制部分，也都进行大量的优化和改良。
这种做法对于创业型的公司来讲，如果不是以ROS的改良作为产品的话，往往都不愿意去干这件事情，费时费力。那么对于小公司来讲，如果不想去动ROS的核心通信部分，应该怎么做呢？
这就要说回笔者（guyueju）在创业过程中的实践了。大概有两种方法：
第一种：自己不愿意做，就用别人做好的呗
ROS是一个庞大的开源社区，上边提到的那些ROS优化，基本上都可以在社区中找到开源实现，或是找其他公司做好的成熟产品，站在别人的肩膀上继续前进。
但是这样也有问题，一方面，别人实现的功能不一定完全符合自己的需求，另外一方面，这些实现的相关文档不多，有问题还得从源码上解决。
那就请使用第二种方法!
第二种：自己不愿意做，也不想基于其他平台做，那就别强求了。
这就是笔者创业公司采用的策略——放弃ROS的核心通信机制部分。这句话说来容易，做起来难！毕竟机器人系统还是需要通信功能的，于是我们重新设计了一个。
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2024 DevFrank
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "navigation.tabs", "navigation.instant", "content.code.copy", "content.code.annotate", "navigation.top"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>